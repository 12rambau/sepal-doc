
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Open Foris Geospatial Toolkit &#8212; SEPAL  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Orfeo Toolbox" href="otb.html" />
    <link rel="prev" title="GuidosToolbox Workbench – GWB" href="gwb.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/sepal.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../setup/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../cookbook/index.html">
  Cookbook
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../modules/index.html">
  Modules
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  CLI
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../team/index.html">
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/openforis/sepal" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/OpenForis" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://gis.stackexchange.com/questions/tagged/sepal" rel="noopener" target="_blank" title="GIS Stackexchange">
            <span><i class="fab fa-stack-exchange"></i></span>
            <label class="sr-only">GIS Stackexchange</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/channel/UCtpxScciUj0fjMmhpYsAZbA/featured" rel="noopener" target="_blank" title="Youtube">
            <span><i class="fab fa-youtube"></i></span>
            <label class="sr-only">Youtube</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="gdal.html">
   Geospatial Data Abstraction Library
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="gdrive.html">
   Google Drive
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="gee.html">
   Google Earth Engine
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="gwb.html">
   GuidosToolbox Workbench – GWB
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Open Foris Geospatial Toolkit
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="otb.html">
   Orfeo Toolbox
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#about-this-manual">
     About this manual
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-ofgt">
     What is OFGT?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-great-potential-of-ofgt">
     The great potential of OFGT
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#first-time-users">
     First time users
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#license">
     License
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-info">
     Get Info
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ofgt-tools-documentation">
   OFGT - Tools documentation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#general-tools">
     GENERAL TOOLS
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#csvtopolygon-py">
       CsvToPolygon.py
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#name">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#synopsis">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#description">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#example">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#genericcsvtopolygon-py">
       genericCsvToPolygon.py
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id1">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id2">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id3">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id5">
         EXAMPLE
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id6">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#genericgekml2csv-bash">
       genericGEkml2csv.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id8">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id9">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id10">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id11">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#gexml2csv-bash">
       GExml2csv.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id13">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id14">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id15">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id16">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-addattr-py">
       oft-addattr.py
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id17">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id18">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id19">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id20">
         EXAMPLE
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#how-to-change-the-data-type-in-qgis">
         How to change the data type in QGIS ?
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-addpct-py">
       oft-addpct.py
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id21">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id22">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id23">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id24">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-admin-mask-bash">
       oft-admin-mask.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id25">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id26">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id27">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id28">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-bb">
       oft-bb
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id29">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id30">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id31">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id32">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-classvalues-compare-bash">
       oft-classvalues-compare.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id33">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id34">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id35">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#option">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id36">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-classvalues-plot-bash">
       oft-classvalues-plot.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id37">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id38">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id39">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id40">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-combine-masks-bash">
       oft-combine-masks.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id41">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id42">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id43">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id44">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id45">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-compare-overlap-bash">
       oft-compare-overlap.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id46">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id47">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id48">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id49">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-crop-bash">
       oft-crop.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id50">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id51">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id52">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id53">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id54">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-cuttile-pl">
       oft-cuttile.pl
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id55">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id56">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#options">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id57">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id58">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-filter">
       oft-filter
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id59">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id60">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id61">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id62">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id63">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-gengrid-bash">
       oft-gengrid.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id64">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id65">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id66">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id67">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-getcorners-bash">
       oft-getcorners.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id68">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id69">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id70">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id71">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id72">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-polygonize-bash">
       oft-polygonize.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id73">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id74">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id75">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-sample-within-polys-bash">
       oft-sample-within-polys.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id76">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id77">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id78">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id79">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id80">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-shptif-bash">
       oft-shptif.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id81">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id82">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id83">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id84">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-sigshp-bash">
       oft-sigshp.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id85">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id86">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id87">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id88">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id89">
         EXAMPLE
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#creating-signature-file-with-numerical-values">
           creating signature file with numerical values
          </a>
         </li>
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#creating-signature-file-with-factorial-values">
           creating signature file with factorial values
          </a>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pointstosquares-py">
       PointsToSquares.py
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id90">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id91">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id92">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id93">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#image-manipulation">
     IMAGE MANIPULATION
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#multifillerthermal-bash">
       multifillerThermal.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id94">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id95">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id96">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id97">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-calc">
       oft-calc
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id98">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id99">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id100">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id101">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id102">
         EXAMPLE
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#operators">
           OPERATORS
          </a>
         </li>
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#applications">
           APPLICATIONS
          </a>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-chdet-bash">
       oft-chdet.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id103">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id104">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id105">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#reference">
         REFERENCE
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id106">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-clip-pl">
       oft-clip.pl
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id107">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id108">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id109">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id110">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-combine-images-bash">
       oft-combine-images.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id111">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id112">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id113">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id114">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-gapfill">
       oft-gapfill
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id115">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id116">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id117">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id118">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id119">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-ndvi-bash">
       oft-ndvi.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id120">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id121">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id122">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id123">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id124">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-prepare-images-for-gapfill-bash">
       oft-prepare-images-for-gapfill.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id125">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id126">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id127">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id128">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id129">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-reclass">
       oft-reclass
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id130">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id131">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id132">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id133">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id134">
         EXAMPLE
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#example-1">
           Example 1
          </a>
         </li>
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#example-2">
           Example 2
          </a>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-shrink">
       oft-shrink
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id135">
         NAME
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-stack">
       oft-stack
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id136">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id137">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id138">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id139">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id140">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-trim">
       oft-trim
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id141">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id142">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id143">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id144">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id145">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-trim-maks-bash">
       oft-trim-maks.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id146">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id147">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id148">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id149">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#statistics">
     STATISTICS
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-ascstat-awk">
       oft-ascstat.awk
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id150">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id151">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id152">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id153">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-avg">
       oft-avg
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id154">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id155">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id156">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id157">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id158">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-countpix-pl">
       oft-countpix.pl
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id159">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id160">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id161">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id162">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id163">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-crossvalidate">
       oft-crossvalidate
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id164">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id165">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id166">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id167">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id168">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-extr">
       oft-extr
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id169">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id170">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id171">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id172">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id173">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-his">
       oft-his
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id174">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id175">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id176">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id177">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id178">
         EXAMPLE
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#typical-parameter-setting">
           typical parameter setting
          </a>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-mm">
       oft-mm
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id179">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id180">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id181">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id182">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id183">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-segstat">
       oft-segstat
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id184">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id185">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id186">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id187">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id188">
         EXAMPLE
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#regular-use">
           Regular use
          </a>
         </li>
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#including-std">
           including -std
          </a>
         </li>
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#including-option-shape">
           including option -shape
          </a>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-stat">
       oft-stat
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id189">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id190">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id191">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id192">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#note">
         NOTE
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id193">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#classification">
     CLASSIFICATION
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-cluster-bash">
       oft-cluster.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id194">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id195">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id196">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id197">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id198">
         EXAMPLE
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#id199">
           oft-cluster.bash
          </a>
         </li>
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#oft-clump-bash">
           oft-clump.bash
          </a>
         </li>
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#gdal-polygonize-py">
           gdal_polygonize.py
          </a>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-kmeans">
       oft-kmeans
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id200">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id201">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id202">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id203">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id204">
         EXAMPLE
        </a>
        <ul class="nav section-nav flex-column">
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#creation-of-input-signature-text-file">
           Creation of input signature text file
          </a>
         </li>
         <li class="toc-h6 nav-item toc-entry">
          <a class="reference internal nav-link" href="#unsupervised-classification">
           Unsupervised classification
          </a>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-nn">
       oft-nn
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id205">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id206">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id207">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id208">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id209">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-nn-training-data-bash">
       oft-nn-training-data.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id210">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id211">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id212">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id213">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id214">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-normalize-bash">
       oft-normalize.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id215">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id216">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id217">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id218">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id219">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-prepare-image-for-nn-bash">
       oft-prepare-image-for-nn.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id220">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id221">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id222">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id223">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-unique-mask-for-nn-bash">
       oft-unique-mask-for-nn.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id224">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id225">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id226">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id227">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#segmentation">
     SEGMENTATION
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-clump">
       oft-clump
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id228">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id229">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id230">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id231">
         OPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id232">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-seg">
       oft-seg
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id233">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id234">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id235">
         OPTIONS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id236">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id237">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#projection">
     PROJECTION
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oft-getproj-bash">
       oft-getproj.bash
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id238">
         NAME
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id239">
         SYNOPSIS
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id240">
         DESCRIPTION
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id242">
         EXAMPLE
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/openforis/sepal-doc/edit/master/docs/source/cli/ofgt.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="open-foris-geospatial-toolkit">
<h1>Open Foris Geospatial Toolkit<a class="headerlink" href="#open-foris-geospatial-toolkit" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Version 1.25.4 October 2014</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="about-this-manual">
<h3>About this manual<a class="headerlink" href="#about-this-manual" title="Permalink to this headline">¶</a></h3>
<p>The user manual is developed to help getting into spatial analysis using the Open Foris Geospatial Toolkit. It gives basic explanations of how OFGT functions. It is not attempted to explain the theoretical background on how to do geospatial analysis using remote sensing or GIS, but rather will guide you through hands-on examples for each tool, next to some general areas, such as the installation. Further, the manual will link to relevant man pages and other documentation.
In addition, the user manual is written in a way that it can be understood by people who are experienced Windows or Mac users, but have not used Linux or OFGT much before. Sources and documentation for OFGT can be obtained here: <a class="reference external" href="http://openforis.org/tools/geospatial-toolkit.html">http://openforis.org/tools/geospatial-toolkit.html</a></p>
</div>
<div class="section" id="what-is-ofgt">
<h3>What is OFGT?<a class="headerlink" href="#what-is-ofgt" title="Permalink to this headline">¶</a></h3>
<p>OFGT - Open Foris Geospatial Toolkit is a a collection of prototype command- line utilities for processing of geographical data. The tools can be divided into stand-alone programs and scripts and they have been tested mainly in Ubuntu Linux environment although can be used with other linux distros, Mac OS, and MS Windows (Cywgin) as well. Most of the stand-alone programs use GDAL libraries and many of the scripts rely heavily on GDAL command-line utilities.
The OFGT project started under the Open Foris Initiative to develop, share and support software tools and methods for multi-purpose forest assessment, monitoring and reporting <a class="reference external" href="http://openforis.org">http://openforis.org</a>. The Initiative develops and supports innovative, easy-to-use tools needed to produce reliable, timely information on the state of forest resources and their uses. The command-line tools aim to simplify the complex process of transforming raw satellite imagery for automatic image processing to produce valuable information. These tools contain radiometric harmonization, image segmentation and image arithmetic, as well as image statistics, feature extraction and other image processing analysis.
Overview of OFGT versions currently available:</p>
<ul class="simple">
<li><p>OFGT 1.25.4 - continuously updated</p></li>
<li><p>OFGT 1.0 -</p></li>
</ul>
</div>
<div class="section" id="the-great-potential-of-ofgt">
<h3>The great potential of OFGT<a class="headerlink" href="#the-great-potential-of-ofgt" title="Permalink to this headline">¶</a></h3>
<p>The toolkit comes to its own when dealing with large data sets:
-   The <strong>processing itself takes a fraction</strong> of time than with conventional software.
-   <strong>Automatised data processing makes applications repeatable</strong>, which is of high advantage for many projects.
-   All tools and methods developed under the Initiative are open-source.</p>
</div>
<div class="section" id="first-time-users">
<h3>First time users<a class="headerlink" href="#first-time-users" title="Permalink to this headline">¶</a></h3>
<p>First time users, the terminal is your friend: The Open Foris Geospatial Toolkit tutorial is aiming to provide straight forward guidelines and examples to help first time users to familiarize themselves with the Open Foris Geospatial Toolkit. This includes the installation of Ubuntu, various geospatial tools and, in particular, the installation and application of the Open Foris Geospatial Toolkit. You do not need to be an expert, we just would like you to be curious to try things out. Do not be afraid of using the command-line! We know that the terminal window is for many users a barrier of being afraid ruining everything and having to start from scratch. These days the terminal is not exclusively for advanced computer enthusiasts. Give it a try and just start playing around following the tutorials and instructions you can find in the wiki.</p>
</div>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Open Foris Geospatial Toolkit is released under GNU GPLv3 license.</p>
</div>
<div class="section" id="get-info">
<h3>Get Info<a class="headerlink" href="#get-info" title="Permalink to this headline">¶</a></h3>
<p>You can check the current version info with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo oft−info . bash</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ofgt-tools-documentation">
<h2>OFGT - Tools documentation<a class="headerlink" href="#ofgt-tools-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general-tools">
<h3>GENERAL TOOLS<a class="headerlink" href="#general-tools" title="Permalink to this headline">¶</a></h3>
<div class="section" id="csvtopolygon-py">
<h4>CsvToPolygon.py<a class="headerlink" href="#csvtopolygon-py" title="Permalink to this headline">¶</a></h4>
<div class="section" id="name">
<h5>NAME<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h5>
<p>CsvToPolygon.py - converts CSV file from GExml2csv.bash into a shapefile</p>
</div>
<div class="section" id="synopsis">
<h5>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">CsvToPolygon.py CsvToPolygon.py &lt;input.csv&gt;&lt;output.shp&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h5>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h5>
<p>CsvToPolygon.py is written in Python and creates shapefile polygons from a text file.</p>
<p>The program is modified form the one by Chris Garrard: <a class="reference external" href="http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_hw2a.py">http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_hw2a.py</a></p>
<p>The input is a text file of the following format:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">Polygon</span> <span class="pre">id</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">land</span> <span class="pre">cover</span> <span class="pre">class</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">land</span> <span class="pre">cover</span> <span class="pre">subclass</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">tree</span> <span class="pre">cover</span> <span class="pre">class</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">resolution</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">image</span></code> in GE (Google Earth)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">year</span> <span class="pre">and</span> <span class="pre">month</span> <span class="pre">of</span> <span class="pre">image</span> <span class="pre">in</span> <span class="pre">GE</span></code></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>After the “:” mark there are corner coordinates in WGS84 system.</p>
</div>
<p>This input data can be output from another script, <code class="code docutils literal notranslate"><span class="pre">GExml2csv.bash</span></code> and originally derives from a training data collection tool created for GE.</p>
</div>
<div class="section" id="example">
<h5>EXAMPLE<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: CsvToPolygon.py Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>An example of the beginning of input data is following:</p>
<table class="table">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>106</p></td>
<td><p>OWL</p></td>
<td><p>OWL Open</p></td>
<td><p>2</p></td>
<td><p>Coarse</p></td>
<td><p>2002/1:-5.47450324983224 32.54081338469396,-5.47450324983224 32.5417154317423,-5.47540856036825 32.5417154317423,-5.47540856036825 32.54081338469396</p></td>
</tr>
<tr class="row-even"><td><p>107</p></td>
<td><p>Grassland</p></td>
<td><p>Grassland Bushed</p></td>
<td><p>1</p></td>
<td><p>Coarse</p></td>
<td><p>2002/1:-5.47456561893842 32.63108751846197,-5.47456561893842 32.63198971163985,-5.47547080384603 32.63198971163985,-5.47547080384603 32.63108751846197</p></td>
</tr>
<tr class="row-odd"><td><p>108</p></td>
<td><p>Bushland</p></td>
<td><p>Bushland Thicket</p></td>
<td><p>2</p></td>
<td><p>Medium</p></td>
<td><p>2002/10:-5.47461439045748 32.72136258245697,-5.47461439045748 32.72226491949511,-5.47551944746972 32.72226491949511,-5.47551944746972 32.72136258245697</p></td>
</tr>
</tbody>
</table>
<p>This is how you run the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python CsvToPolygon.py inputdata.csv output.shp</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="genericcsvtopolygon-py">
<h4>genericCsvToPolygon.py<a class="headerlink" href="#genericcsvtopolygon-py" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id1">
<h5>NAME<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">genericCsvToPolygon.py</span></code> - Program for creating polygons from text files</p>
</div>
<div class="section" id="id2">
<h5>SYNOPSIS<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">genericCsvToPolygon.py genericCsvToPolygon.py &lt;input.csv&gt;&lt;output.shp&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h5>DESCRIPTION<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">genericCsvToPolygon.py</span></code> is a program for creating polygons from text
files.</p>
<ul class="simple">
<li><p>The input file is a text file of the following format: <code class="code docutils literal notranslate"><span class="pre">Polygon</span> <span class="pre">id:corner</span> <span class="pre">coordinates</span> <span class="pre">in</span> <span class="pre">WGS84</span> <span class="pre">system</span></code></p></li>
<li><p>Coordinate pairs are separated from others with a space and x,y with a comma</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The program is modified form the one by Chris Garrard: <a class="reference external" href="http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_hw2a.py">http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_hw2a.py</a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>This input data is output from another script, <code class="code docutils literal notranslate"><span class="pre">genericGEkml2csv.bash</span></code> and originally comes from Google Earth (self-digitized polygon kml’s).</p>
</div>
</div>
<div class="section" id="id5">
<h5>EXAMPLE<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<p>The input file is a text file of the following format:
-   <code class="code docutils literal notranslate"><span class="pre">Polygon</span> <span class="pre">id:corner</span> <span class="pre">coordinates</span> <span class="pre">in</span> <span class="pre">WGS84</span> <span class="pre">system</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Bushland1 :38.99408253760913 , −11.04146530113384 ,0
    38.99380823486723 , −11.04205402821617 ,0
    38.99380826389991 , −11.04206992654894 ,0
    38.99382544867113 , −11.04261044223288 ,0
    38.9938254776416 , −11.04262634062336 ,0
    38.99415014990515 , −11.04300732377466 ,0
    38.9941664064954 , −11.04303909164155 ,0
    38.99466885692982 , −11.04319717791531 ,0
    38.99473365203311 , −11.04319706202726 ,0
    38.99479844656671 , −11.0431969461398 ,0
    38.99515464117336 , −11.04310091874687 ,0
    38.99518697983437 , −11.04306906417552 ,0
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>bushland2 :39.00340243948988 , −11.04234996851613 ,0
39.00296537982829 , −11.04267663255115 ,0
39.00290506714792 , −11.04270636631092 ,0
39.00271044958266 , −11.04355103802362 ,0
39.00271058813281 , −11.04362510127527 ,0
39.00308922316352 , −11.04433543402553 ,0
39.0031345553759 , −11.04436497858972 ,0
39.00316485086498 , −11.04442417551431 ,0
39.00373863444808 , −11.04457127447502 ,0
39.00378391140981 , −11.04457119324793 ,0
</pre></div>
</div>
<p>Then run the actual command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">genericCsvToPolygon.py input.csv output.shp</span>
</pre></div>
</div>
<p>The output shp is in geographic WGS84, but does not carry that information. You can transform it e.g. into UTM 36S WGS84 with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ogr2ogr −s srs EPSG:4326 −t srs EPSG:32736 proj_output.shp output.shp</span>
</pre></div>
</div>
<p>Where EPSG:4326 stands for WGS84 (source system) and EPSG:32736 for UTM 36S WGS84 (target system). You can select any target system and find the EPSG code, see <a class="reference external" href="http://spatialreference.org/ref/epsg/">http://spatialreference.org/ref/epsg/</a>.</p>
</div>
<div class="section" id="id6">
<h5>EXAMPLE<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">genericCsvToPolygon.py</span></code>, <code class="code docutils literal notranslate"><span class="pre">genericGEkml2csv.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">ogr2ogr</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ogr2ogr −s srs EPSG:4326 −t srs EPSG:32736 proj_output.shp output.shp</span>
</pre></div>
</div>
<p>This script performs conversion from a set of generic .kml format polygons created in Google Earth (GE) into one combined textfile. This textfile can then be converted into a shapefile using script <code class="code docutils literal notranslate"><span class="pre">genericCsvToPolygon.py</span></code>.</p>
<ul>
<li><p>How to create polygons in Google Earth and save them as .kml files</p></li>
<li><p>Then open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
</li>
</ul>
<p>The procedure is:</p>
<ol class="arabic">
<li><p>Put the kml’s into one folder</p></li>
<li><p>Launch <code class="code docutils literal notranslate"><span class="pre">genericGEkml2csv.bash</span></code> in that kml-folder. This creates a csv file “output.csv”</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">genericGEkml2csv.bash</span>
</pre></div>
</div>
</li>
<li><p>Launch <code class="code docutils literal notranslate"><span class="pre">genericCsvToPolygon.py</span></code> in the same folder, with parameters as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">genericCsvToPolygon.py output.csv output.shp</span>
</pre></div>
</div>
</li>
</ol>
<p>The shapefile name can be as you wish (e.g. settlements168063.shp). The shapefile is in geographic WGS84, but does not carry that information. You can transform it e.g. into UTM 36S WGS84 with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ogr2ogr −s srs EPSG:4326 −t srs EPSG:32736 proj_output.shp output.shp</span>
</pre></div>
</div>
<p>Where EPSG:4326 stands for WGS84 (source system) and EPSG:32736 for UTM 36S WGS84 (target system). You can select any target system and find the EPSG code, see <a class="reference external" href="http://spatialreference.org/ref/epsg/">http://spatialreference.org/ref/epsg/</a></p>
</div>
</div>
<div class="section" id="genericgekml2csv-bash">
<h4>genericGEkml2csv.bash<a class="headerlink" href="#genericgekml2csv-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id8">
<h5>NAME<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">genericGEkml2csv.bash</span></code> - converts separate kml files from Google Earth into one CSV file.</p>
</div>
<div class="section" id="id9">
<h5>SYNOPSIS<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">genericGEkml2csv.bash</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h5>DESCRIPTION<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">genericGEkml2csv.bash</span></code> converts separate kml files from Google Earth (GE) into one CSV file.</p>
<p>This script performs conversion from a set of generic .kml format polygons created in GE into one combined textfile.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All kml files need to be in one folder from where the script needs to be launched</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The output textfile of <code class="code docutils literal notranslate"><span class="pre">genericGEkml2csv.bash</span></code> can then be converted into a shapefile using script <code class="code docutils literal notranslate"><span class="pre">genericCsvToPolygon.py</span></code>.</p>
</div>
</div>
<div class="section" id="id11">
<h5>EXAMPLE<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
<ol class="arabic">
<li><p>Put all kml files into one folder</p></li>
<li><p>Launch <code class="code docutils literal notranslate"><span class="pre">genericGEkml2csv.bash</span></code> in that kml-folder. This creates a csv file “output.csv”</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">genericGEkml2csv.bash //no need to define input output</span>
</pre></div>
</div>
<p>Look into your working directory and see if output.csv was created. Take a closer look at its first lines:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head output.csv</span>
</pre></div>
</div>
</li>
<li><p>Conversion of output.csv into a shapefile: Launch <code class="code docutils literal notranslate"><span class="pre">genericCsvToPolygon.py</span></code> in the same folder, with parameters as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">genericCsvToPolygon.py output.csv output.shp</span>
</pre></div>
</div>
<p>The shp name can be as you wish (e.g. settlements168063.shp).</p>
</li>
<li><p>The shapefile is in geographic WGS84, but does not carry that information. You can transform it e.g. into UTM 36S WGS84 with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ogr2ogr −s srs EPSG:4326 −t srs EPSG:32736 proj_output.shp output.shp</span>
</pre></div>
</div>
<p>Where EPSG:4326 stands for WGS84 (source system) and EPSG:32736 for UTM 36S WGS84 (target system). You can select any target system and find the EPSG code, see <a class="reference external" href="http://spatialreference.org/ref/epsg/">http://spatialreference.org/ref/epsg/</a></p>
</li>
</ol>
</div>
</div>
<div class="section" id="gexml2csv-bash">
<h4>GExml2csv.bash<a class="headerlink" href="#gexml2csv-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id13">
<h5>NAME<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">GExml2csv.bash</span></code> - converts xml files from Google Earth training data collection tool into one CSV file.</p>
</div>
<div class="section" id="id14">
<h5>SYNOPSIS<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">GExml2csv.bash</span>
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h5>DESCRIPTION<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">GExml2csv.bash</span></code> converts single files originating from Google Earth (GE) training data collection tool into a combined CSV file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The script is to be launched in a directory containing the target xml’s</p>
</div>
</div>
<div class="section" id="id16">
<h5>EXAMPLE<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">GExml2csv.bash</span></code></p>
<p>Open your working directory where you stored you xml files using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Then simply run following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">GExml2csv.bash</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-addattr-py">
<h4>oft-addattr.py<a class="headerlink" href="#oft-addattr-py" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id17">
<h5>NAME<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-addattr.py</span></code> - adds one integer attribute in a shape file.</p>
</div>
<div class="section" id="id18">
<h5>SYNOPSIS<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-addattr.py &lt;shapefile&gt;&lt;JoinAttrName&gt;&lt;NewAttrName&gt;&lt;textfile&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id19">
<h5>DESCRIPTION<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-addattr.py</span></code> adds one integer attribute in a shape file. It reads a space separated text file and uses the first and second columns to construct a lookup table which is used to add a new attribute in an existing shapefile. Each time the value in the first column is found in the JoinAttributeName field of the shapefile, the value in the second column is added in the field NewAttrName. In case the corresponding value is not present in the textfile, the NewAttrName value for that record becomes -9999.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The values need to be in integer!</p>
</div>
</div>
<div class="section" id="id20">
<h5>EXAMPLE<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-addattr.py</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>The first lines of the attribute table of <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">red</span>
<span class="mi">2</span> <span class="n">green</span>
<span class="mi">3</span> <span class="n">orange</span>
<span class="mi">5</span> <span class="n">pink</span>
<span class="mi">6</span> <span class="n">red</span>
<span class="mi">7</span> <span class="n">blue</span>
<span class="mi">8</span> <span class="n">orange</span>
<span class="mi">9</span> <span class="n">green</span>
<span class="mi">10</span> <span class="n">orange</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this exercise we create a space separated text file as a lookup table. You can create it in any text editor, such as <code class="code docutils literal notranslate"><span class="pre">gedit</span></code> or <code class="code docutils literal notranslate"><span class="pre">kate</span></code> and save the file as lookup.txt in your working directory.</p>
</div>
<p>The first column contains the ID linking the lookup table to your shapefile and the second column contains the values you want to add to the new column of your shapefile.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">11</span>
<span class="mi">2</span> <span class="mi">22</span>
<span class="mi">3</span> <span class="mi">33</span> <span class="mi">4</span> <span class="mi">44</span> <span class="mi">5</span> <span class="mi">55</span> <span class="mi">6</span> <span class="mi">66</span> <span class="mi">8</span> <span class="mi">88</span>
<span class="mi">9</span> <span class="mi">99</span>
<span class="mi">10</span> <span class="mi">1000</span>
</pre></div>
</div>
<p>Now run the script in the command line.</p>
<p>Each time the value in the first column of <code class="code docutils literal notranslate"><span class="pre">lookup.txt</span></code> is found in the JoinAttributeName of the <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>, field in our case called <strong>id</strong>. The value in the second column is added in the field NewAttrName, here called <strong>newcol</strong>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−addattr . py landuse.shp id newcol lookup.txt</span>
</pre></div>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The values need to be in integer!</p>
</div>
<ul class="simple">
<li><p>Load <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> in QGIS and look at your attribute table. You should now find the new column called newcol with it values.</p></li>
<li><p>Take a look at the ID 7. The newcol value in <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> is -9999. This is due to the fact that there was no value 7 in the first column of the lookup table. In that case the corresponding value is not present in the lookup table, therefore the newcol value for that record becomes -9999.</p></li>
</ul>
<div class="figure align-default" id="id243">
<a class="reference internal image-reference" href="../_images/oft-addattr.png"><img alt="final shp attributes" src="../_images/oft-addattr.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Attribute table of <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> containing the new column called newcol with values</span><a class="headerlink" href="#id243" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="how-to-change-the-data-type-in-qgis">
<h5>How to change the data type in QGIS ?<a class="headerlink" href="#how-to-change-the-data-type-in-qgis" title="Permalink to this headline">¶</a></h5>
<p>Add plugin Table Manager:</p>
<ol class="arabic simple">
<li><p>Click on the top bar’Plugins’ -&gt;click ’Fetch Python Plugins’.</p></li>
<li><p>Type in the filter ’Manager’ -&gt;then you should find ’Table Manager - Manages the attribute table structure’.</p></li>
<li><p>Install it. Close and re-open QGIS.</p></li>
<li><p>On top bar click ’Plugin’ -&gt;click ’Manage Plugins’ -&gt;tick box for ’Table Manager’.</p></li>
<li><p>On top bar click ’Plugin’ -&gt;you should now see ’Table’ some- where under ’Manage Plugins’, click it and the option ’Table Manager’ can be chosen.</p></li>
<li><p>From there you can edit your attribute table, add a new column and choose the data type.</p></li>
</ol>
</div>
</div>
<div class="section" id="oft-addpct-py">
<h4>oft-addpct.py<a class="headerlink" href="#oft-addpct-py" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id21">
<h5>NAME<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-addpct.py</span></code> - adds pseudo color table to an image.</p>
</div>
<div class="section" id="id22">
<h5>SYNOPSIS<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-addpct.py &lt;inputfile&gt;&lt;outputfile&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id23">
<h5>DESCRIPTION<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-addpct.py</span></code> adds a pseudo color table to an image keeps the original values of the image, but ensures that classes are shown in pre-defined colors, no matter which application is used to open the image.
After defining the first line, the command will ask for the text file containing the color table:
Give LUT file name: &lt;colortable&gt;
Where:</p>
<ul class="simple">
<li><p>&lt;inputfile&gt; is an image file</p></li>
<li><p>&lt;outputfile&gt; is an image file (if it is the same as &lt;inputfile&gt;, &lt;inputfile&gt;will be overwritten)</p></li>
<li><p>&lt;colortable&gt; is a text file with 4 or 5 columns containing the color table in the following format:
-   1:sup:<cite>st</cite> column: class value
-   2:sup:<cite>nd</cite> - 4:sup:<cite>th</cite> column: RGB values
-   optional: 5:sup:<cite>th</cite> column for alpha, if not set, it is assumed to be 255</p></li>
</ul>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The &lt;colortable&gt; must NOT contain any empty lines!</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>see <a class="reference external" href="https://en.wikipedia.org/wiki/RGBA_color_model">Wikipedia</a> for more information on RGBA color space.</p>
</div>
<p>The &lt;colortable&gt; could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">103</span> <span class="mi">51</span> <span class="mi">1</span> <span class="mi">255</span>
<span class="mi">2</span> <span class="mi">254</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">255</span>
<span class="mi">3</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">254</span> <span class="mi">255</span>
<span class="mi">4</span> <span class="mi">0</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">255</span>
</pre></div>
</div>
</div>
<div class="section" id="id24">
<h5>EXAMPLE<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-addpct.py</span></code></p>
<p>Create the colortable for the file <code class="code docutils literal notranslate"><span class="pre">images/forestc.tif</span></code>. If you do not know which classes are present in <code class="code docutils literal notranslate"><span class="pre">images/forestc.tif</span></code>, you could use <code class="code docutils literal notranslate"><span class="pre">oft-stat</span></code> with i:code:<cite>mages/forestc.tif</cite> both as input and mask file. The first column of the mask file shows all present classes (besides 0). Create a text file called <code class="code docutils literal notranslate"><span class="pre">txt/coltable.txt</span></code>, with the first column indicating all possible classes. It could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="mi">44</span> <span class="mi">122</span> <span class="mi">122</span> <span class="mi">0</span> <span class="mi">255</span>
<span class="mi">33</span> <span class="mi">103</span> <span class="mi">51</span> <span class="mi">1</span> <span class="mi">255</span>
<span class="mi">55</span> <span class="mi">4</span> <span class="mi">253</span> <span class="mi">255</span> <span class="mi">255</span>
<span class="mi">22</span> <span class="mi">122</span> <span class="mi">0</span> <span class="mi">122</span> <span class="mi">255</span>
<span class="mi">11</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">255</span>
<span class="mi">4</span> <span class="mi">122</span> <span class="mi">122</span> <span class="mi">122</span> <span class="mi">255</span>
<span class="mi">3</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">255</span>
<span class="mi">2</span> <span class="mi">200</span> <span class="mi">200</span> <span class="mi">200</span> <span class="mi">255</span>
<span class="mi">6</span> <span class="mi">0</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">255</span>
</pre></div>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Make sure that the text file does not contain any empty lines.</p>
</div>
<p>Run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−addpct.py images/forestc.tif results/forestcolor.tif</span>
</pre></div>
</div>
<p>The command will ask you about the colortable file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Give LUT file name</span>
</pre></div>
</div>
<p>Enter the path to your color table file and hit enter:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">txt/coltable . txt</span>
</pre></div>
</div>
<p>You can visualize the result in QGIS:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qgis results/forestcolor.tif</span>
</pre></div>
</div>
<div class="figure align-default" id="id244">
<a class="reference internal image-reference" href="../_images/oft-addpct.png"><img alt="color added to an image" src="../_images/oft-addpct.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Example of using <code class="code docutils literal notranslate"><span class="pre">oft-addpct.py</span></code> to define the colour table.</span><a class="headerlink" href="#id244" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-admin-mask-bash">
<h4>oft-admin-mask.bash<a class="headerlink" href="#oft-admin-mask-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id25">
<h5>NAME<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h5>
<p>oft-admin-mask.bash - this script prepares a mask of administrative areas within a satellite image.</p>
</div>
<div class="section" id="id26">
<h5>SYNOPSIS<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-admin-mask.bash &lt;mask for Landsat image&gt;&lt;administrative area image&gt;[ID of wanted administrative area]</span>
</pre></div>
</div>
</div>
<div class="section" id="id27">
<h5>DESCRIPTION<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>If no ID is given the script just clips and re-projects (if needed) the admin image to match the Landsat image mask</p></li>
<li><p>If an ID is given, the admin area with this ID is added to the base mask and other areas are set to 0</p></li>
<li><p>The input administrative image does not need to be of the same size and projection (script utilizes <code class="code docutils literal notranslate"><span class="pre">oft-clip.pl</span></code> for clipping and re- projecting)</p></li>
</ul>
</div>
<div class="section" id="id28">
<h5>EXAMPLE<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-admin-mask.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-shptif.bash</span></code>.</p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>In a first step we need to prepare an image with administrative areas using <code class="code docutils literal notranslate"><span class="pre">oft-shptif.bash</span></code>. For exercise purpose we simply use <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> as an input for hypothetical admin areas.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−shptif.bash landuse.shp landsat_t1.tif landuse_raster.tif landuse</span>
</pre></div>
</div>
<p>Let’s run <code class="code docutils literal notranslate"><span class="pre">oft-admin-mask.bash</span></code> now using <code class="code docutils literal notranslate"><span class="pre">landuse_raster.tif</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output is automatically called <code class="code docutils literal notranslate"><span class="pre">landsat_t1_adm.tif</span></code>.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−admin−mask.bash landsat_t1.tif landuse_raster.tif</span>
</pre></div>
</div>
<p>Verify in QGIS using a contrast enhancement if the pixel values of <code class="code docutils literal notranslate"><span class="pre">landsat_t1_adm.tif</span></code> are correctly processed.</p>
</div>
</div>
<div class="section" id="oft-bb">
<h4>oft-bb<a class="headerlink" href="#oft-bb" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id29">
<h5>NAME<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-bb</span></code> - is a a bounding box calculator t.</p>
</div>
<div class="section" id="id30">
<h5>SYNOPSIS<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-bb [-um maskfile] &lt;inputfile&gt;&lt;value&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id31">
<h5>DESCRIPTION<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-bb</span></code> studies every pixel of the input file and reports minimum and maximum pixels coordinates of pixels having the given value. The minimum coordinates are 1,1.</p>
<ul class="simple">
<li><p>&lt;inputfile&gt; is an image file</p></li>
<li><p>&lt;value&gt; is the value you want to query</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-um</span></code> use mask file. It will consider only pixels which have mask value &gt; 0</p></li>
</ul>
</div>
<div class="section" id="id32">
<h5>EXAMPLE<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-bb</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal_translate</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Find the bounding box of the Forest tree cover file <code class="code docutils literal notranslate"><span class="pre">forestc.tif</span></code> with value “33”</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−bb images/forestc.tif 33</span>
</pre></div>
</div>
<p>It should provide the following result :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Band</span> <span class="mi">1</span> <span class="n">BB</span> <span class="p">(</span><span class="n">xmin</span> <span class="p">,</span><span class="n">ymin</span> <span class="p">,</span><span class="n">xmax</span><span class="p">,</span><span class="n">ymax</span><span class="p">)</span> <span class="ow">is</span> <span class="mi">1408</span> <span class="mi">1740</span> <span class="mi">1713</span> <span class="mi">1964</span>
</pre></div>
</div>
<p>You can visualize the result by sub-setting the image to these extents using <code class="code docutils literal notranslate"><span class="pre">gdal_translate</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal_translate -srcwin 1408 1740 305 224 images/forestc.tif results/bb_33. tif</span>
</pre></div>
</div>
<p>The parameters for the size of the box are calculated as <code class="code docutils literal notranslate"><span class="pre">xmax-xmin</span></code> and <code class="code docutils literal notranslate"><span class="pre">ymax-ymin</span></code>.</p>
<p>Visualize the results in QGIS:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qgis images/forestc.tif results/bb_33.tif</span>
</pre></div>
</div>
<div class="figure align-default" id="id245">
<a class="reference internal image-reference" href="../_images/oft-bb.png"><img alt="bounding box for 33 value" src="../_images/oft-bb.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Example of using oft-bb output bb 33.tif.</span><a class="headerlink" href="#id245" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-classvalues-compare-bash">
<h4>oft-classvalues-compare.bash<a class="headerlink" href="#oft-classvalues-compare-bash" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To be tested</p>
</div>
<div class="section" id="id33">
<h5>NAME<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-classvalues-compare.bash</span></code> - creates comparison plots of classes based on result of previous script oft-classvalues-plot.bash.</p>
</div>
<div class="section" id="id34">
<h5>SYNOPSIS<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-classvalues-compare.bash &lt;class1&gt;&lt;class2&gt; oft-classvalues-compare.bash &lt;class1&gt;&lt;class2&gt;[class3] [class4] [class5]</span>
</pre></div>
</div>
</div>
<div class="section" id="id35">
<h5>DESCRIPTION<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-classvalues-compare.bash</span></code> This script is meant to be used after script <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code>. It plots 2-5 classes in the same figure and the distinction of class-wise point clouds can be evaluated.</p>
<p>It is launched in the folder containing class-wise plots and text files produced by the above mentioned script.</p>
</div>
<div class="section" id="option">
<h5>OPTION<a class="headerlink" href="#option" title="Permalink to this headline">¶</a></h5>
<p>Additional classes that can be plotted in the same figure:</p>
<ul class="simple">
<li><p>[class3]</p></li>
<li><p>[class4]</p></li>
<li><p>[class5]</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Look at <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code>, which computes input data for this tool</p>
</div>
</div>
<div class="section" id="id36">
<h5>EXAMPLE<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code> - Input data deriving from exercise <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code></p>
<p>Change your working directory to the one of the previous exercise <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code>:
.. code-block:: console</p>
<blockquote>
<div><p>cd ~</p>
</div></blockquote>
<p>Use <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-compare</span></code> to create a comparison plot of <strong>band2</strong> and <strong>band3</strong>.
Output to be found in folder <code class="code docutils literal notranslate"><span class="pre">plots_LT52_CUB00.tif_bands_3_4</span></code> created after running <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−classvalues −compare . bash 1 3</span>
</pre></div>
</div>
<div class="figure align-default" id="id246">
<a class="reference internal image-reference" href="../_images/compare_1_3.png"><img alt="../_images/compare_1_3.png" src="../_images/compare_1_3.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Comparaison bewteen band 1 and 3</span><a class="headerlink" href="#id246" title="Permalink to this image">¶</a></p>
</div>
<p>Now compare <strong>band1</strong>, <strong>band2</strong> and <strong>band3</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−classvalues −compare . bash 1 2 3</span>
</pre></div>
</div>
<div class="figure align-default" id="id247">
<a class="reference internal image-reference" href="../_images/compare_1_2_3.png"><img alt="../_images/compare_1_2_3.png" src="../_images/compare_1_2_3.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Comparaison bewteen band 1 to 3</span><a class="headerlink" href="#id247" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-classvalues-plot-bash">
<h4>oft-classvalues-plot.bash<a class="headerlink" href="#oft-classvalues-plot-bash" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To be tested</p>
</div>
<div class="section" id="id37">
<h5>NAME<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code> - creates scatterplots of pixels within training classes (given in a shapefile).</p>
</div>
<div class="section" id="id38">
<h5>SYNOPSIS<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-classvalues-plot.bash &lt;input image&gt;&lt;shapefile basename&gt; &lt;shapefile class field name&gt;&lt;image band for x-axis&gt;&lt;image band for y-axis&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id39">
<h5>DESCRIPTION<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code> creates scatterplots of image grey values in different classes of training data. Also figures of class means and standard deviations are provided.</p>
<ul class="simple">
<li><p>Training areas need to be in shapefiles.</p></li>
<li><p>The figures of class means and std’s for both required bands are created in the launching folder (.png format).</p></li>
<li><p>It also puts the class means and standard deviations into text files.</p></li>
<li><p>Pixel-by-pixel values are stored in a separate text file.</p></li>
<li><p>The pixel plots are created in a folder named <code class="code docutils literal notranslate"><span class="pre">plots_imagename_band1_band2</span></code>.</p></li>
</ul>
<p>They are for all classes, .png image files. And same as text files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure that you have installed GNUPLOT.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>A further script <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-compare.bash</span></code> can then be used to compare up to 5 classes in one view.</p>
</div>
</div>
<div class="section" id="id40">
<h5>EXAMPLE<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code>
Input data: download for this exercise the Landsat imagery Landsat <code class="code docutils literal notranslate"><span class="pre">t1.tif</span></code> and the shapefile: <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Run <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-plot.bash</span></code> with input: satellite image ∥ shapefile ∥ Attribute column for ID in this case <strong>name</strong> | <strong>band3</strong> | <strong>band4</strong>; Input image: <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>, input shapefile: <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the output is automatically processed.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−classvalues−plot.bash landsat_t1.tif landuse name 3 4</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<ol class="arabic">
<li><p><code class="code docutils literal notranslate"><span class="pre">pixelvalueslandsat_t1.tif_bands_3_4.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head pixelvalueslandsat_t1.tif_bands_3_4.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Pixel ID</p></th>
<th class="head"><p>X</p></th>
<th class="head"><p>Y</p></th>
<th class="head"><p>class (from attribute name)</p></th>
<th class="head"><p>Pixelvalue_Bandnr3</p></th>
<th class="head"><p>Pixelvalue_Bandnr4</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1.00</p></td>
<td><p>771870.00</p></td>
<td><p>−2402010.00</p></td>
<td><p>6.00</p></td>
<td><p>22.00</p></td>
<td><p>47.00</p></td>
</tr>
<tr class="row-odd"><td><p>2.00</p></td>
<td><p>771900.00</p></td>
<td><p>−2402010.00</p></td>
<td><p>6.00</p></td>
<td><p>22.00</p></td>
<td><p>53.00</p></td>
</tr>
<tr class="row-even"><td><p>3.00</p></td>
<td><p>771930.00</p></td>
<td><p>−2402010.00</p></td>
<td><p>6.00</p></td>
<td><p>23.00</p></td>
<td><p>55.00</p></td>
</tr>
<tr class="row-odd"><td><p>4.00</p></td>
<td><p>771960.00</p></td>
<td><p>−2402010.00</p></td>
<td><p>6.00</p></td>
<td><p>22.00</p></td>
<td><p>55.00</p></td>
</tr>
<tr class="row-even"><td><p>5.00</p></td>
<td><p>771990.00</p></td>
<td><p>−2402010.00</p></td>
<td><p>6.00</p></td>
<td><p>21.00</p></td>
<td><p>53.00</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">classvalues_landsat_t1.tif_band_3.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head classvalues_landsat_t1.tif_band_3_._txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Classvalue</p></th>
<th class="head"><p>Bandnr3</p></th>
<th class="head"><p>std</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7</p></td>
<td><p>27.224344</p></td>
<td><p>2.480986</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>28.945946</p></td>
<td><p>1.679205</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>28.140811</p></td>
<td><p>2.322499</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>29.036641</p></td>
<td><p>2.258223</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>27.879464</p></td>
<td><p>1.288049</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>27.423695</p></td>
<td><p>1.199933</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">classvalues_landsat_t1.tif_band_4.txt</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head classvalues_landsat_t1.tif_band_3.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Classvalue</p></th>
<th class="head"><p>Bandnr4</p></th>
<th class="head"><p>std</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7</p></td>
<td><p>48.176611</p></td>
<td><p>2.622561</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>45.385749</p></td>
<td><p>1.525189</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>49.842482</p></td>
<td><p>2.397968</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>52.786260</p></td>
<td><p>3.513642</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>49.943452</p></td>
<td><p>2.232350</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>48.779116</p></td>
<td><p>1.172885</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Folder plots <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> bands 3 4 contains the classes to be used for <code class="code docutils literal notranslate"><span class="pre">oft-classvalues-compare.bash</span></code>.</p></li>
</ol>
</div>
</div>
<div class="section" id="oft-combine-masks-bash">
<h4>oft-combine-masks.bash<a class="headerlink" href="#oft-combine-masks-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id41">
<h5>NAME<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h5>
<p>oft-combine-masks.bash - combines several masks (raster and shape- files) to one mask file</p>
</div>
<div class="section" id="id42">
<h5>SYNOPSIS<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-combine-masks.bash &lt;input1&gt;&lt;input2&gt;.... &lt;nodata&gt; oft-combine-masks.bash &lt;input1&gt;&lt;input2&gt;.... &lt;nodata&gt;[EPSG code]</span>
</pre></div>
</div>
</div>
<div class="section" id="id43">
<h5>DESCRIPTION<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-combine-masks.bash</span></code> is a UNIX bash script that allows the user to use both mask images and mask shapefiles as input and the script combines them into one mask file.</p>
<ul class="simple">
<li><p>The first inputfile is the base and it must be an image not shapefile - The following input files will be written on only if there is nodata (user-defined value)</p></li>
<li><p>The extent is defined by the first input image</p></li>
<li><p>If the projection is not given by the user, all files are assumed to be in same projection</p></li>
<li><p>Concerning the shapefiles, the last field is assumed to be the one containing the mask values</p></li>
<li><p>At least 2 files and nodata value are needed</p></li>
</ul>
</div>
<div class="section" id="id44">
<h5>OPTION<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h5>
<p>The projection can be defined by the user using the [EPSG code] option.</p>
</div>
<div class="section" id="id45">
<h5>EXAMPLE<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-combine-masks.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-calc</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal_rasterize</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p><strong>STEP 1: CREATE MASKS</strong></p>
<p>To run <code class="code docutils literal notranslate"><span class="pre">oft-combine-masks.bash</span></code> we need to create some mask files. To do so, we burn the attribute values of the column mask from the shapefile <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> into the raster <code class="code docutils literal notranslate"><span class="pre">forestc.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal rasterize −b 1 −a mask −l landuse landuse.shp forestc.tif forest.tif</span>
</pre></div>
</div>
<p>Verify in QGIS if your pixel values of <code class="code docutils literal notranslate"><span class="pre">forestc.tif</span></code> match the polygon values of <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>if the raster output is black, click on it’s Properties -&gt; Style -&gt; Color Map and chose Pseudo Color</p>
</div>
<div class="figure align-default" id="id248">
<img alt="../_images/oft-combine-mask_create_mask.png" src="../_images/oft-combine-mask_create_mask.png" />
<p class="caption"><span class="caption-text">Left: Attribute table of <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>. Right: Zoom of output raster <code class="code docutils literal notranslate"><span class="pre">forestc.tif</span></code> in QGIS using the colourmap <strong>Pseudocolour</strong>.</span><a class="headerlink" href="#id248" title="Permalink to this image">¶</a></p>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">Forestc.tif</span></code> is the base raster to create some masks files by extracting those pixels that contain values which were previously in the shapefile and then burned into the raster:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−calc forestc.tif mask1.tif</span>
<span class="go">1</span>
<span class="gp">#</span><span class="m">1</span> <span class="nv">55</span> <span class="o">=</span> <span class="m">0</span> <span class="m">1</span> ? //If the pixel values is <span class="m">55</span> in forestc.tif , <span class="k">then</span> give it in mask1.tif the value <span class="m">1</span>, otherwise <span class="m">0</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−calc forestc.tif mask2.tif</span>
<span class="go">1</span>
<span class="gp">#</span><span class="m">1</span> <span class="nv">11</span> <span class="o">=</span> <span class="m">0</span> <span class="m">2</span> ? //If the pixel values is <span class="m">11</span> in forestc.tif , <span class="k">then</span> give it in mask2.tif the value <span class="m">2</span>, otherwise <span class="m">0</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−calc forestc.tif mask3.tif</span>
<span class="go">1</span>
<span class="gp">#</span><span class="m">1</span> <span class="nv">33</span> <span class="o">=</span> <span class="m">0</span> <span class="m">3</span> ? //If the pixel values is <span class="m">33</span> in forestc.tif , <span class="k">then</span> give it in mask3.tif the value <span class="m">3</span>, otherwise <span class="m">0</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−calc forestc.tif mask4.tif</span>
<span class="go">1</span>
<span class="gp">#</span><span class="m">1</span> <span class="nv">44</span> <span class="o">=</span> <span class="m">0</span> <span class="m">4</span> ? //If the pixel values is <span class="m">44</span> in forestc.tif , <span class="k">then</span> give it in mask4.tif the value <span class="m">4</span>, otherwise <span class="m">0</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−calc forestc.tif mask5.tif</span>
<span class="go">1</span>
<span class="gp">#</span><span class="m">1</span> <span class="nv">22</span> <span class="o">=</span> <span class="m">0</span> <span class="m">5</span> ? //If the pixel values is <span class="m">22</span> in forestc.tif , <span class="k">then</span> give it in mask5.tif the value <span class="m">5</span>, otherwise <span class="m">0</span>
</pre></div>
</div>
<p>Again, check in QGIS if the masks contain the extracted value for the same location of the corresponding polygon in <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>.</p>
<p>In the final step we run the command <code class="code docutils literal notranslate"><span class="pre">oft-combine-masks.bash</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Output file is automatically processed called combined-mask.img</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−combine−masks.bash mask1.tif mask2.tif mask3.tif mask4.tif mask5.tif 0</span>
</pre></div>
</div>
<p><strong>STEP 2: COMBINE MASKS USING RASTER AND SHAPE-FILE</strong></p>
<p>Run <code class="code docutils literal notranslate"><span class="pre">oft-combine-masks.bash</span></code>: Input: <code class="code docutils literal notranslate"><span class="pre">mask1.tif</span></code>, <code class="code docutils literal notranslate"><span class="pre">mask2.tif</span></code>, <code class="code docutils literal notranslate"><span class="pre">mask3.tif</span></code>, <code class="code docutils literal notranslate"><span class="pre">mask4.tif</span></code>, <code class="code docutils literal notranslate"><span class="pre">mask5.tif</span></code> and the additional shapefile <code class="code docutils literal notranslate"><span class="pre">clouds.shp</span></code> In the shapefile the values of the last column are picked up for processing; output is automatically processed: combined-masks.img</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>copy your combined-mask.img output from the first exercise as it will be overwritten running <code class="code docutils literal notranslate"><span class="pre">oft-combine-masks.bash</span></code> again.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">combine_masks.bash mask1. tif mask2. tif mask3. tif mask4. tif mask5 .tif clouds.shp 0 //the 0 defines nodata values to be 0</span>
</pre></div>
</div>
<p>Verify in QGIS if <code class="code docutils literal notranslate"><span class="pre">combined-masks.img</span></code> contains all mask values, and if the additional polygon of <code class="code docutils literal notranslate"><span class="pre">clouds.shp</span></code> has the values 99 (look into attribute table of clouds.shp under the last column).</p>
<div class="figure align-default" id="id249">
<a class="reference internal image-reference" href="../_images/oft-combine-mask_combined.png"><img alt="../_images/oft-combine-mask_combined.png" src="../_images/oft-combine-mask_combined.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Combined masks including the larger polygon from clouds.shp.</span><a class="headerlink" href="#id249" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-compare-overlap-bash">
<h4>oft-compare-overlap.bash<a class="headerlink" href="#oft-compare-overlap-bash" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To be tested</p>
</div>
<div class="section" id="id46">
<h5>NAME<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h5>
<p>oft-compare-overlap.bash - This script compares overlapping areas of 2 images and produces between-band correlations.</p>
</div>
<div class="section" id="id47">
<h5>SYNOPSIS<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-compare-overlap.bash &lt;image1.img&gt;&lt;image2.img&gt;&lt;mask1.img&gt; &lt;mask2.img&gt;&lt;grid spacing&gt;[EPSG:img1]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Give the spacing in meters (1000 = 1 km)</p></li>
<li><p>Give the last parameter in format EPSG:32637 (replace number with your own, this is for UTM 37 N)</p></li>
</ul>
</div>
<div class="section" id="id48">
<h5>DESCRIPTION<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Meant for evaluation of the brdf correction of 2 images, but other imagery can be compared as well</p></li>
<li><p>The second image is projected to the same projection as the first, if the projections differ</p></li>
<li><p>In that case, user gives the projection of first image ad EPGS code. And both images need to have a projection defined (although it differs)</p></li>
<li><p>Similar number of bands must exist</p></li>
<li><p>Masks must be given for both images to exclude cloud/shadow areas</p></li>
<li><p>They must be of same size and in same projection as their corresponding images</p></li>
<li><p>Only areas where mask has value 2 are used in comparison (you may give a mask full of 2 if needed)</p></li>
<li><p>User gives the spacing of the sampling points as well</p></li>
</ul>
</div>
<div class="section" id="id49">
<h5>EXAMPLE<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-compare-overlap.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-calc</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal_translate</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-trim-mask.bash</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Convert <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> into 6 bands as both need to have same number of bands.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal translate landsat_t1.tif landsat_t1_6bands.tif −b 1 −b 2 − b 3 −b 4 −b 5 −b 6</span>
</pre></div>
</div>
<p>Create mask for <code class="code docutils literal notranslate"><span class="pre">landsat_t1_6bands.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−trim−mask.bash landsat_t1_6bands.tif</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the mask value to be used is 2, so conversion of mask from value 1 to 2: input:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−calc landsat_t1_6bands_mask.tif mask1.tif</span>
<span class="go">1</span>
<span class="gp">#</span><span class="m">1</span> <span class="nv">1</span> <span class="o">=</span> <span class="m">0</span> <span class="m">2</span> ?
</pre></div>
</div>
</div>
<p>Create mask for <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−trim−mask.bash landsat_t2.tif</span>
</pre></div>
</div>
<p>Convert mask value to 2:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-calc landsat_t2_mask.tif mask2.tif</span>
<span class="go">1</span>
<span class="gp">#</span><span class="m">1</span> <span class="nv">1</span> <span class="o">=</span> <span class="m">0</span> <span class="m">2</span> ?
</pre></div>
</div>
<p>Run <code class="code docutils literal notranslate"><span class="pre">oft-compare-overlap.bash</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-compare-overlap.bash landsat_t1_6bands.tif landsat_t2.tif mask1.tif mask2.tif 1000</span>
</pre></div>
</div>
<p>Print the result on screen:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head img12mas12_sed.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>329.00</p></td>
<td><p>732285.00</p></td>
<td><p>−2447885.00</p></td>
<td><p>100.00</p></td>
<td><p>3166.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3166.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3166.00</p></td>
<td><p>53.00</p></td>
<td><p>25.00</p></td>
<td><p>27.00</p></td>
<td><p>48.00</p></td>
<td><p>71.00</p></td>
<td><p>131.00</p></td>
<td><p>53.00</p></td>
<td><p>25.00</p></td>
<td><p>27.00</p></td>
<td><p>48.00</p></td>
<td><p>71.00</p></td>
<td><p>131.00</p></td>
<td><p>100.00</p></td>
<td><p>3166.00</p></td>
<td><p>66.00</p></td>
<td><p>60.00</p></td>
<td><p>66.00</p></td>
<td><p>88.00</p></td>
<td><p>98.00</p></td>
<td><p>69.00</p></td>
<td><p>66.00</p></td>
<td><p>60.00</p></td>
<td><p>66.00</p></td>
<td><p>88.00</p></td>
<td><p>98.00</p></td>
<td><p>69.00</p></td>
</tr>
<tr class="row-even"><td><p>330.00</p></td>
<td><p>732285.00</p></td>
<td><p>−2446885.00</p></td>
<td><p>100.00</p></td>
<td><p>3133.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3133.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3133.00</p></td>
<td><p>54.00</p></td>
<td><p>25.00</p></td>
<td><p>27.00</p></td>
<td><p>48.00</p></td>
<td><p>71.00</p></td>
<td><p>128.00</p></td>
<td><p>54.00</p></td>
<td><p>25.00</p></td>
<td><p>27.00</p></td>
<td><p>48.00</p></td>
<td><p>71.00</p></td>
<td><p>128.00</p></td>
<td><p>100.00</p></td>
<td><p>3133.00</p></td>
<td><p>61.00</p></td>
<td><p>53.00</p></td>
<td><p>51.00</p></td>
<td><p>100.00</p></td>
<td><p>77.00</p></td>
<td><p>49.00</p></td>
<td><p>61.00</p></td>
<td><p>53.00</p></td>
<td><p>51.00</p></td>
<td><p>100.00</p></td>
<td><p>77.00</p></td>
<td><p>49.00</p></td>
</tr>
<tr class="row-odd"><td><p>331.00</p></td>
<td><p>732285.00</p></td>
<td><p>−2445885.00</p></td>
<td><p>100.00</p></td>
<td><p>3100.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3100.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3100.00</p></td>
<td><p>56.00</p></td>
<td><p>25.00</p></td>
<td><p>29.00</p></td>
<td><p>53.00</p></td>
<td><p>73.00</p></td>
<td><p>128.00</p></td>
<td><p>56.00</p></td>
<td><p>25.00</p></td>
<td><p>29.00</p></td>
<td><p>53.00</p></td>
<td><p>73.00</p></td>
<td><p>128.00</p></td>
<td><p>100.00</p></td>
<td><p>3100.00</p></td>
<td><p>67.00</p></td>
<td><p>61.00</p></td>
<td><p>66.00</p></td>
<td><p>95.00</p></td>
<td><p>89.00</p></td>
<td><p>65.00</p></td>
<td><p>67.00</p></td>
<td><p>61.00</p></td>
<td><p>66.00</p></td>
<td><p>95.00</p></td>
<td><p>89.00</p></td>
<td><p>65.00</p></td>
</tr>
<tr class="row-even"><td><p>332.00</p></td>
<td><p>732285.00</p></td>
<td><p>−2444885.00</p></td>
<td><p>100.00</p></td>
<td><p>3066.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3066.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3066.00</p></td>
<td><p>46.00</p></td>
<td><p>19.00</p></td>
<td><p>17.00</p></td>
<td><p>40.00</p></td>
<td><p>41.00</p></td>
<td><p>124.00</p></td>
<td><p>46.00</p></td>
<td><p>19.00</p></td>
<td><p>17.00</p></td>
<td><p>40.00</p></td>
<td><p>41.00</p></td>
<td><p>124.00</p></td>
<td><p>100.00</p></td>
<td><p>3066.00</p></td>
<td><p>55.00</p></td>
<td><p>44.00</p></td>
<td><p>36.00</p></td>
<td><p>80.00</p></td>
<td><p>53.00</p></td>
<td><p>25.00</p></td>
<td><p>55.00</p></td>
<td><p>44.00</p></td>
<td><p>36.00</p></td>
<td><p>80.00</p></td>
<td><p>53.00</p></td>
<td><p>25.00</p></td>
</tr>
<tr class="row-odd"><td><p>333.00</p></td>
<td><p>732285.00</p></td>
<td><p>−2443885.00</p></td>
<td><p>100.00</p></td>
<td><p>3033.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3033.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3033.00</p></td>
<td><p>46.00</p></td>
<td><p>20.00</p></td>
<td><p>18.00</p></td>
<td><p>39.00</p></td>
<td><p>45.00</p></td>
<td><p>124.00</p></td>
<td><p>46.00</p></td>
<td><p>20.00</p></td>
<td><p>18.00</p></td>
<td><p>39.00</p></td>
<td><p>45.00</p></td>
<td><p>124.00</p></td>
<td><p>100.00</p></td>
<td><p>3033.00</p></td>
<td><p>56.00</p></td>
<td><p>43.00</p></td>
<td><p>35.00</p></td>
<td><p>81.00</p></td>
<td><p>56.00</p></td>
<td><p>26.00</p></td>
<td><p>56.00</p></td>
<td><p>43.00</p></td>
<td><p>35.00</p></td>
<td><p>81.00</p></td>
<td><p>56.00</p></td>
<td><p>26.00</p></td>
</tr>
<tr class="row-even"><td><p>334.00</p></td>
<td><p>732285.00</p></td>
<td><p>−2442885.00</p></td>
<td><p>100.00</p></td>
<td><p>3000.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3000.00</p></td>
<td><p>2.00</p></td>
<td><p>2.00</p></td>
<td><p>100.00</p></td>
<td><p>3000.00</p></td>
<td><p>48.00</p></td>
<td><p>20.00</p></td>
<td><p>18.00</p></td>
<td><p>36.00</p></td>
<td><p>42.00</p></td>
<td><p>125.00</p></td>
<td><p>48.00</p></td>
<td><p>20.00</p></td>
<td><p>18.00</p></td>
<td><p>36.00</p></td>
<td><p>42.00</p></td>
<td><p>125.00</p></td>
<td><p>100.00</p></td>
<td><p>3000.00</p></td>
<td><p>55.00</p></td>
<td><p>43.00</p></td>
<td><p>35.00</p></td>
<td><p>77.00</p></td>
<td><p>54.00</p></td>
<td><p>27.00</p></td>
<td><p>55.00</p></td>
<td><p>43.00</p></td>
<td><p>35.00</p></td>
<td><p>77.00</p></td>
<td><p>54.00</p></td>
<td><p>27.00</p></td>
</tr>
</tbody>
</table>
<div class="figure align-default" id="id250">
<a class="reference internal image-reference" href="../_images/oft-compare-overlap.png"><img alt="../_images/oft-compare-overlap.png" src="../_images/oft-compare-overlap.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Output of oft-compare-overlap.bash visualized in QGIS.</span><a class="headerlink" href="#id250" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-crop-bash">
<h4>oft-crop.bash<a class="headerlink" href="#oft-crop-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id50">
<h5>NAME<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h5>
<p>oft-crop.bash - crops a raster image to the extent of a certain pixel value.</p>
</div>
<div class="section" id="id51">
<h5>SYNOPSIS<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-crop.bash &lt;input-img&gt;&lt;output-img&gt;[ value / -all ] [ nodata- value ]</span>
</pre></div>
</div>
</div>
<div class="section" id="id52">
<h5>OPTION<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>[ value / -all ]: [value] = is the value of the inputfile it should be cropped to -all = if image should be cropped to every unique pixel value; output will be named accordingly</p></li>
<li><p>[nodata-value]: for this value no cropping will be done; if not provided, it is assumed to be 0 (only applicable for option -all)</p></li>
</ul>
</div>
<div class="section" id="id53">
<h5>DESCRIPTION<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">oft-crop.bash</span></code> crops a raster image to the extent of a certain pixel value. This can be useful when, for example, one wants to produce a separate raster image for every district of a country.</p></li>
<li><p>Input image is a raster image with unique pixel values for each region of interest.</p></li>
<li><p>In the output image, the value for the region of interest is kept. All other pixels are set to 0.</p></li>
<li><p>The user can choose to either:</p>
<ul>
<li><p>do the cropping for one single pixel value</p></li>
<li><p>do the cropping for all occurring pixel values besides the nodata- value. The nodata-value can be specified with the [nodata] option. If not specified, it is assumed to be 0. In this case, output files will carry the value they have been cropped to in their name.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id54">
<h5>EXAMPLE<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-crop.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal_rasterize</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>You will need for this exercise the file <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>, digitized manually with QGIS. Then Create a raster file that has the landuse class attribute of the <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal rasterize −a newcol −l landuse −tr 30 30 shapefiles/landuse.shp results/landuse.tif</span>
</pre></div>
</div>
<p>Extract one particular class (in that case the zone that has the label 2000):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−crop.bash results/landuse.tif results/lu class.tif 2000</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-cuttile-pl">
<h4>oft-cuttile.pl<a class="headerlink" href="#oft-cuttile-pl" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id55">
<h5>NAME<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-cuttile.pl</span></code> - Cuts image tiles on the basis of a given list of locations.</p>
</div>
<div class="section" id="id56">
<h5>SYNOPSIS<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-cuttile.pl &lt;coord list&gt;&lt;CRS file&gt;&lt;input dir&gt;&lt;output basename&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h5>OPTIONS<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>&lt;coord list&gt; is a text file containing the coordinates of the center of the tiles. It must arranged as <code class="code docutils literal notranslate"><span class="pre">id</span></code>, <code class="code docutils literal notranslate"><span class="pre">x`and</span> <span class="pre">:code:`y</span></code></p></li>
<li><p>&lt;CRS file&gt; is a text file containing the projection definitions of the dataset in <strong>PROJ4</strong> format.</p></li>
<li><p>&lt;input dir&gt; is the directory containing the image. Image must be in geotiff format, extension must be <strong>.TIF</strong> with <strong>capitals</strong>.</p></li>
<li><p>&lt;output basename&gt;is the base name of the tiles that will be generated</p></li>
</ul>
</div>
<div class="section" id="id57">
<h5>DESCRIPTION<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-cuttile.pl</span></code> cuts image tiles on the basis of a given list of locations.</p>
<ol class="arabic simple">
<li><p>Converts the point locations into the projection of the image</p></li>
<li><p>Cuts a set of 20 km x 20 km tiles around the locations</p></li>
<li><p>Converts the tiles to the coordinate system of the points (20 km x 20 km)</p></li>
</ol>
</div>
<div class="section" id="id58">
<h5>EXAMPLE<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-cuttile.pl</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal_translate</span></code>, <code class="code docutils literal notranslate"><span class="pre">cs2cs</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>First, we need to convert the imagery into <strong>.TIF</strong> format. You can use the <code class="code docutils literal notranslate"><span class="pre">gdal_translate</span></code> function to convert your input imagery from any GDAL supported format to TIF using the option [-of GTiff]</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal translate −of GTiff images/landsat_t1.tif results/landsat_t1.TIF</span>
</pre></div>
</div>
</li>
<li><p>In the next step we take a closer look at our additional input data <code class="code docutils literal notranslate"><span class="pre">coordinates.txt</span></code> and <code class="code docutils literal notranslate"><span class="pre">proj.txt</span></code></p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">coordinates.txt</span></code> is a space separated text file of 3 columns: <code class="code docutils literal notranslate"><span class="pre">ID</span></code>, <code class="code docutils literal notranslate"><span class="pre">X</span></code> and <code class="code docutils literal notranslate"><span class="pre">Y</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gedit results/coordinates.txt</span>
</pre></div>
</div>
<p>Then copy paste the following list and save your file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1 767360 −2415219
2 755310 −2378377
3 781072 −2379346
4 789936 −2440150
</pre></div>
</div>
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">proj.txt</span></code> must contain one line with the projection definition of the tiles coordinates and one line with the projection definition of the imagery. Here it is UTM zone 20, for both, with the following Proj4 format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">init</span><span class="o">=</span><span class="n">epsg</span><span class="p">:</span><span class="mi">32620</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">utm</span> <span class="o">+</span><span class="n">zone</span><span class="o">=</span><span class="mi">20</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">WGS84</span> <span class="o">+</span><span class="n">units</span><span class="o">=</span><span class="n">m</span> <span class="o">+</span> <span class="n">no</span> <span class="n">defs</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">WGS84</span>
</pre></div>
</div>
<p>Create the file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gedit results/proj.txt</span>
</pre></div>
</div>
<p>Paste the projection definition twice, as two separate lines and save.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">init</span><span class="o">=</span><span class="n">epsg</span><span class="p">:</span><span class="mi">32620</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">utm</span> <span class="o">+</span><span class="n">zone</span><span class="o">=</span><span class="mi">20</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">WGS84</span> <span class="o">+</span><span class="n">units</span><span class="o">=</span><span class="n">m</span> <span class="o">+</span> <span class="n">no</span> <span class="n">defs</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">WGS84</span>
<span class="o">+</span><span class="n">init</span><span class="o">=</span><span class="n">epsg</span><span class="p">:</span><span class="mi">32620</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">utm</span> <span class="o">+</span><span class="n">zone</span><span class="o">=</span><span class="mi">20</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">WGS84</span> <span class="o">+</span><span class="n">units</span><span class="o">=</span><span class="n">m</span> <span class="o">+</span> <span class="n">no</span> <span class="n">defs</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">WGS84</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you do not have it, you can get the PROJ4 format of an image by using the function <code class="code docutils literal notranslate"><span class="pre">cs2cs</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cs2cs −v +i n i t=epsg:32620</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you don’t know the EPSG code of your image use <code class="code docutils literal notranslate"><span class="pre">gdalinfo</span></code> for your imagery:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdalinfo landsat_t1.TIF</span>
</pre></div>
</div>
</div>
</li>
<li><p>Now we run the actual script to create the tiles in the terminal.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd results</span>
<span class="go">oft−cuttile.pl coordinates.txt proj.txt . Tiles</span>
</pre></div>
</div>
</li>
</ol>
<div class="figure align-default" id="id251">
<a class="reference internal image-reference" href="../_images/oft-cuttile.png"><img alt="../_images/oft-cuttile.png" src="../_images/oft-cuttile.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">The four tiles overlayed on base image, displayed with differing band composition to base imagery.</span><a class="headerlink" href="#id251" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-filter">
<h4>oft-filter<a class="headerlink" href="#oft-filter" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id59">
<h5>NAME<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h5>
<p>oft-filter - moving window filters</p>
</div>
<div class="section" id="id60">
<h5>SYNOPSIS<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-filter [-ot Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/CInt16/CInt32 /CFloat32/CFloat64] [-h] [-x xdim] [-y xdim] [-c const] [-n nodata] [-f filter][-v] &lt;-i inputfile&gt;&lt;-i inputfile&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id61">
<h5>OPTIONS<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>[-x dim] Window size in x-direction (default=3)</p></li>
<li><p>[-y dim] Window size in y-direction (default=3)</p></li>
<li><p>[-c const] Constant used to multiply the resulting value</p></li>
<li><p>[-n value] Input NoData value, ignored in calculation (Def. from input file)</p></li>
<li><p>[-v] Verbose</p></li>
<li><p>[-f filter] Type of statistics to be computed (default=1):</p>
<ol class="arabic simple" start="0">
<li><p>mean</p></li>
<li><p>standard deviation</p></li>
<li><p>variance</p></li>
<li><p>skewness</p></li>
<li><p>rank</p></li>
<li><p>coefficient of variation: 100 * std/mean</p></li>
</ol>
</li>
</ul>
</div>
<div class="section" id="id62">
<h5>DESCRIPTION<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-filter</span></code> computes local statistics on values of a raster within the zones of a moving window.</p>
<ol class="arabic simple">
<li><p>Converts the point locations into the projection of the image</p></li>
<li><p>Cuts a set of 20 km x 20 km tiles around the locations</p></li>
<li><p>Converts the tiles to the coordinate system of the points (20 km x 20 km)</p></li>
</ol>
</div>
<div class="section" id="id63">
<h5>EXAMPLE<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-filter</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Create the standard deviation for the moving window using the default window size and default statistics (without defining -f). The output image is called std.tif:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−filter −i landsat_t1.tif −o std.tif</span>
</pre></div>
</div>
<p>Now we go through an example calculating the coefficient of variation (100*std/mean) using the option -f 5:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−filter −i landsat_t1.tif −o coe_var.tif −f 5</span>
</pre></div>
</div>
<p>Calculation of the mean using the option -f 0:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−filter −i landsat_t1.tif −o mean.tif −f 0</span>
</pre></div>
</div>
<p>Load your computed rasters in QGIS and verify your output statistics
using Identify Results.</p>
<div class="figure align-default" id="id252">
<a class="reference internal image-reference" href="../_images/oft-filter.png"><img alt="../_images/oft-filter.png" src="../_images/oft-filter.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Example of the computed mean.tif</span><a class="headerlink" href="#id252" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-gengrid-bash">
<h4>oft-gengrid.bash<a class="headerlink" href="#oft-gengrid-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id64">
<h5>NAME<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code> - generates a systematic grid over a raster image.</p>
</div>
<div class="section" id="id65">
<h5>SYNOPSIS<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-gengrid.bash &lt;input img&gt;&lt;DX&gt;&lt;DY&gt;&lt;-output&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id66">
<h5>DESCRIPTION<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code> generates a grid of points over an image (text file), with user-defined spacing in x and y directions. Output is a text file with the coordinates of the points. - Generates a text file with 3 entries for each point: ID Xcoord Ycoord - &lt;input img&gt; is a geo-referenced input image</p>
<ul class="simple">
<li><p>&lt;DX&gt; is the distance between the points in X direction</p></li>
<li><p>&lt;DY&gt; is the distance between the points in Y direction</p></li>
</ul>
<p>Steps:</p>
<ol class="arabic simple">
<li><p>Prints the average, RMSE and bias on screen.</p></li>
<li><p>Saves original value, estimate and difference in an output file. If id or x and y are given, they are printed out as well.</p></li>
<li><p>If the id is indicated in the command line, the id’s of 10 nearest neighbors are printed into the output file.</p></li>
</ol>
</div>
<div class="section" id="id67">
<h5>EXAMPLE<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Run the command line for generating the grid of 1000 x 1000 m distance between the points in X and Y directions on the input image <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> with an output text file consisting of three columns for <code class="code docutils literal notranslate"><span class="pre">ID</span></code>, <code class="code docutils literal notranslate"><span class="pre">X</span></code> and <code class="code docutils literal notranslate"><span class="pre">Y</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−gengrid.bash images/landsat_t1.tif 1000 1000 results/grid_points.txt</span>
</pre></div>
</div>
<p>Look at the first ten lines of your result:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head results/grid points.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>1</p></td>
<td><p>730785</p></td>
<td><p>−2456134</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>730785</p></td>
<td><p>−2455134</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>730785</p></td>
<td><p>−2454134</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>730785</p></td>
<td><p>−2453134</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>730785</p></td>
<td><p>−2452134</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>730785</p></td>
<td><p>−2451134</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>730785</p></td>
<td><p>−2450134</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>730785</p></td>
<td><p>−2449134</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>730785</p></td>
<td><p>−2448134</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>730785</p></td>
<td><p>−2447134</p></td>
</tr>
</tbody>
</table>
<p>Load the data in QGIS using ’Add Delimited Text Layer’ and see if it overlays on your Landsat image.</p>
<div class="figure align-default" id="id253">
<a class="reference internal image-reference" href="../_images/oft-gengrid.png"><img alt="../_images/oft-gengrid.png" src="../_images/oft-gengrid.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Zoom of the result overlayed on the original Landsat image in QGIS.</span><a class="headerlink" href="#id253" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-getcorners-bash">
<h4>oft-getcorners.bash<a class="headerlink" href="#oft-getcorners-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id68">
<h5>NAME<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-getcorners.bash</span></code> - gets the coordinates of corners of a raster image or OGR vector layer .</p>
</div>
<div class="section" id="id69">
<h5>SYNOPSIS<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-getcorners.bash &lt;inputfile&gt;[ -ul_lr /-min_max ]</span>
</pre></div>
</div>
</div>
<div class="section" id="id70">
<h5>OPTION<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h5>
<p>&lt;inputfile&gt; is a GDAL raster layer or OGR vector layer</p>
<ul class="simple">
<li><p>ul_lr = ulx uly lrx lry (default)</p></li>
<li><p>min_max = xmin ymin xmax ymax (ulx lry lrx uly)</p></li>
</ul>
</div>
<div class="section" id="id71">
<h5>DESCRIPTION<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-getcorners.bash</span></code> outputs the corner coordinates for a GDAL raster layer or OGR vector layer. The user can choose the order of the output:</p>
<ul class="simple">
<li><p>ulx: upper left x-coordinate</p></li>
<li><p>uly: upper left y-coordinate</p></li>
<li><p>lrx: lower right x-coordinate</p></li>
<li><p>lry: lower right y-coordinate</p></li>
</ul>
</div>
<div class="section" id="id72">
<h5>EXAMPLE<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-getcorners.bash</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/OFGT−data</span>
</pre></div>
</div>
<p>Run the <code class="code docutils literal notranslate"><span class="pre">oft-getcorners.bash</span></code>:</p>
<p>..code-block:: console</p>
<blockquote>
<div><p>oft−getcorners.bash images/landsat_t1.tif</p>
</div></blockquote>
<p>You should get the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Not an OGR vector layer
Using GDAL raster layer
Output in order ulx uly lrx lry
729285.000 −2352885.000 819285.000 −2457885.000
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-polygonize-bash">
<h4>oft-polygonize.bash<a class="headerlink" href="#oft-polygonize-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id73">
<h5>NAME<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-polygonize.bash</span></code> - a wrapper for <code class="code docutils literal notranslate"><span class="pre">gdal_polygonize</span></code>.</p>
</div>
<div class="section" id="id74">
<h5>SYNOPSIS<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-polygonize.bash &lt;input.img&gt;&lt;output.shp&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id75">
<h5>EXAMPLE<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-polygonize.bash</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/OFGT−data</span>
</pre></div>
</div>
<p>Let’s run <code class="code docutils literal notranslate"><span class="pre">oft-polygonize.bash</span></code> using the input image <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> to create the output <code class="code docutils literal notranslate"><span class="pre">oft-polygonize.shp</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−polygonize.bash landsat_t1.tif oft−polygonize.shp</span>
</pre></div>
</div>
<p>Take a look at your shapefile in QGIS on go on properties of the .shp -&gt;Labels -&gt;tick Display Labels, set Field Containing Label to DN -&gt;Press OK. The DN of each polygon in <code class="code docutils literal notranslate"><span class="pre">oft-polygonize.shp</span></code> should be the same as the pixel value of <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> for the same location.</p>
<div class="figure align-default" id="id254">
<a class="reference internal image-reference" href="../_images/oft-polygonize.png"><img alt="../_images/oft-polygonize.png" src="../_images/oft-polygonize.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Zoomed view of oft-polygonize.shp</span><a class="headerlink" href="#id254" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-sample-within-polys-bash">
<h4>oft-sample-within-polys.bash<a class="headerlink" href="#oft-sample-within-polys-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id76">
<h5>NAME<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-sample-within-polys.bash</span></code> - samples pixels within polygons and generates training data for knn.</p>
</div>
<div class="section" id="id77">
<h5>SYNOPSIS<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-sample-within-polys.bash &lt;image&gt;&lt;shapefile basename&gt; &lt;shapefile class  &gt;&lt;size of sample&gt;[-sample only]</span>
</pre></div>
</div>
</div>
<div class="section" id="id78">
<h5>DESCRIPTION<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-sample-within-polys.bash</span></code> samples pixel values from an image within areas determined by training data polygons (shapefile).
Output is named sample shapefile basename.txt</p>
<p>Specifications:</p>
<ul class="simple">
<li><p>Sample size (NBR of pixels) is given by the user</p></li>
<li><p>The sample is distributed within classes in relation to class frequencies</p></li>
<li><p>Output is a text file to be used e.g. in knn</p></li>
<li><p>A histogram is also printed out, sample size per class is shown in last column</p></li>
<li><p>The image and the shapefile need to be in the same projection</p></li>
</ul>
</div>
<div class="section" id="id79">
<h5>OPTIONS<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>[-sample only]</p></li>
<li><p>It is possible to pick a new sample by running the script with option -sample only (do not delete grey-values shapefile basename.txt if you are going to re-run)</p></li>
<li><p>At this point the image and the shapefile need to be in the same projection</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Also look at <code class="code docutils literal notranslate"><span class="pre">oft-knn</span></code></p>
</div>
</div>
<div class="section" id="id80">
<h5>EXAMPLE<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-oft-sample-within-polys.bash</span></code>
Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Now run the script in the command line within input-raster <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> and input-shapefile <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>; ’name’ refers to the shapefile ID. If you look at the attribute table of <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> you see, that you could also use the column <strong>id</strong>. Here we chose name to make it more transparent. 100 is the sample size chosen for this exercise.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the command line the extension .shp of the shapefile is not included!</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−sample−within−polys.bash landsat_t1.tif</span>
</pre></div>
</div>
<p>Output are three text files:</p>
<ul class="simple">
<li><p>grey-values <code class="code docutils literal notranslate"><span class="pre">greyvals_landuse.txt</span></code></p></li>
<li><p>histogram <code class="code docutils literal notranslate"><span class="pre">histogramlanduse.txt</span></code></p></li>
<li><p>sample output <code class="code docutils literal notranslate"><span class="pre">sample_landuse.txt</span></code></p></li>
</ul>
<p>Here you can see an extract of sample <code class="code docutils literal notranslate"><span class="pre">landuse.txt</span></code>:</p>
<table class="table">
<colgroup>
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pixel id</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
<th class="head"><p>class</p></th>
<th class="head"><p>band1</p></th>
<th class="head"><p>band2</p></th>
<th class="head"><p>band3</p></th>
<th class="head"><p>band4</p></th>
<th class="head"><p>band5</p></th>
<th class="head"><p>band6</p></th>
<th class="head"><p>band7</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>10557.00</p></td>
<td><p>772650.00</p></td>
<td><p>−2404770.00</p></td>
<td><p>5.00</p></td>
<td><p>53.00</p></td>
<td><p>26.00</p></td>
<td><p>28.00</p></td>
<td><p>54.00</p></td>
<td><p>81.00</p></td>
<td><p>131.00</p></td>
<td><p>39.00</p></td>
</tr>
<tr class="row-odd"><td><p>94788.00</p></td>
<td><p>773490.00</p></td>
<td><p>−2431680.00</p></td>
<td><p>1.00</p></td>
<td><p>51.00</p></td>
<td><p>24.00</p></td>
<td><p>25.00</p></td>
<td><p>45.00</p></td>
<td><p>65.00</p></td>
<td><p>127.00</p></td>
<td><p>33.00</p></td>
</tr>
<tr class="row-even"><td><p>201536.00</p></td>
<td><p>774750.00</p></td>
<td><p>−2439390.00</p></td>
<td><p>1.00</p></td>
<td><p>54.00</p></td>
<td><p>25.00</p></td>
<td><p>27.00</p></td>
<td><p>50.00</p></td>
<td><p>71.00</p></td>
<td><p>130.00</p></td>
<td><p>35.00</p></td>
</tr>
<tr class="row-odd"><td><p>88531.00</p></td>
<td><p>771450.00</p></td>
<td><p>−2431110.00</p></td>
<td><p>1.00</p></td>
<td><p>47.00</p></td>
<td><p>21.00</p></td>
<td><p>18.00</p></td>
<td><p>37.00</p></td>
<td><p>48.00</p></td>
<td><p>126.00</p></td>
<td><p>21.00</p></td>
</tr>
<tr class="row-even"><td><p>123374.00</p></td>
<td><p>774150.00</p></td>
<td><p>−2433990.00</p></td>
<td><p>1.00</p></td>
<td><p>54.00</p></td>
<td><p>24.00</p></td>
<td><p>30.00</p></td>
<td><p>35.00</p></td>
<td><p>75.00</p></td>
<td><p>132.00</p></td>
<td><p>42.00</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="oft-shptif-bash">
<h4>oft-shptif.bash<a class="headerlink" href="#oft-shptif-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id81">
<h5>NAME<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-shptif.bash</span></code> - Rasterizes a shapefile to the resolution of a reference image</p>
</div>
<div class="section" id="id82">
<h5>SYNOPSIS<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-shptif.bash &lt;shapefile&gt;&lt;raster reference&gt;&lt;raster output&gt;[fiel dname]</span>
</pre></div>
</div>
<p>input files:</p>
<ul class="simple">
<li><p>shapefile that is supposed to be rasterized</p></li>
<li><p>reference raster image - the shapefile will be rasterized to the same extent and resolution of this image</p></li>
</ul>
</div>
<div class="section" id="id83">
<h5>OPTION<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>[field name]: the field name of the attribute of the shapefile that is supposed to be rasterized</p></li>
<li><p>If no field name is specified, every polygon will be assigned an arbitrary, but unique ID.</p></li>
</ul>
</div>
<div class="section" id="id84">
<h5>EXAMPLE<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-shptif.bash</span></code>.
Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>We are going to rasterize the shapefile <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> with <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> as a reference image. We are interested in the landuse specified in the shapefile, so we choose landuse as field name.</p>
<p>Run oft-shptif.bash:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−shptif.bash shapefile/landuse.shp images/landsat_t1.tif results/raster_landuse.tif landuse</span>
</pre></div>
</div>
<p>Open the output <code class="code docutils literal notranslate"><span class="pre">results/raster_landuse.tif</span></code> in QGIS, or use it for further calculations. For all areas without landuse information in the shapefile, value 0 will be recorded in the output image.</p>
</div>
</div>
<div class="section" id="oft-sigshp-bash">
<h4>oft-sigshp.bash<a class="headerlink" href="#oft-sigshp-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id85">
<h5>NAME<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-sigshp.bash</span></code> - creates a signature file of an image based on training area polygons.</p>
</div>
<div class="section" id="id86">
<h5>SYNOPSIS<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-sigshp.bash &lt;image&gt;&lt;shapefile basename&gt;&lt;shapefile id field name&gt;&lt;shapefile coverclass field name&gt;&lt;output sig file&gt;[image projection EPSG][shp projection EPSG]</span>
</pre></div>
</div>
</div>
<div class="section" id="id87">
<h5>DESCRIPTION<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-sigshp.bash</span></code> creates a signature file of an image, e.g. Landsat, based on training area polygons in shapefile format. This file can be used in knn-classification with stand alone program oft-nn.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>do not put .shp into the second parameter (basename)!</p>
</div>
<ul class="simple">
<li><p>The training areas and the image must be in the same projection <strong>OR</strong> you may give the projections in the command line as EPSG codes.</p></li>
<li><p>If the projections are not defined (for both or one of the inputs), or the program does not recognize it, the script will warn. This is not dangerous if the files really are similarly aligned.</p></li>
<li><p>The ID’s must fit into a 16-bit Unsigned image ( 65500).</p></li>
<li><p>The class values may be either numerical or verbal (e.g. “bushland”)</p></li>
</ul>
<p>Minimum parameters needed:</p>
<ul class="simple">
<li><p>image-file</p></li>
<li><p>shapefile</p></li>
<li><p>field name storing ids in shape</p></li>
<li><p>field name storing numeric class values in shape</p></li>
<li><p>output signature filename</p></li>
</ul>
</div>
<div class="section" id="id88">
<h5>OPTIONS<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h5>
<p>Parameters:</p>
<ul class="simple">
<li><p>projection of image file</p></li>
<li><p>projection of shapefile</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>This script can also be used after <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code>.</p>
</div>
</div>
<div class="section" id="id89">
<h5>EXAMPLE<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-sigshp.bash</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>The script <code class="code docutils literal notranslate"><span class="pre">oft-sigshp.bash</span></code> is able to create a signature file for both data types, numerical and factorial, depending on the stored data in your shapefile. In the next steps we will lead you through an example exercises for each data type:</p>
<div class="figure align-default" id="id255">
<a class="reference internal image-reference" href="../_images/poly20_attribute.png"><img alt="../_images/poly20_attribute.png" src="../_images/poly20_attribute.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Attribute table of polyN20.shp</span><a class="headerlink" href="#id255" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="creating-signature-file-with-numerical-values">
<h6>creating signature file with numerical values<a class="headerlink" href="#creating-signature-file-with-numerical-values" title="Permalink to this headline">¶</a></h6>
<p>First, we run in the command line <code class="code docutils literal notranslate"><span class="pre">oft-sigshp.bash</span></code> with the input raster <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> and your input shapefile <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>. <strong>id</strong> stands for the shapefile id field name; <strong>newcol</strong> refers to the shapefile cover-class field name. If you look at the attribute table of your <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> you will see that under <strong>newcol</strong>, numerical data is stored. Output: <code class="code docutils literal notranslate"><span class="pre">sig_newcol.txt</span></code>.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>the extension .shp of your shapefile is not included in the command line - only the basename!</p>
</div>
<p>Run in terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−sigshp.bash landsat_t1.tif landuse id newcol sig_newcol.txt EPSG:32620 EPSG:32620</span>
</pre></div>
</div>
<p>Lets take a look at the first lines of our output <code class="code docutils literal notranslate"><span class="pre">signewcol.txt</span></code>:</p>
<table class="table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>newcol</p></th>
<th class="head"><p>band1</p></th>
<th class="head"><p>band2</p></th>
<th class="head"><p>band3</p></th>
<th class="head"><p>band4</p></th>
<th class="head"><p>band5</p></th>
<th class="head"><p>band6</p></th>
<th class="head"><p>band7</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>11</p></td>
<td><p>52.097317</p></td>
<td><p>23.696463</p></td>
<td><p>24.919711</p></td>
<td><p>45.321753</p></td>
<td><p>65.427785</p></td>
<td><p>129.033459</p></td>
<td><p>32.060358</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>22</p></td>
<td><p>54.157159</p></td>
<td><p>25.348832</p></td>
<td><p>28.176561</p></td>
<td><p>48.805278</p></td>
<td><p>72.468158</p></td>
<td><p>129.166550</p></td>
<td><p>34.397944</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>44</p></td>
<td><p>53.864419</p></td>
<td><p>25.231642</p></td>
<td><p>27.932243</p></td>
<td><p>51.411361</p></td>
<td><p>71.957973</p></td>
<td><p>129.559346</p></td>
<td><p>33.277298</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>55</p></td>
<td><p>54.367835</p></td>
<td><p>25.734659</p></td>
<td><p>28.453136</p></td>
<td><p>53.725893</p></td>
<td><p>74.190155</p></td>
<td><p>130.886716</p></td>
<td><p>36.174309</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>66</p></td>
<td><p>50.987633</p></td>
<td><p>23.044892</p></td>
<td><p>23.452312</p></td>
<td><p>52.655091</p></td>
<td><p>65.861426</p></td>
<td><p>128.754701</p></td>
<td><p>29.121125</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>−9999</p></td>
<td><p>52.926014</p></td>
<td><p>24.353222</p></td>
<td><p>27.224344</p></td>
<td><p>48.176611</p></td>
<td><p>77.276850</p></td>
<td><p>132.054893</p></td>
<td><p>38.276850</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>88</p></td>
<td><p>54.133652</p></td>
<td><p>25.214797</p></td>
<td><p>28.140811</p></td>
<td><p>49.842482</p></td>
<td><p>74.985680</p></td>
<td><p>131.004773</p></td>
<td><p>37.408115</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>99</p></td>
<td><p>54.772519</p></td>
<td><p>25.961832</p></td>
<td><p>29.036641</p></td>
<td><p>52.786260</p></td>
<td><p>78.035115</p></td>
<td><p>130.658015</p></td>
<td><p>39.607634</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>1000</p></td>
<td><p>51.588723</p></td>
<td><p>23.134328</p></td>
<td><p>24.255390</p></td>
<td><p>45.487562</p></td>
<td><p>68.208955</p></td>
<td><p>130.310116</p></td>
<td><p>33.121061</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>1111</p></td>
<td><p>53.236948</p></td>
<td><p>24.644578</p></td>
<td><p>27.423695</p></td>
<td><p>48.779116</p></td>
<td><p>68.943775</p></td>
<td><p>131.594378</p></td>
<td><p>33.905622</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="creating-signature-file-with-factorial-values">
<h6>creating signature file with factorial values<a class="headerlink" href="#creating-signature-file-with-factorial-values" title="Permalink to this headline">¶</a></h6>
<p>Let’s run the script using the id column called colour, which stores factorial values. Output: <code class="code docutils literal notranslate"><span class="pre">sig_colour.txt</span></code>. Run in terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−sigshp.bash landsat_t1.tif landuse id colour sig_colour.txt EPSG:32620 EPSG:32620</span>
</pre></div>
</div>
<p>Again let’s take a closer look at the first lines of the output file <code class="code docutils literal notranslate"><span class="pre">sig_colour.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head sig_colour.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>factorial</p></th>
<th class="head"><p>band1</p></th>
<th class="head"><p>band2</p></th>
<th class="head"><p>band3</p></th>
<th class="head"><p>band4</p></th>
<th class="head"><p>band5</p></th>
<th class="head"><p>band6</p></th>
<th class="head"><p>band7</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>red</p></td>
<td><p>52.097317</p></td>
<td><p>23.696463</p></td>
<td><p>24.919711</p></td>
<td><p>45.321753</p></td>
<td><p>65.427785</p></td>
<td><p>129.033459</p></td>
<td><p>32.060358</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>green</p></td>
<td><p>54.157159</p></td>
<td><p>25.348832</p></td>
<td><p>28.176561</p></td>
<td><p>48.805278</p></td>
<td><p>72.468158</p></td>
<td><p>129.166550</p></td>
<td><p>34.397944</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>orange</p></td>
<td><p>53.864419</p></td>
<td><p>25.231642</p></td>
<td><p>27.932243</p></td>
<td><p>51.411361</p></td>
<td><p>71.957973</p></td>
<td><p>129.559346</p></td>
<td><p>33.277298</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>pink</p></td>
<td><p>54.367835</p></td>
<td><p>25.734659</p></td>
<td><p>28.453136</p></td>
<td><p>53.725893</p></td>
<td><p>74.190155</p></td>
<td><p>130.886716</p></td>
<td><p>36.174309</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>red</p></td>
<td><p>50.987633</p></td>
<td><p>23.044892</p></td>
<td><p>23.452312</p></td>
<td><p>52.655091</p></td>
<td><p>65.861426</p></td>
<td><p>128.754701</p></td>
<td><p>29.121125</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>blue</p></td>
<td><p>52.926014</p></td>
<td><p>24.353222</p></td>
<td><p>27.224344</p></td>
<td><p>48.176611</p></td>
<td><p>77.276850</p></td>
<td><p>132.054893</p></td>
<td><p>38.276850</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>orange</p></td>
<td><p>54.133652</p></td>
<td><p>25.214797</p></td>
<td><p>28.140811</p></td>
<td><p>49.842482</p></td>
<td><p>74.985680</p></td>
<td><p>131.004773</p></td>
<td><p>37.408115</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>green</p></td>
<td><p>54.772519</p></td>
<td><p>25.961832</p></td>
<td><p>29.036641</p></td>
<td><p>52.786260</p></td>
<td><p>78.035115</p></td>
<td><p>130.658015</p></td>
<td><p>39.607634</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>orange</p></td>
<td><p>51.588723</p></td>
<td><p>23.134328</p></td>
<td><p>24.255390</p></td>
<td><p>45.487562</p></td>
<td><p>68.208955</p></td>
<td><p>130.310116</p></td>
<td><p>33.121061</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>red</p></td>
<td><p>53.236948</p></td>
<td><p>24.644578</p></td>
<td><p>27.423695</p></td>
<td><p>48.779116</p></td>
<td><p>68.943775</p></td>
<td><p>131.594378</p></td>
<td><p>33.905622</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In comparison to the output of <code class="code docutils literal notranslate"><span class="pre">sig_newcol.txt</span></code> we can now see that col2 of <code class="code docutils literal notranslate"><span class="pre">sig_colour.txt</span></code> contains the factorial data.</p>
</div>
</div>
</div>
</div>
<div class="section" id="pointstosquares-py">
<h4>PointsToSquares.py<a class="headerlink" href="#pointstosquares-py" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id90">
<h5>NAME<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h5>
<p>PointsToSquares.py - converts XY-locations into 100 x 100 m squares in a kml-file.</p>
</div>
<div class="section" id="id91">
<h5>SYNOPSIS<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">PointsToSquares.py &lt;infile&gt;&lt;outfile&gt;&lt;UTM zone number&gt;&lt;ID&gt;&lt;X- field&gt;&lt;Y-field&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id92">
<h5>DESCRIPTION<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">PointsToSquares.py</span></code> Conversion of user-defined plot center points in a text file into squares of 100 x 100 m in .kml format. These squares are training data collection locations, meant to be used with a specific tool made for Google Earth.
Input textfile projection needs to be UTM South WGS84 zones. Output .kml is in LatLon WGS84.</p>
</div>
<div class="section" id="id93">
<h5>EXAMPLE<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">PointsToSquares.py</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdalinfo</span></code>.</p>
<p>Either use your own .txt file consisting of three columns: <code class="code docutils literal notranslate"><span class="pre">ID</span></code>, <code class="code docutils literal notranslate"><span class="pre">X-field</span></code> and <code class="code docutils literal notranslate"><span class="pre">Y-field</span></code> or Generate it by using <code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this exercise we use the .txt file derived from <code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code> called <code class="code docutils literal notranslate"><span class="pre">training.txt</span></code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note that the projection is UTM South WGS84 zones. In our case it is UTM Zone 20S.</p>
<p>How to find out? Before running <code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code>, check the projection of the input image (<code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> ), which is the base to calculate <code class="code docutils literal notranslate"><span class="pre">training.txt</span></code> using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdalinfo landsat_t1.tif</span>
</pre></div>
</div>
</div>
<p>After generating <code class="code docutils literal notranslate"><span class="pre">training.txt</span></code> run the command line for calculating your points to 100 x 100x meter squares, creating an kml outputfile called <code class="code docutils literal notranslate"><span class="pre">Points2Squares_training.kml</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">PointsToSquares.py training.txt Points2Squares_training.kml 20 1 2 3</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="image-manipulation">
<h3>IMAGE MANIPULATION<a class="headerlink" href="#image-manipulation" title="Permalink to this headline">¶</a></h3>
<div class="section" id="multifillerthermal-bash">
<h4>multifillerThermal.bash<a class="headerlink" href="#multifillerthermal-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id94">
<h5>NAME<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">multifillerThermal.bash</span></code> - is a script which utilizes several Landsat scenes to build a multi-temporal image composite using the warmest pixel -method.</p>
</div>
<div class="section" id="id95">
<h5>SYNOPSIS<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">multifillerThermal.bash &lt;anchor&gt;&lt;filler1&gt;&lt;filler2&gt;... &lt;filler n&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id96">
<h5>DESCRIPTION<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h5>
<p>The aim is to have one good image so called anchor with as few problematic areas as possible and then another which is from same season (as close a date as possible) and has clouds in different locations so called filler.</p>
</div>
<div class="section" id="id97">
<h5>EXAMPLE<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">multifillerThermal.bash</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Then run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">multifillerThermal.bash anchor.tif filler.tif</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-calc">
<h4>oft-calc<a class="headerlink" href="#oft-calc" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id98">
<h5>NAME<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-calc</span></code> - is a raster image calculator.</p>
</div>
<div class="section" id="id99">
<h5>SYNOPSIS<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-calc &lt;input&gt;&lt;output&gt;[-um maskfile] [-inv] [-of format] [-Z/M/Q/C/L/X/M] oft-calc &lt;input&gt;&lt;output&gt;[-ot Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/ CInt16/CInt32/CFloat32/CFloat64]</span>
</pre></div>
</div>
</div>
<div class="section" id="id100">
<h5>DESCRIPTION<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-calc</span></code> based on an input raster file, <code class="code docutils literal notranslate"><span class="pre">oft-calc</span></code> creates an output raster file as result of a simple calculation between the original bands. The bands used for the calculation must be all stacked in the input raster file.</p>
<p>After defining the first line, following parameters will be asked:</p>
<ol class="arabic simple">
<li><p>Number of output bands</p></li>
<li><p>Input postfix equations</p></li>
</ol>
<p>Band 1: The equation for output band 1 has to be specified. The input bands are referred to with <code class="code docutils literal notranslate"><span class="pre">#</span></code>. The implemented operators between input bands include:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">+</span></code> addition</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−</span></code> subtraction</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/</span></code> division</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">∗</span></code> multiplication</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">=</span></code> equals to</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&lt;</span></code> less than</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&gt;</span></code> larger than</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">!</span></code> not equal to</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">?</span></code> if clause</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">M</span></code> maximum of two values m minimum of two values</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">m</span></code> minimum of two values</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">B</span></code> bit level operator</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">e</span></code> natural logarithm</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">c</span></code> pixel column coordinate</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">r</span></code> pixel row coordinate</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ˆ</span></code> power</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">e</span></code> natural logarithm</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">x</span></code> base−e exponential function</p></li>
</ul>
</div>
<div class="section" id="id101">
<h5>OPTION<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h5>
<p>Parameters:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-inv</span></code> the notation of the equations has changed in version 2.0. In case you want to use the old notations, please use the <code class="code docutils literal notranslate"><span class="pre">-inv</span></code> option.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-of</span></code> format. Any GDAL output format can be specified. If not specified, output format will be tif.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-ot</span></code> output data type. If not specified, output data type will be the same as input data type. - [Byte/Int16/UInt16/UInt32/Int32/Float32/Float64] - output data type</p></li>
<li><p>[Z/M/Q/C/L/X/M] - try to speed up the processing by reading <strong>n</strong> lines at the time (Z=2000 M=1000 Q=500 L=50 X=10)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-um</span></code> mask. If a raster file is provided as a mask, only pixels with value different than 0 in the mask will be used for the calculation.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The notation of the equations has changed in version 2.0. In case you want to use the old notations, please use the <code class="code docutils literal notranslate"><span class="pre">-inv</span></code> option.</p>
</div>
</div>
<div class="section" id="id102">
<h5>EXAMPLE<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-calc</span></code></p>
<div class="section" id="operators">
<h6>OPERATORS<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h6>
<ol class="arabic">
<li><p>Addition
Simple band addition: band1 + band2</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image //hit return after defining this line
2  //this number defines the number of bands your out_image will have; hit return again
#1 #2 + //type your clause and hit return . Now out_image should be in process !
</pre></div>
</div>
</li>
<li><p>Division band1 / band2</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">oft</span><span class="o">-</span><span class="n">calc</span> <span class="n">in_image</span> <span class="n">out_image</span>
<span class="mi">2</span>
<span class="c1">#1 #2 /</span>
</pre></div>
</div>
</li>
<li><p>Equals to
If pixel value of band1 equals 0 then set it to 0, otherwise to 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1 // if(?) band1 = 0 (#1 0 =) then 0 otherwise 1 (1 0)
#1 0 = 1 0 ?
</pre></div>
</div>
</li>
<li><p>Boolean
You can also use boolean “larger than” operator to determine if #1 &gt;#2</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
2
#1 #2 &gt;
</pre></div>
</div>
</li>
<li><p>The usage of the IF clause
if band1 ¿ 50, output=1 else output=0. This also creates a simple mask containing 1 for pixels of interest and 0 for background</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1
#1 50 &gt; 0 1 ? //if(’’?’’) band1 &gt; 50 (’’#1 50 &gt;’’) then 1
// otherwise 0 (’’0 1’’) if band1 + band2 = 2, output=1 else output=0
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1
#1 #2+2=01? //if(’’?’’) band1+band2 (’’#1#2+’’)
// = 2 (’’2 =’’) then 1 otherwise 0 (’’0 1’’) if band1 &gt; 50 or band2 &gt; 50 , output=1 else output=0
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1
#1 50 &gt; #2 50 &gt; 0 1 ? 1 ? //if band1 &gt; 50 (’’#1 50 &gt;’’)
// then 1 (’’1 ?’’) otherwise if band2 &gt; 50 (’’#2 50 &gt;’’)
// then 1 otherwise 0 (’’0 1 ?’’)
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="applications">
<h6>APPLICATIONS<a class="headerlink" href="#applications" title="Permalink to this headline">¶</a></h6>
<ol class="arabic">
<li><p>NDVI
Calculate the NDVI for your Landsat image (band3 = Red band, band4 = NIR Band)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc −ot Float32 in_image out_image
1
#4 #3 − #4 #3 + / //(b4−b3) / (b4+b3)
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the band4 in the input layer-stack image should be the NIR band and the band 3, the Red band. Note also that the output data type should be specified as Float32 in order to have output values from -1 to 1. <code class="code docutils literal notranslate"><span class="pre">oft-ndvi.bash</span></code> also creates a NDVI image using (NIR-VIS) / (NIR + VIS).</p>
</div>
</li>
<li><p>NBR - Normalised Burn Ratio
NBR highlights areas that have burned using Landsat TM. Calculate the NBR for your Landsat image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1
#4 #7 − #4 #7 + / //(b4−b7) / (b4+b7)
</pre></div>
</div>
</li>
<li><p>dNBR
In addition, the difference NBR (dNBR) technique is a form of Change Detection which is used to index the severity of a fire.
Calculate the difference (or delta) dNBR for NBR pre-fire - NBR post-fire:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>as you can’t have two separate input files, one for NBR pre-fire and a second for NBR post-fire, you need to combine the two output bands into one file before applying the equation (band 1 (#1) containing information on NBR pre-fire and band 2 (#2) containing info on NBR post-fire):</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1
#1 #2 − //band 1 (#1) contains info on NBR pre-fire and
// band 2 (#2) contains NBR post-fire
</pre></div>
</div>
</li>
<li><p>Average of bands
Compute an average of bands 1,2 and 3 of an image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1
#1 #2 + #3 + 3 / // band1 + band 2 (#1 #2 +) + band3 (#3 +) divided by 3 (3 /)
</pre></div>
</div>
</li>
<li><p>Build a mask from LEDAPS QA layer
Bit level operators: does the first bit of band 2 equals to 1?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1
1 #2 B
</pre></div>
</div>
<p>to build a mask from LEDAPS QA layer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="c1">#1 B 0 2 #1 B 4 #1 B + 8 #1 B + 9 #1 B + 12 #1 B + &lt; 2 1 ? 1?</span>
</pre></div>
</div>
<p>which becomes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1 #1 B // if bit one of band 1 equals to 1
0 // constant
2 #1B // if bit 2 of band1 equals to 1
4 #1B // if bit 4 of band1 equals to 1
+ // sum up the previous two terms
8 #1 B // if bit 8 of band1 equals to 1
+ // sum up the previous two terms
12 #1 B // if bit 12 of band1 equals to 1
+ // sum up the previous two terms
&lt; // if previous term is smaller than
2 // output 2 (id clause false)
1 // output 1 (if clause true)
? // if
1 // output 1 (if clause true)
? // if
</pre></div>
</div>
<p>Now, what happens in practice, is the following:</p>
<ol class="arabic simple">
<li><p>Check bit 1 and record 0 if its is false and 1 if it is true</p></li>
<li><p>Check bits 2,4,8,9 and 12 and return their sum</p></li>
<li><p>if output of 2) is larger than zero (second line above) return 1 else return 2</p></li>
<li><p>if output of 1) is 1 return 1 else return output of 3)</p></li>
</ol>
</li>
<li><p>Creating a mask file
Create a simple mask containing 1 for pixels of interest and 0 for background:
The equation in words: if your pixel value equals 0 then set it to 0, otherwise to 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc in_image out_image
1 //note that here we want to define our mask called out_image to consist of 1 band
#1 0 = 1 0 ?
</pre></div>
</div>
</li>
<li><p>Including a mask file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc −um in mask in_image out_image //here the option
    // −um defining the mask file is added to the command
2
#1 #2 +
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="section" id="oft-chdet-bash">
<h4>oft-chdet.bash<a class="headerlink" href="#oft-chdet-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id103">
<h5>NAME<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-chdet.bash</span></code> - automated change detection.</p>
</div>
<div class="section" id="id104">
<h5>SYNOPSIS<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-chdet.bash &lt;input1&gt;&lt;input2&gt;&lt;output&gt;&lt;nodata value&gt;[threshold]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>&lt;input1&gt; Input raster 1 (with extension).</p></li>
<li><p>&lt;input2&gt; Input raster 2 (with extension).</p></li>
<li><p>&lt;output&gt; A raster consisting of binary values (0 or 1) indicating pixels of likely change between the two dates. Values of 1 indicate change. Values of 0 indicate no-change.</p></li>
<li><p>&lt;nodata value&gt; Value indicating no-data within the image.</p></li>
<li><p>[threshold] Default 0.99. Specifies the threshold value of the cumulative frequency distribution (of the resulting Chi-square layer…see Reference below) above which pixels are identified as changed. Higher threshold values indicate more stringent limits for detecting changes and, thus, produce less changed area than lower thresholds. Threshold values must be specified as a proportion using 0.XX notation.</p></li>
</ul>
</div>
<div class="section" id="id105">
<h5>DESCRIPTION<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h5>
<p>This tool performs automated change detection between 2 input images. The script uses the Iteratively Re-weighted Multivariate Alteration Detection (MAD) algorithm (Canty and Nielsen, 2008). Input imagery must have the same format, extent, resolution, number of bands and type of data.</p>
</div>
<div class="section" id="reference">
<h5>REFERENCE<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h5>
<ol class="upperalpha simple" start="13">
<li><ol class="upperalpha simple" start="10">
<li><p>Canty and A. A. Nielsen (2008), Automatic radiometric normalization of multitemporal satellite imagery with the iteratively re-weighted MAD transformation RSE 112(3), 1025-1036.</p></li>
</ol>
</li>
</ol>
</div>
<div class="section" id="id106">
<h5>EXAMPLE<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h5>
<p>To automatically find changes between a Landsat image from year 2000 and 2005 using a threshold of 0.85:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−chdet.bash landsat00.tif landsat05.tif change00_05.tif 0 0.85</span>
</pre></div>
</div>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-chdet.bash</span></code>
Identify changed areas between year 2000 and 2012 using Landsat imagery using <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> and <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code>.</p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Unpack the data. Now we run <code class="code docutils literal notranslate"><span class="pre">oft-chdet.bash</span></code> to do the automated change detection using the input Landsat data:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−chdet.bash landsat_t1.tif landsat_t2.tif change_0012.tif 0 0.85</span>
</pre></div>
</div>
<p>Output includes the following:</p>
<ul class="simple">
<li><p>A file beginning with <code class="code docutils literal notranslate"><span class="pre">imad-[name</span> <span class="pre">of</span> <span class="pre">outfile].tif</span></code>. This file contains the raw results of the IMAD process, one for each input band and the chi-squared layer (see Reference).</p></li>
<li><p>The specified output file: This file contains 1’s and 0’s; 1’s indicate areas of change and 0’s indicate areas of no change.</p></li>
</ul>
</div>
</div>
<div class="section" id="oft-clip-pl">
<h4>oft-clip.pl<a class="headerlink" href="#oft-clip-pl" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id107">
<h5>NAME<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h5>
<p>oft-clip.pl - subsets an input image using the extent, pixels size and projection of a reference image.</p>
</div>
<div class="section" id="id108">
<h5>SYNOPSIS<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-clip.pl &lt;reference&gt;&lt;input&gt;&lt;output&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id109">
<h5>DESCRIPTION<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h5>
<p>The straight forward tool <code class="code docutils literal notranslate"><span class="pre">oft-clip.pl</span></code> subsets an input image using the extension, pixel size and projection of the reference image.</p>
</div>
<div class="section" id="id110">
<h5>EXAMPLE<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-clip.pl</span></code>
Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Reproject, clip and re-sample the MODIS image (resolution 230 m, lat/long) to the projection, extent and pixel size of the Landsat tile (resolution 30m, UTM 35)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−clip.pl images/landsat.tif images/vcf−2010.tif results/vcf−clip.tif</span>
</pre></div>
</div>
<p>Visualize the results in QGIS</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qgis images/landsat_t1.tif results/vcf−clip.tif</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-combine-images-bash">
<h4>oft-combine-images.bash<a class="headerlink" href="#oft-combine-images-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id111">
<h5>NAME<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-combine-images.bash</span></code> - combines 2 images into one.</p>
</div>
<div class="section" id="id112">
<h5>SYNOPSIS<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-combine-images.bash &lt;-a first image&gt;&lt;-b second image&gt;&lt;-m first image mask&gt;&lt;-s second mask&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-a</span></code> First image = Better image, whose area is used whenever possible</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-b</span></code> Second image = Image to be used elsewhere</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-m</span></code> First image mask = 0/1 mask indicating bad areas on first image with 0</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-s</span></code> Second mask = 0/1 mask indicating bad areas on second image with 0</p></li>
</ul>
</div>
<div class="section" id="id113">
<h5>DESCRIPTION<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Can be used to merge same-day Landsat images (adjacent) or two gap-fill results (stack)</p></li>
<li><p>Takes as input the images and their masks</p></li>
<li><p>Masks for same-day can be prepared with <code class="code docutils literal notranslate"><span class="pre">oft-trim-mask.bash</span></code> and for gap-fill with <code class="code docutils literal notranslate"><span class="pre">oft-prepare-images-for-gapfill.bash</span></code></p></li>
<li><p>All ok areas are taken from image 1, and image 2 is used elsewhere - Also produces a mask that indicates ok areas of the resulting combined image with 1</p></li>
<li><p>All material needs to be in same projection - Works with 6 or 7 band images</p></li>
</ul>
</div>
<div class="section" id="id114">
<h5>EXAMPLE<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-combine-images.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal_translate</span></code>, <code class="code docutils literal notranslate"><span class="pre">trim</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>In a first step we need to adjust the NR of bands of <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>
(7 bands) to the NR of bands of our second image (6 bands):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal_translate landsat_t1.tif landsat_t1_6bands.tif −b 1 −b 2 −b 3−b 4−b 5−b 6</span>
</pre></div>
</div>
<p>Then we need to prepare our mask files for each Landsat image using <code class="code docutils literal notranslate"><span class="pre">oft-trim</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−trim−mask.bash landsat_t1.tif</span>
<span class="go">oft−trim−mask.bash landsat_t2.tif</span>
</pre></div>
</div>
<p>Now we can run <code class="code docutils literal notranslate"><span class="pre">oft-combine-images.bash</span></code>. The output is automatically processed, in this case it is called stack <code class="code docutils literal notranslate"><span class="pre">landsat_t1_6bands_landsat_t2.tif</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−combine−images.bash −a landsat_t1_6bands.tif −b landsat_t2.tif −m landsat_t1_mask.tif −s landsat_t2_mask.tif</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-gapfill">
<h4>oft-gapfill<a class="headerlink" href="#oft-gapfill" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id115">
<h5>NAME<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-gapfill</span></code> - regression based gap and cloud filler.</p>
</div>
<div class="section" id="id116">
<h5>SYNOPSIS<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">oft</span><span class="o">-</span><span class="n">gapfill</span> <span class="o">&lt;-</span><span class="n">um</span> <span class="n">maskfile</span><span class="o">&gt;&lt;</span><span class="nb">input</span><span class="o">&gt;&lt;</span><span class="n">output</span><span class="o">&gt;</span><span class="p">[</span><span class="o">-</span><span class="n">la</span> <span class="n">nbrLargeAreaWin</span><span class="o">-</span> <span class="n">dows</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">nolocal</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">smooth</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">pm</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">da</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">sd</span> <span class="n">sampling</span> <span class="n">density</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">ws</span> <span class="n">WindowSize</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id117">
<h5>DESCRIPTION<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-gapfill</span></code> fills the gaps in an input image using locally built regression models. The models can be built:</p>
<ol class="arabic simple">
<li><p>separately for every gap pixel using a local model built using its adjacent pixels</p></li>
<li><p>for a given number of Large Area subsets</p></li>
<li><p>using both of these methods</p></li>
</ol>
<p>In the case 2), the option <code class="code docutils literal notranslate"><span class="pre">-la</span></code> followed by the number of requested Large Area (LA) subsets in X direction should be given. The total number of LA subsets is the square of the given parameter. If the user wants to use only Large Area models, the option <code class="code docutils literal notranslate"><span class="pre">-nolocal</span></code> should be used.</p>
<p>Maskfile, inputfile and outputfile are all required inputs. They may be in any of the formats understood by GDAL.</p>
<p>The input image is a stack of the Anchor image and the Filler image. The output values for Anchor are computed using Filler and the model. The input image bands should be organized as follows:</p>
<ul class="simple">
<li><p>band 1 to NBR bands/2 = Anchor image</p></li>
<li><p>bands NBR bands/2 + 1 to NBR bands = Filler image</p></li>
</ul>
<p>The mask file shows the locations of the gaps, areas which are suitable for collecting training data, and areas which should not be processed. The mask values are as follows:</p>
<ol class="arabic simple" start="0">
<li><p>do nothing (image margins)</p></li>
<li><p>fill these pixels (unusable data in anchor , good data in filler)</p></li>
<li><p>Collect training data for regression model (good data in both images)</p></li>
<li><p>Do nothing, i.e., use the original values (2 cases: good in anchor , bad in filler OR non−good in both images)</p></li>
</ol>
<p>The program performs 2 passes over the image:</p>
<ol class="arabic simple">
<li><p>collect the data to build the model</p></li>
<li><p>fill the gaps with Large Area models.</p></li>
</ol>
</div>
<div class="section" id="id118">
<h5>OPTIONS<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-la</span></code> (NbrLargeAreaWindows) = number of LA windows in X direction. The total number of LA windows will be the square of this parameter.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-da</span></code> (Do4allpixels) = use to built model to predict output value for every pixel of the anchor using the built models and the values of the Filler.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-sd</span></code> (sampling density) = sampling density used to build the LargeArea model. Value two, for example, would force the algorithm to collect every other valid pixel within the scene to be used in building the model.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-ws</span></code> (WindowSize) = size of the neighborhood from which the data for local model construction is collected</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The input image can be produced from 2 image stacks (for in- stance, 2 Erdas imagine composites consisting of 7 bands). The script stack2images.bash produces the composite. It can also be produced from HDF-images that are stored in folders. The script <code class="code docutils literal notranslate"><span class="pre">stack2images_hdf.bash</span></code> is for that purpose.</p>
</div>
<p>The model may be very sensitive to outliers. Therefore it is important that the mask value 2 is present only in location where both Anchor and Filler have valid data.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The stack and the mask must have been reprojected to the same geographical window and they do must have the same number of rows and cols</p>
</div>
</div>
<div class="section" id="id119">
<h5>EXAMPLE<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-gapfill</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal_translate</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-stack</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-calc</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>As <code class="code docutils literal notranslate"><span class="pre">oft-gapfill</span></code> only allows even number of bands, first, we need to adjust the number of bands of <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> (7 bands) <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code> (6 bands):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal_translate landsat_t1.tif landsat_t1_6bands.tif −b 1 −b 2 −b 3 −b 4 −b 5 −b 6</span>
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">oft-gapfill</span></code> takes as input an image stack of the <strong>anchor</strong> (<code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code>) and the <strong>filler</strong> (<code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−stack −o stack.tif landsat_t2.tif landsat_t1_6bands.tif</span>
</pre></div>
</div>
<p>Gapfilling with mask of the scan-line using a simple mask created with <code class="code docutils literal notranslate"><span class="pre">oft-calc</span></code> in two steps following these rules:</p>
<ul class="simple">
<li><p>if band1 or band6 are 0 put 1 (fill)</p></li>
<li><p>if band7 or band12 are 0 put 3 (do nothing)</p></li>
<li><p>else put 2 (collect training data for regression models)</p></li>
</ul>
<p><strong>Step 1:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc stack.tif tmp.tif
#1 0 = #6 0 = + 0 &gt; 2 1 ?
#7 0 = #12 0 = + 0 &gt; 2 3 ?
</pre></div>
</div>
<p><strong>Step 2:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−calc stack.tif tmp.tif
#1 0 = #6 0 = + 0 &gt; 2 1 ?
#7 0 = #12 0 = + 0 &gt; 2 3 ?
</pre></div>
</div>
<p>Now, use <code class="code docutils literal notranslate"><span class="pre">oft-gapfill</span></code> to fill the areas indicated as “1” in the mask: Output automatically processed: <code class="code docutils literal notranslate"><span class="pre">filled_la1_sd2_simplemask.tif</span></code></p>
<div class="figure align-default" id="id256">
<a class="reference internal image-reference" href="../_images/oft-gapfill_original.png"><img alt="../_images/oft-gapfill_original.png" src="../_images/oft-gapfill_original.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Original Landsat image.</span><a class="headerlink" href="#id256" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id257">
<a class="reference internal image-reference" href="../_images/oft-gapfill.png"><img alt="../_images/oft-gapfill.png" src="../_images/oft-gapfill.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Landsat imager after gap fill</span><a class="headerlink" href="#id257" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-ndvi-bash">
<h4>oft-ndvi.bash<a class="headerlink" href="#oft-ndvi-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id120">
<h5>NAME<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h5>
<p>oft-ndvi.bash - computes ndvi images.</p>
</div>
<div class="section" id="id121">
<h5>SYNOPSIS<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-ndvi.bash &lt;input&gt;&lt;output&gt;&lt;R band&gt;&lt;NIR band&gt; &lt;input&gt;&lt;output&gt;&lt;R band&gt;&lt;NIR band&gt;[mask]</span>
</pre></div>
</div>
</div>
<div class="section" id="id122">
<h5>DESCRIPTION<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-ndvi.bash</span></code> creates an NDVI image using (NIR-VIS) / (NIR + VIS).</p>
<p>Input data is an image stack. User gives the location of Red and NIR band (in regular Landsat TM/ETM 3 and 4). The Number of bands is not restricted.</p>
</div>
<div class="section" id="id123">
<h5>OPTION<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">[mask]</span></code> include a mask image into this process by using this option</p></li>
</ul>
</div>
<div class="section" id="id124">
<h5>EXAMPLE<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-ndvi.bash</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Run the command line for calculating the NDVI for your satellite image where <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> is your input image and NDVI <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> will be your NDVI output image. The numbers <code class="code docutils literal notranslate"><span class="pre">3</span></code> and <code class="code docutils literal notranslate"><span class="pre">4</span></code> refer to the band numbers for the VIS and NIR bands.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−ndvi.bash landsat_t1.tif ../results/NDVI landsat_t1.tif 3 4</span>
</pre></div>
</div>
<p>LoadNDVI <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> in QGIS and Check that all pixels of your NDVI image have the expected values between -1 and 1.</p>
<p>Here is an example of how the result looks like:</p>
<div class="figure align-default" id="id258">
<a class="reference internal image-reference" href="../_images/oft-ndvi.png"><img alt="../_images/oft-ndvi.png" src="../_images/oft-ndvi.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Zoomed view of the original Landsat image.</span><a class="headerlink" href="#id258" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id259">
<a class="reference internal image-reference" href="../_images/oft-ndvi_freak-out.png"><img alt="../_images/oft-ndvi_freak-out.png" src="../_images/oft-ndvi_freak-out.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Zoomed view of the NDVI-result using the ’freak out’ colour map in QGIS.</span><a class="headerlink" href="#id259" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-prepare-images-for-gapfill-bash">
<h4>oft-prepare-images-for-gapfill.bash<a class="headerlink" href="#oft-prepare-images-for-gapfill-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id125">
<h5>NAME<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-prepare-images-for-gapfill.bash</span></code> - prepares images and masks for <code class="code docutils literal notranslate"><span class="pre">oft-gapfill</span></code></p>
</div>
<div class="section" id="id126">
<h5>SYNOPSIS<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-prepare-images-for-gapfill.bash &lt;-a anchor&gt;&lt;-f filler&gt;&lt;-m an- chor mask&gt;&lt;-s second mask (filler)&gt;[-n ndvi threshold]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-a</span></code> Anchor = Better image, whose gaps are to be filled</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-f</span></code> Filler = Filler image</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-m</span></code> Anchor mask = 0/1 mask indicating bad areas on anchor image with 0</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-s</span></code> Second mask = 0/1 mask indicating bad areas on filler image with 0</p></li>
</ul>
</div>
<div class="section" id="id127">
<h5>OPTIONS<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-n</span></code> ndvi threshold = If images differ a lot, NDVI can be used to select only vegetated areas for mask</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Values like 0.4 or 0.5 are useful at some location on the world, check your particular situation yourself!</p>
</div>
</div>
<div class="section" id="id128">
<h5>DESCRIPTION<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-prepare-images-for-gapfill.bash</span></code>:</p>
<ul class="simple">
<li><p>Takes the anchor and filler images as input</p></li>
<li><p>Also their 0/1 masks indicating clouds and gaps are needed</p></li>
<li><p>NDVI can be used to threshold areas with low vegetation off from the models</p></li>
<li><p>At this point, bands 3 and 4 are used for NDVI computation</p></li>
<li><p>Otherwise, NBR of bands is not fixed, but must be equal in the input images</p></li>
<li><p>All material needs to be in same projection</p></li>
</ul>
</div>
<div class="section" id="id129">
<h5>EXAMPLE<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-prepare-images-for-gapfill.bash</span></code>.
Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>As <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> and <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code> differ in their number of bands we need to exclude band 7 from <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> by carrying out following procedure:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal translate landsat_t1.tif landsat_t1_6bands.tif −b 1 −b 2 −b 3 −b 4 −b 5 −b 6</span>
</pre></div>
</div>
<p>Let’s run <code class="code docutils literal notranslate"><span class="pre">oft-prepare-images-for-gapfill.bash</span></code> using following input:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−prepare−images−for−gapfill.bash −a landsat_t1_6bands.tif −f landsat_t2.tif −m landsat_t1_mask.tif −s landsat_t2_mask.tif</span>
</pre></div>
</div>
<p>Two output images mask are automatically processed: <code class="code docutils literal notranslate"><span class="pre">gapmask_landsat_t1_6bands_landsat_t2.tif</span></code> and <code class="code docutils literal notranslate"><span class="pre">goodarea_mask_landsat_t1_6bands_landsat_t2.tif</span></code>.</p>
<div class="figure align-default" id="id260">
<a class="reference internal image-reference" href="../_images/oft-gapmask.png"><img alt="../_images/oft-gapmask.png" src="../_images/oft-gapmask.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text"><code class="code docutils literal notranslate"><span class="pre">gapmask_landsat_t1_6bands_landsat_t2.tif</span></code></span><a class="headerlink" href="#id260" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id261">
<a class="reference internal image-reference" href="../_images/oft-goodarea.png"><img alt="../_images/oft-goodarea.png" src="../_images/oft-goodarea.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text"><code class="code docutils literal notranslate"><span class="pre">goodarea_mask_landsat_t1_6bands_landsat_t2.tif</span></code></span><a class="headerlink" href="#id261" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-reclass">
<h4>oft-reclass<a class="headerlink" href="#oft-reclass" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id130">
<h5>NAME<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-reclass</span></code> - is a reclassification program.</p>
</div>
<div class="section" id="id131">
<h5>SYNOPSIS<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-reclass [OPTIONS] &lt;inpufile&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id132">
<h5>DESCRIPTION<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-reclass</span></code> changes pixel values to alternative values given in a text file.
The <code class="code docutils literal notranslate"><span class="pre">maxval</span></code> parameter is used to allocate memory for the reclassification table. If it is not given in the command line, it will be asked interactively.
The reclassification text file should consist of records with input value (column 1) and one or more space separated output values. Thus, the structure could be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
<span class="mi">2</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="mi">3</span> <span class="mi">125</span> <span class="mi">100</span> <span class="mi">16</span>
<span class="mi">4</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">112</span>
</pre></div>
</div>
<p>The program asks, how many output values the user wants to produce for each input band. With the given example reclassification file, the user could produce a 3 band RGB image from a single band input file.</p>
</div>
<div class="section" id="id133">
<h5>OPTIONS<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−um</span></code> &lt;maskfile&gt;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−oi</span></code> &lt;output image&gt;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−maxval</span></code> &lt;maximum pixel value in input file&gt;</p></li>
</ul>
</div>
<div class="section" id="id134">
<h5>EXAMPLE<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-reclass</span></code></p>
<p>For this exercise we use a single band image <code class="code docutils literal notranslate"><span class="pre">images/forestc.tif</span></code> and a segmented image <code class="code docutils literal notranslate"><span class="pre">images/segments.tif</span></code> which you can also create
yourself using code:<cite>oft-seg</cite>.</p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<div class="section" id="example-1">
<h6>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h6>
<p>First you need to create a text file called input <code class="code docutils literal notranslate"><span class="pre">reclass.txt</span></code> that should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
<span class="mi">2</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">0</span>
<span class="mi">3</span> <span class="mi">125</span> <span class="mi">100</span> <span class="mi">16</span>
<span class="mi">4</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">112</span>
<span class="mi">5</span> <span class="mi">0</span> <span class="mi">225</span> <span class="mi">0</span>
<span class="mi">6</span> <span class="mi">225</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="mi">99</span> <span class="mi">200</span> <span class="mi">0</span> <span class="mi">200</span>
</pre></div>
</div>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-reclass</span></code> with Input: <code class="code docutils literal notranslate"><span class="pre">image/forestc.tif</span></code> and <code class="code docutils literal notranslate"><span class="pre">text/input_reclass.txt</span></code>; Output: code:<cite>results/reclassforestc.img</cite>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−reclass −oi results/reclassforestc.img txt/input_reclass.txt images/forestc.tif</span>
</pre></div>
</div>
<p>Then tool will ask you then for further information:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Input reclass file name?: txt/input_reclass.txt</span>
<span class="go">Nbr of out bands per input channel?: 3</span>
<span class="go">Col of input value ?: 1</span>
<span class="go">Col of output value 1: 2</span>
<span class="go">Col of output value 2: 3</span>
<span class="go">Col of output value 3: 4</span>
<span class="go">NODATA value?: 0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Open QGIS and load your the original imagery <code class="code docutils literal notranslate"><span class="pre">image/forestc.tif</span></code> (Colour map: <strong>Pseudocolour</strong>) and the result <code class="code docutils literal notranslate"><span class="pre">results/reclassforestc.img</span></code>. Click with the <strong>Identify Features</strong> Tool over the the different classes and see how they have changed after the reclassification:</p></li>
</ul>
<div class="figure align-default" id="id262">
<a class="reference internal image-reference" href="../_images/oft-reclass_original.png"><img alt="../_images/oft-reclass_original.png" src="../_images/oft-reclass_original.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Original input image <code class="code docutils literal notranslate"><span class="pre">forestc.tif</span></code>.</span><a class="headerlink" href="#id262" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id263">
<a class="reference internal image-reference" href="../_images/oft-reclass.png"><img alt="../_images/oft-reclass.png" src="../_images/oft-reclass.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Reclassified output raster <code class="code docutils literal notranslate"><span class="pre">reclassforestc.img</span></code>.</span><a class="headerlink" href="#id263" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="example-2">
<h6>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h6>
<p>Lets run <code class="code docutils literal notranslate"><span class="pre">oft-reclass</span></code> again with a different input image: Input: <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code>, input <code class="code docutils literal notranslate"><span class="pre">reclass.txt</span></code>; Output: <code class="code docutils literal notranslate"><span class="pre">reclass_min50.img</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−reclass −oi reclass_min50.img input_reclass.txt landsat_t1_min50.tif</span>
</pre></div>
</div>
<p>Again the tool will ask you for further information:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Input reclass file name?: input_reclass.txt</span>
<span class="go">Nbr of out bands per input channel?: 3</span>
<span class="go">Col of input value ?: 1</span>
<span class="go">Col of output value 1: 2</span>
<span class="go">Col of output value 2: 3</span>
<span class="go">Col of output value 3: 4</span>
<span class="go">NODATA value?: 0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Open QGIS and load your result image <code class="code docutils literal notranslate"><span class="pre">reclass_min50.img</span></code> and zoom into the top left corner. You can see that the original classes 1-6 and 99 of <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code> were reclassified the way we defined it in the lookup table input <code class="code docutils literal notranslate"><span class="pre">reclass.txt</span></code>.</p></li>
</ul>
<div class="figure align-default" id="id264">
<a class="reference internal image-reference" href="../_images/oft-reclass_ex2.png"><img alt="../_images/oft-reclass_ex2.png" src="../_images/oft-reclass_ex2.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Zoom into the top left corner of our final result <code class="code docutils literal notranslate"><span class="pre">reclass_min50.img</span></code>.</span><a class="headerlink" href="#id264" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="oft-shrink">
<h4>oft-shrink<a class="headerlink" href="#oft-shrink" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id135">
<h5>NAME<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-shrink</span></code> - to be combined with <code class="code docutils literal notranslate"><span class="pre">oft-trim</span></code>.</p>
</div>
</div>
<div class="section" id="oft-stack">
<h4>oft-stack<a class="headerlink" href="#oft-stack" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id136">
<h5>NAME<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-stack</span></code> - Create a multi-band image stack.</p>
</div>
<div class="section" id="id137">
<h5>SYNOPSIS<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-stack [-ot Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/CInt16/CInt32/ CFloat32/CFloat64] [-um &lt;maskfile&gt;] &lt;-o outputfile&gt;&lt;inputfiles&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−o</span></code> outputfile − The name of the output file to be created ( include extension)</p></li>
<li><p>input_files − A set of input files (include extension) , each separated by a space.</p></li>
</ul>
</div>
<div class="section" id="id138">
<h5>DESCRIPTION<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-stack</span></code> builds image stack from input files in the order of appearance.</p>
<ul class="simple">
<li><p>The output format of the first input file is used.</p></li>
<li><p>The images need to have exactly the same size (rows x cols)</p></li>
</ul>
<p><code class="code docutils literal notranslate"><span class="pre">oft-stack</span></code> builds an image stack from input files in the order of appearance. By default, the output format and type of the first input file is used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The images need to have exactly the same size (rows x cols)</p>
</div>
</div>
<div class="section" id="id139">
<h5>OPTIONS<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−ot</span></code> The output image type. By default, the first input image type is used.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−um</span></code> A mask file used to restrict the extent of the processing.</p></li>
</ul>
</div>
<div class="section" id="id140">
<h5>EXAMPLE<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h5>
<p>To create a 6-band stack of Landsat data from individual input rasters in .TIF format using wildcard:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−stack −o landsat7band.tif landsat*.tif</span>
</pre></div>
</div>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-stack</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-stack</span></code> using two input images <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> and <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code> to create the output stack image called <code class="code docutils literal notranslate"><span class="pre">stack.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−stack −o stack.tif landsat_t1.tif landsat_t2.tif</span>
</pre></div>
</div>
<p>Take a closer look at your output in QGIS and you will see that <code class="code docutils literal notranslate"><span class="pre">stack.tif</span></code> has 13 bands (<code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> contains 7 bands and <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code> 6 bands). Or print the raster information on your screen by typing in your terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdalinfo stack.tif</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-trim">
<h4>oft-trim<a class="headerlink" href="#oft-trim" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id141">
<h5>NAME<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h5>
<p>oft-trim - erosion filter producing binary output.</p>
</div>
<div class="section" id="id142">
<h5>SYNOPSIS<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-trim [-ws WindowSize] [-origval] -um &lt;maskfile&gt;&lt;inputfile&gt;&lt;outfile&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id143">
<h5>DESCRIPTION<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-trim</span></code> analyses the content of the spatial neighborhood of each pixel. If all the pixels within the window are less or equal to zero, output is zero. Else, output is one.</p>
</div>
<div class="section" id="id144">
<h5>OPTIONS<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-um</span></code> mask file</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-ws</span></code> window size</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-origval</span></code> original value</p></li>
</ul>
</div>
<div class="section" id="id145">
<h5>EXAMPLE<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-trim</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Lets run <code class="code docutils literal notranslate"><span class="pre">oft-trim</span></code> with the input file <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> with the option <code class="code docutils literal notranslate"><span class="pre">-ws</span></code> set to 3 to create the output file <code class="code docutils literal notranslate"><span class="pre">trim.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−trim −ws 3 landsat_t1.tif trim.tif</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Verify in QGIS that all the values of your output image are all trimmed to 1</p>
</div>
</div>
</div>
<div class="section" id="oft-trim-maks-bash">
<h4>oft-trim-maks.bash<a class="headerlink" href="#oft-trim-maks-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id146">
<h5>NAME<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-trim-maks.bash</span></code> - This script makes a 0/1 mask of a 6 or 7 band (Landsat) image.</p>
</div>
<div class="section" id="id147">
<h5>SYNOPSIS<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-trim-maks.bash oft-trim-maks.bash &lt;image&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id148">
<h5>DESCRIPTION<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-trim-maks.bash</span></code>:</p>
<ul class="simple">
<li><p>detects the margins and Landsat 7 missing scan lines, and trims the edges</p></li>
<li><p>accepts 6 or 7 band image</p></li>
<li><p>all values ¡= 0 are considered nodata</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output of <code class="code docutils literal notranslate"><span class="pre">oft-trim-maks.bash</span></code> can be further used for <code class="code docutils literal notranslate"><span class="pre">oft-combine-images.bash</span></code></p>
</div>
</div>
<div class="section" id="id149">
<h5>EXAMPLE<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-trim-mask.bash</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Lets run <code class="code docutils literal notranslate"><span class="pre">oft-trim-mask.bash</span></code> using <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code>. Automatically processed output: <code class="code docutils literal notranslate"><span class="pre">landsat_t2_mask.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−trim−mask.bash landsat_t2.tif</span>
</pre></div>
</div>
<p>Verify in QGIS your our result if the mask pixel values are 1 or 0.</p>
<div class="figure align-default" id="id265">
<a class="reference internal image-reference" href="../_images/oft-trim-mask_original.png"><img alt="../_images/oft-trim-mask_original.png" src="../_images/oft-trim-mask_original.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Original image <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code> with visible gaps in QGIS</span><a class="headerlink" href="#id265" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id266">
<a class="reference internal image-reference" href="../_images/oft-trim-mask.png"><img alt="../_images/oft-trim-mask.png" src="../_images/oft-trim-mask.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Output <code class="code docutils literal notranslate"><span class="pre">landsat_t2_mask.tif</span></code> using the Pseudo-colour colour map in QGIS</span><a class="headerlink" href="#id266" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="statistics">
<h3>STATISTICS<a class="headerlink" href="#statistics" title="Permalink to this headline">¶</a></h3>
<div class="section" id="oft-ascstat-awk">
<h4>oft-ascstat.awk<a class="headerlink" href="#oft-ascstat-awk" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id150">
<h5>NAME<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-ascstat.awk</span></code> - computes basic statistics for a space separated text file.</p>
</div>
<div class="section" id="id151">
<h5>SYNOPSIS<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-ascstat.awk &lt;input file&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id152">
<h5>DESCRIPTION<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-ascstat.awk</span></code> computes basic statistics for a given input file or <code class="code docutils literal notranslate"><span class="pre">stdin</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please not that the data must be provided as space separated!</p>
</div>
</div>
<div class="section" id="id153">
<h5>EXAMPLE<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-ascstat.awk</span></code>
Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>The script <code class="code docutils literal notranslate"><span class="pre">oft-ascstat.awk</span></code> computes basic statistics for our space separate input file <code class="code docutils literal notranslate"><span class="pre">sample_landuse.txt</span></code>:</p>
<p>..code-block:: console</p>
<blockquote>
<div><p>head sample_landuse.txt</p>
</div></blockquote>
<table class="table">
<colgroup>
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pixel id</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
<th class="head"><p>class</p></th>
<th class="head"><p>band1</p></th>
<th class="head"><p>band2</p></th>
<th class="head"><p>band3</p></th>
<th class="head"><p>band4</p></th>
<th class="head"><p>band5</p></th>
<th class="head"><p>band6</p></th>
<th class="head"><p>band7</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>10557.00</p></td>
<td><p>772650.00</p></td>
<td><p>−2404770.00</p></td>
<td><p>5.00</p></td>
<td><p>53.00</p></td>
<td><p>26.00</p></td>
<td><p>28.00</p></td>
<td><p>54.00</p></td>
<td><p>81.00</p></td>
<td><p>131.00</p></td>
<td><p>39.00</p></td>
</tr>
<tr class="row-odd"><td><p>94788.00</p></td>
<td><p>773490.00</p></td>
<td><p>−2431680.00</p></td>
<td><p>1.00</p></td>
<td><p>51.00</p></td>
<td><p>24.00</p></td>
<td><p>25.00</p></td>
<td><p>45.00</p></td>
<td><p>65.00</p></td>
<td><p>127.00</p></td>
<td><p>33.00</p></td>
</tr>
<tr class="row-even"><td><p>201536.00</p></td>
<td><p>774750.00</p></td>
<td><p>−2439390.00</p></td>
<td><p>1.00</p></td>
<td><p>54.00</p></td>
<td><p>25.00</p></td>
<td><p>27.00</p></td>
<td><p>50.00</p></td>
<td><p>71.00</p></td>
<td><p>130.00</p></td>
<td><p>35.00</p></td>
</tr>
<tr class="row-odd"><td><p>8531.00</p></td>
<td><p>771450.00</p></td>
<td><p>−2431110.00</p></td>
<td><p>1.00</p></td>
<td><p>47.00</p></td>
<td><p>21.00</p></td>
<td><p>18.00</p></td>
<td><p>37.00</p></td>
<td><p>48.00</p></td>
<td><p>126.00</p></td>
<td><p>21.00</p></td>
</tr>
<tr class="row-even"><td><p>123374.00</p></td>
<td><p>774150.00</p></td>
<td><p>−2433990.00</p></td>
<td><p>1.00</p></td>
<td><p>54.00</p></td>
<td><p>24.00</p></td>
<td><p>30.00</p></td>
<td><p>35.00</p></td>
<td><p>75.00</p></td>
<td><p>132.00</p></td>
<td><p>42.00</p></td>
</tr>
<tr class="row-odd"><td><p>97345.00</p></td>
<td><p>776220.00</p></td>
<td><p>−2431950.00</p></td>
<td><p>1.00</p></td>
<td><p>52.00</p></td>
<td><p>23.00</p></td>
<td><p>24.00</p></td>
<td><p>42.00</p></td>
<td><p>60.00</p></td>
<td><p>131.00</p></td>
<td><p>30.00</p></td>
</tr>
<tr class="row-even"><td><p>199041.00</p></td>
<td><p>773190.00</p></td>
<td><p>−2439120.00</p></td>
<td><p>1.00</p></td>
<td><p>51.00</p></td>
<td><p>23.00</p></td>
<td><p>23.00</p></td>
<td><p>52.00</p></td>
<td><p>58.00</p></td>
<td><p>130.00</p></td>
<td><p>28.00</p></td>
</tr>
<tr class="row-odd"><td><p>144276.00</p></td>
<td><p>775860.00</p></td>
<td><p>−2435400.00</p></td>
<td><p>1.00</p></td>
<td><p>49.00</p></td>
<td><p>22.00</p></td>
<td><p>21.00</p></td>
<td><p>45.00</p></td>
<td><p>59.00</p></td>
<td><p>125.00</p></td>
<td><p>30.00</p></td>
</tr>
<tr class="row-even"><td><p>180961.00</p></td>
<td><p>772680.00</p></td>
<td><p>−2437890.00</p></td>
<td><p>1.00</p></td>
<td><p>49.00</p></td>
<td><p>21.00</p></td>
<td><p>21.00</p></td>
<td><p>36.00</p></td>
<td><p>61.00</p></td>
<td><p>126.00</p></td>
<td><p>28.00</p></td>
</tr>
<tr class="row-odd"><td><p>185386.00</p></td>
<td><p>772410.00</p></td>
<td><p>−2438190.00</p></td>
<td><p>1.00</p></td>
<td><p>49.00</p></td>
<td><p>21.00</p></td>
<td><p>18.00</p></td>
<td><p>43.00</p></td>
<td><p>51.00</p></td>
<td><p>126.00</p></td>
<td><p>22.00</p></td>
</tr>
</tbody>
</table>
<p>Lets run <code class="code docutils literal notranslate"><span class="pre">oft-ascstat.awk</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−ascstat.awk sample_landuse.txt
</pre></div>
</div>
<p>Result is printed on screen:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go"> Col     Min       Max         Avg        Std</span>
<span class="go">1   4923      220664.0  116318.43   6345.83</span>
<span class="go">2   736440    787020.0  771921.0    798.10</span>
<span class="go">3   −2448000  −2403090  −2431097.6  1035.67</span>
<span class="go">4   1.0       25.0      2.844444    0.519269</span>
<span class="go">5   44.00     69.0      53.455556   0.491606</span>
<span class="go">6   19.0      37.0      24.82       0.383203</span>
<span class="go">7   16.0      48.0      27.02       0.691350</span>
<span class="go">8   34.0      62.0      46.74       0.711611</span>
<span class="go">9   42.0      103.0     69.455      1.450889</span>
<span class="go">10  124.0     136.0     129.43      0.252272</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-avg">
<h4>oft-avg<a class="headerlink" href="#oft-avg" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id154">
<h5>NAME<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h5>
<p>oft-avg - computes zone/segment averages and standard deviations.</p>
</div>
<div class="section" id="id155">
<h5>SYNOPSIS<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-avg -i &lt;input&gt;-o &lt;output&gt;[-ot Byte/Int16/UInt16/UInt32/Int32 /Float32/Float64] [-h help]</span>
</pre></div>
</div>
</div>
<div class="section" id="id156">
<h5>DESCRIPTION<a class="headerlink" href="#id156" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-avg</span></code> computes zone/segment averages and standard deviations.</p>
<ul class="simple">
<li><p>It produces two output files: an output image and a text file.</p></li>
<li><p>You need to give at least the input image file (-i option), the output image (-o) and the mask file (-um).</p></li>
<li><p>In the output image, each pixel gets assigned the average/standard deviation for the zone/segment it belonged to.</p></li>
<li><p>The output format in the text file is: ID number pixels avgband1…avgbandN.</p></li>
</ul>
</div>
<div class="section" id="id157">
<h5>OPTION<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">[-std]</span></code> - The program computes and prints out also the std’s (as extra bands in the output image and extra columns in the text file)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-ot</span> <span class="pre">Byte/Int16/UInt16/UInt32/Int32/Float32/Float64]</span></code> - output data type</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-h</span> <span class="pre">help]</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the benefit of users that are running scripts using the older version based on order of data files instead of options <code class="code docutils literal notranslate"><span class="pre">-i</span></code>, <code class="code docutils literal notranslate"><span class="pre">-o</span></code> and <code class="code docutils literal notranslate"><span class="pre">-um</span></code>, the program can still be used that way</p>
</div>
</div>
<div class="section" id="id158">
<h5>EXAMPLE<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-avg</span></code></p>
<p>Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-avg</span></code> with input: <code class="code docutils literal notranslate"><span class="pre">images/landsat_t1.tif</span></code>, output: <code class="code docutils literal notranslate"><span class="pre">results/oftavg.tif</span></code>, mask: <code class="code docutils literal notranslate"><span class="pre">images/segments.tif</span></code>.</p>
<p>The output text file will be named as the output image plus “.txt” (in this case <code class="code docutils literal notranslate"><span class="pre">oftavg.tif.txt</span></code>).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−avg −i images/landsat_t1.tif −o results/oftavg.tif −um images/segments.tif</span>
</pre></div>
</div>
<p>Print the first 10 lines of the output text file in terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head results/oftavg.tif.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Nb Pixels</p></th>
<th class="head"><p>Avg Band1</p></th>
<th class="head"><p>Avg Band2</p></th>
<th class="head"><p>Avg Band3</p></th>
<th class="head"><p>Avg Band4</p></th>
<th class="head"><p>Avg Band5</p></th>
<th class="head"><p>Avg Band6</p></th>
<th class="head"><p>Avg Band7</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>135</p></td>
<td><p>49.051852</p></td>
<td><p>20.081481</p></td>
<td><p>18.370370</p></td>
<td><p>36.785185</p></td>
<td><p>46.674074</p></td>
<td><p>126.059259</p></td>
<td><p>20.192593</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>54</p></td>
<td><p>49.351852</p></td>
<td><p>20.370370</p></td>
<td><p>18.407407</p></td>
<td><p>37.500000</p></td>
<td><p>46.555556</p></td>
<td><p>125.925926</p></td>
<td><p>19.870370</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>76</p></td>
<td><p>48.578947</p></td>
<td><p>19.828947</p></td>
<td><p>17.710526</p></td>
<td><p>36.657895</p></td>
<td><p>43.881579</p></td>
<td><p>125.907895</p></td>
<td><p>18.881579</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>194</p></td>
<td><p>49.005155</p></td>
<td><p>20.077320</p></td>
<td><p>18.268041</p></td>
<td><p>37.530928</p></td>
<td><p>46.000000</p></td>
<td><p>125.670103</p></td>
<td><p>19.721649</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>221</p></td>
<td><p>49.090498</p></td>
<td><p>20.176471</p></td>
<td><p>18.574661</p></td>
<td><p>37.542986</p></td>
<td><p>47.565611</p></td>
<td><p>125.728507</p></td>
<td><p>20.339367</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>82</p></td>
<td><p>48.878049</p></td>
<td><p>20.304878</p></td>
<td><p>18.695122</p></td>
<td><p>37.243902</p></td>
<td><p>48.097561</p></td>
<td><p>125.597561</p></td>
<td><p>20.780488</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>53</p></td>
<td><p>48.886792</p></td>
<td><p>20.056604</p></td>
<td><p>18.339623</p></td>
<td><p>37.207547</p></td>
<td><p>45.698113</p></td>
<td><p>125.698113</p></td>
<td><p>19.396226</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>120</p></td>
<td><p>48.991667</p></td>
<td><p>20.216667</p></td>
<td><p>18.583333</p></td>
<td><p>36.908333</p></td>
<td><p>47.200000</p></td>
<td><p>126.041667</p></td>
<td><p>20.283333</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>154</p></td>
<td><p>48.980519</p></td>
<td><p>19.993506</p></td>
<td><p>18.389610</p></td>
<td><p>32.474026</p></td>
<td><p>45.000000</p></td>
<td><p>125.987013</p></td>
<td><p>20.337662</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>150</p></td>
<td><p>49.540000</p></td>
<td><p>20.220000</p></td>
<td><p>18.853333</p></td>
<td><p>32.260000</p></td>
<td><p>47.233333</p></td>
<td><p>125.973333</p></td>
<td><p>21.433333</p></td>
</tr>
</tbody>
</table>
<p>Open the output file <code class="code docutils literal notranslate"><span class="pre">results/oftavg.tif</span></code> in QGIS. Use Identify Features that can be chosen form the top bar and click on the image. The window Identify Results should pop up and with the average value for each band for that zone/segment:
Band1 49
Band2 21
Band3 20
Band4 41
Band5 50
Band6 126
Band7 22</p>
<p>If you also choose to output standard deviations, the columns of the output files will be as follows:</p>
<ul class="simple">
<li><ol class="arabic simple">
<li><p>ID (value for zone/segment)</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>Number of pixels</p></li>
</ol>
</li>
<li><p>3-9. Average value of band1, band2, … band7</p></li>
<li><p>10-16. Standard deviation of band1, band2, … band7</p></li>
</ul>
<p>For the raster file:</p>
<ul class="simple">
<li><p>band1 - band7: average for band1, band2, … band7</p></li>
<li><p>band8 - band14: standard deviation for band1, band2, … band7</p></li>
</ul>
</div>
</div>
<div class="section" id="oft-countpix-pl">
<h4>oft-countpix.pl<a class="headerlink" href="#oft-countpix-pl" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id159">
<h5>NAME<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-countpix.pl</span></code> - counts number of pixel with, below or above a specific value.</p>
</div>
<div class="section" id="id160">
<h5>SYNOPSIS<a class="headerlink" href="#id160" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-countpix.pl &lt;input&gt;&lt;value&gt;[-b/-v/-a [band]]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>input&gt; is a raster image</p></li>
<li><p>&lt;value&gt; is an real number. If not precised, <code class="code docutils literal notranslate"><span class="pre">oft-countpix.pl</span></code> gives the total number of pixels. If value is below the min or above the max of the image, a warning is given</p></li>
</ul>
</div>
<div class="section" id="id161">
<h5>OPTION<a class="headerlink" href="#id161" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-v</span></code> count all pixels with value value (default)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-b</span></code> count all pixels below value</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-a</span></code> count all pixels above value</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[band]</span></code> number of the band. Default is Band 1</p></li>
</ul>
</div>
<div class="section" id="id162">
<h5>DESCRIPTION<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-countpix.pl</span></code> counts the number of pixels within an image with (default), below or above (options) a specific value.</p>
</div>
<div class="section" id="id163">
<h5>EXAMPLE<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-avg</span></code> Open your working directory using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Usage of <code class="code docutils literal notranslate"><span class="pre">oft-countpix.pl</span></code> using the input image <code class="code docutils literal notranslate"><span class="pre">forestc.tif</span></code> with pixel value of 33:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−countpix.pl images/forestc.tif 33</span>
<span class="go">oft−countpix.pl images/forestc.tif 33 −a</span>
</pre></div>
</div>
<p>Usage of <code class="code docutils literal notranslate"><span class="pre">oft-countpix.pl</span></code> using the input image <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> with value 50, counting all pixels below, in band 4:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−countpix.pl images/landsat_t1.tif 50 −b 4</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-crossvalidate">
<h4>oft-crossvalidate<a class="headerlink" href="#oft-crossvalidate" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id164">
<h5>NAME<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-crossvalidate</span></code> - computes RMSE and bias estimates for knn via leave-one-out cross-validation.</p>
</div>
<div class="section" id="id165">
<h5>SYNOPSIS<a class="headerlink" href="#id165" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-crossvalidate &lt;-i data-file&gt;&lt;-k val&gt;&lt;-v col&gt;&lt;-bands val&gt;[-dw {1/2/3}] [-x col] [-y col] [-id col] [-norm] [-mindist val] [-maxdist val] [-dem col thres] [-lu col]</span>
</pre></div>
</div>
</div>
<div class="section" id="id166">
<h5>DESCRIPTION<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-crossvalidate</span></code> is a Program for carrying out a leave-one-out cross-validation using nearest neighbor estimation.</p>
<ul class="simple">
<li><p>You need to give at least the data file, number of neighbors (k), the column for your variable and NBR of bands.</p></li>
<li><p>Bands must be located after all other variables.</p></li>
<li><p>Program is terminated if the spatial neighborhood restriction leaves too few (less than k) potential neighbors</p></li>
<li><p>A possible order of data is: id, variable, x-coordinate, y-coordinate, feature1…featureN.</p></li>
<li><p>Values must be separated with a space or tab.</p></li>
<li><p>Prints the average, RMSE and bias on screen.</p></li>
<li><p>Saves original value, estimate and difference in an output file. If id or x and y are given, they are printed out as well.</p></li>
<li><p>If the id is indicated in the command line, the id’s of 10 nearest neighbors are printed into the output file.</p></li>
</ul>
</div>
<div class="section" id="id167">
<h5>OPTIONS<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">[-dw]</span></code> - weight the nearest neighbor data with:
1.  equal (default)
2.  inverse distance
3.  squared inverse distance weights.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-x]</span></code> - column for x-coordinate</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-y]</span></code> - column for y-coordinate</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-id]</span></code> - column for id</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-norm]</span></code> - normalize the image features (default is no normalization)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-mindist]</span></code> - use a minimum spatial distance (e.g. 1000). Observations closer than that, based on the x and y-coordinates are not allowed as neighbors (default is no restriction)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-maxdist]</span></code> - use a maximum spatial distance (e.g. 50000). Observations outside that radius are not allowed as neighbors (default is no restriction)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-dem]</span></code> - column and threshold value (e.g. 1000) for restriction of neighbors in vertical direction (default is no restriction)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-lu]</span></code> - column used for stratification of the data. If given, separate RMSEs are computed for each class indicated in the column (default is no stratification)</p></li>
</ul>
</div>
<div class="section" id="id168">
<h5>EXAMPLE<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h5>
<p>Input data: download for this exercise <code class="code docutils literal notranslate"><span class="pre">sample_landuse.txt</span></code>. You might have created it already in exercise <code class="code docutils literal notranslate"><span class="pre">oft-sample-within-polys.bash</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>The script <code class="code docutils literal notranslate"><span class="pre">oft-crossvalidate</span></code> prints the average, RMSE and bias on screen using the input data file <code class="code docutils literal notranslate"><span class="pre">sample_landuse.txt</span></code>. Lets take a closer look at the input file (space or tab separate):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head sample_landuse.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pixel_id</p></th>
<th class="head"><p>c</p></th>
<th class="head"><p>y</p></th>
<th class="head"><p>class</p></th>
<th class="head"><p>band1</p></th>
<th class="head"><p>band2</p></th>
<th class="head"><p>band3</p></th>
<th class="head"><p>band4</p></th>
<th class="head"><p>band5</p></th>
<th class="head"><p>band6</p></th>
<th class="head"><p>band7</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>10557.00</p></td>
<td><p>772650.00</p></td>
<td><p>−2404770.00</p></td>
<td><p>5.00</p></td>
<td><p>53.00</p></td>
<td><p>26.00</p></td>
<td><p>28.00</p></td>
<td><p>54.00</p></td>
<td><p>81.00</p></td>
<td><p>131.00</p></td>
<td><p>39.00</p></td>
</tr>
<tr class="row-odd"><td><p>94788.00</p></td>
<td><p>773490.00</p></td>
<td><p>−2431680.00</p></td>
<td><p>1.00</p></td>
<td><p>51.00</p></td>
<td><p>24.00</p></td>
<td><p>25.00</p></td>
<td><p>45.00</p></td>
<td><p>65.00</p></td>
<td><p>127.00</p></td>
<td><p>33.00</p></td>
</tr>
<tr class="row-even"><td><p>201536.00</p></td>
<td><p>774750.00</p></td>
<td><p>−2439390.00</p></td>
<td><p>1.00</p></td>
<td><p>54.00</p></td>
<td><p>25.00</p></td>
<td><p>27.00</p></td>
<td><p>50.00</p></td>
<td><p>71.00</p></td>
<td><p>130.00</p></td>
<td><p>35.00</p></td>
</tr>
<tr class="row-odd"><td><p>88531.00</p></td>
<td><p>771450.00</p></td>
<td><p>−2431110.00</p></td>
<td><p>1.00</p></td>
<td><p>47.00</p></td>
<td><p>21.00</p></td>
<td><p>18.00</p></td>
<td><p>37.00</p></td>
<td><p>48.00</p></td>
<td><p>126.00</p></td>
<td><p>21.00</p></td>
</tr>
<tr class="row-even"><td><p>123374.00</p></td>
<td><p>774150.00</p></td>
<td><p>−2433990.00</p></td>
<td><p>1.00</p></td>
<td><p>54.00</p></td>
<td><p>24.00</p></td>
<td><p>30.00</p></td>
<td><p>35.00</p></td>
<td><p>75.00</p></td>
<td><p>132.00</p></td>
<td><p>42.00</p></td>
</tr>
<tr class="row-odd"><td><p>97345.00</p></td>
<td><p>776220.00</p></td>
<td><p>−2431950.00</p></td>
<td><p>1.00</p></td>
<td><p>52.00</p></td>
<td><p>23.00</p></td>
<td><p>24.00</p></td>
<td><p>42.00</p></td>
<td><p>60.00</p></td>
<td><p>131.00</p></td>
<td><p>30.00</p></td>
</tr>
<tr class="row-even"><td><p>199041.00</p></td>
<td><p>773190.00</p></td>
<td><p>−2439120.00</p></td>
<td><p>1.00</p></td>
<td><p>51.00</p></td>
<td><p>23.00</p></td>
<td><p>23.00</p></td>
<td><p>52.00</p></td>
<td><p>58.00</p></td>
<td><p>130.00</p></td>
<td><p>28.00</p></td>
</tr>
<tr class="row-odd"><td><p>144276.00</p></td>
<td><p>775860.00</p></td>
<td><p>−2435400.00</p></td>
<td><p>1.00</p></td>
<td><p>49.00</p></td>
<td><p>22.00</p></td>
<td><p>21.00</p></td>
<td><p>45.00</p></td>
<td><p>59.00</p></td>
<td><p>125.00</p></td>
<td><p>30.00</p></td>
</tr>
<tr class="row-even"><td><p>180961.00</p></td>
<td><p>772680.00</p></td>
<td><p>−2437890.00</p></td>
<td><p>1.00</p></td>
<td><p>49.00</p></td>
<td><p>21.00</p></td>
<td><p>21.00</p></td>
<td><p>36.00</p></td>
<td><p>61.00</p></td>
<td><p>126.00</p></td>
<td><p>28.00</p></td>
</tr>
<tr class="row-odd"><td><p>185386.00</p></td>
<td><p>772410.00</p></td>
<td><p>−2438190.00</p></td>
<td><p>1.00</p></td>
<td><p>49.00</p></td>
<td><p>21.00</p></td>
<td><p>18.00</p></td>
<td><p>43.00</p></td>
<td><p>51.00</p></td>
<td><p>126.00</p></td>
<td><p>22.00</p></td>
</tr>
</tbody>
</table>
<p>Lets run <code class="code docutils literal notranslate"><span class="pre">oft-crossvalidate</span></code> defining our inputfile with <code class="code docutils literal notranslate"><span class="pre">-i</span></code> in front, number of neighbors <code class="code docutils literal notranslate"><span class="pre">-k</span></code> 10, <code class="code docutils literal notranslate"><span class="pre">-v</span></code> defines the column of the variable we want use - only to exemplify the tool we use column 1 containing the IDs as our input data has no additional column with values,
<code class="code docutils literal notranslate"><span class="pre">-bands</span></code> defines the number of bands, <code class="code docutils literal notranslate"><span class="pre">-x</span></code> defines to look up the x coordinates in column 2 and <code class="code docutils literal notranslate"><span class="pre">-y</span></code> defines to look up the y coordinates in column 3:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−crossvalidate −i sample landuse . txt −k 10 −v 1 −bands 7 −x 2 −y 3</span>
</pre></div>
</div>
<p>Result is printed on screen:
.. code-block:: console</p>
<blockquote>
<div><p>k = 10
normalize = 0
RMSE = 62255.181
Bias = 1367.027
Avg = 116318.433</p>
</div></blockquote>
<p>Further, an output file <code class="code docutils literal notranslate"><span class="pre">sample_landuse_out.txt</span></code> is created:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head sample_landuse_out.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
<th class="head"><p>pixel_id</p></th>
<th class="head"><p>estimate</p></th>
<th class="head"><p>difference (col3 - col4)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>772650.000</p></td>
<td><p>−2404770.000</p></td>
<td><p>10557.00</p></td>
<td><p>103566.30</p></td>
<td><p>−93009.30</p></td>
</tr>
<tr class="row-odd"><td><p>773490.000</p></td>
<td><p>−2431680.000</p></td>
<td><p>94788.00</p></td>
<td><p>128938.00</p></td>
<td><p>−34150.00</p></td>
</tr>
<tr class="row-even"><td><p>774750.000</p></td>
<td><p>−2439390.000</p></td>
<td><p>201536.00</p></td>
<td><p>110055.80</p></td>
<td><p>91480.20</p></td>
</tr>
<tr class="row-odd"><td><p>771450.000</p></td>
<td><p>−2431110.000</p></td>
<td><p>88531.00</p></td>
<td><p>127395.30</p></td>
<td><p>−38864.30</p></td>
</tr>
<tr class="row-even"><td><p>774150.000</p></td>
<td><p>−2433990.000</p></td>
<td><p>123374.00</p></td>
<td><p>102471.90</p></td>
<td><p>20902.10</p></td>
</tr>
<tr class="row-odd"><td><p>776220.000</p></td>
<td><p>−2431950.000</p></td>
<td><p>97345.00</p></td>
<td><p>123907.80</p></td>
<td><p>−26562.80</p></td>
</tr>
<tr class="row-even"><td><p>773190.000</p></td>
<td><p>−2439120.000</p></td>
<td><p>199041.00</p></td>
<td><p>105271.30</p></td>
<td><p>93769.70</p></td>
</tr>
<tr class="row-odd"><td><p>775860.000</p></td>
<td><p>−2435400.000</p></td>
<td><p>144276.00</p></td>
<td><p>130783.50</p></td>
<td><p>13492.50</p></td>
</tr>
<tr class="row-even"><td><p>772680.000</p></td>
<td><p>−2437890.000</p></td>
<td><p>180961.00</p></td>
<td><p>127426.40</p></td>
<td><p>53534.60</p></td>
</tr>
<tr class="row-odd"><td><p>772410.000</p></td>
<td><p>−2438190.000</p></td>
<td><p>185386.00</p></td>
<td><p>126411.20</p></td>
<td><p>58974.80</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="oft-extr">
<h4>oft-extr<a class="headerlink" href="#oft-extr" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id169">
<h5>NAME<a class="headerlink" href="#id169" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-extr</span></code> - extracts pixel values from an image into a text file.</p>
</div>
<div class="section" id="id170">
<h5>SYNOPSIS<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-extr [-nomd] [-mm] [-avg] [-var] [-ws n] [-o outfile] &lt;pointfile&gt;&lt;img- file&gt;-um &lt;maskfile&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id171">
<h5>DESCRIPTION<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">oft-extr</span></code> computes zone/segment averages and standard deviations.</p></li>
<li><p>It produces two output files: an output image and a text file.</p></li>
<li><p>You need to give at least the input image file (<code class="code docutils literal notranslate"><span class="pre">-i</span></code> option), the output image (<code class="code docutils literal notranslate"><span class="pre">-o</span></code>) and the maskfile (<code class="code docutils literal notranslate"><span class="pre">-um</span></code>).</p></li>
<li><p>In the output image, each pixel gets assigned the average/standard deviation for the zone/segment it belonged to.</p></li>
<li><p>The output format in the text file is: ID number pixels avgband1…avgbandN.</p></li>
</ul>
</div>
<div class="section" id="id172">
<h5>OPTION<a class="headerlink" href="#id172" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-nomd</span></code> do not print metadata</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-mm</span></code> extract min and max values</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-avg</span></code> extract average values</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-var</span></code> extract variances</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-ws</span></code> size (n) of extraction window (odd)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-o</span></code> output file name</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that the default behavior is to extract window’s center pixel values.</p>
</div>
</div>
<div class="section" id="id173">
<h5>EXAMPLE<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-extr</span></code>
Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Let’s run <code class="code docutils literal notranslate"><span class="pre">oft-extr</span></code> using the input image <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> with the point text file <code class="code docutils literal notranslate"><span class="pre">training.txt</span></code>. Output: <code class="code docutils literal notranslate"><span class="pre">extr.txt</span></code> with no extra option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−extr −o extr.txt txt/training.txt images/landsat_t1.tif</span>
</pre></div>
</div>
<p>You will be asked:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">X−coord. column in input file?: 2</span>
<span class="go">Y−coord. column in input file?: 3</span>
</pre></div>
</div>
<p>Now we take a closer look at our result:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head extr.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pixel_id</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
<th class="head"><p>col coord</p></th>
<th class="head"><p>row coord</p></th>
<th class="head"><p>bands1</p></th>
<th class="head"><p>bands2</p></th>
<th class="head"><p>bands3</p></th>
<th class="head"><p>bands4</p></th>
<th class="head"><p>bands5</p></th>
<th class="head"><p>bands6</p></th>
<th class="head"><p>bands7</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2456134.00</p></td>
<td><p>50.00</p></td>
<td><p>3441.00</p></td>
<td><p>52.00</p></td>
<td><p>24.00</p></td>
<td><p>24.00</p></td>
<td><p>51.00</p></td>
<td><p>65.00</p></td>
<td><p>128.00</p></td>
<td><p>29.00</p></td>
</tr>
<tr class="row-odd"><td><p>2.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2455134.00</p></td>
<td><p>50.00</p></td>
<td><p>3408.00</p></td>
<td><p>59.00</p></td>
<td><p>27.00</p></td>
<td><p>34.00</p></td>
<td><p>47.00</p></td>
<td><p>82.00</p></td>
<td><p>132.00</p></td>
<td><p>46.00</p></td>
</tr>
<tr class="row-even"><td><p>3.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2454134.00</p></td>
<td><p>50.00</p></td>
<td><p>3374.00</p></td>
<td><p>57.00</p></td>
<td><p>28.00</p></td>
<td><p>33.00</p></td>
<td><p>50.00</p></td>
<td><p>82.00</p></td>
<td><p>131.00</p></td>
<td><p>44.00</p></td>
</tr>
<tr class="row-odd"><td><p>4.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2453134.00</p></td>
<td><p>50.00</p></td>
<td><p>3341.00</p></td>
<td><p>55.00</p></td>
<td><p>26.00</p></td>
<td><p>29.00</p></td>
<td><p>52.00</p></td>
<td><p>72.00</p></td>
<td><p>129.00</p></td>
<td><p>34.00</p></td>
</tr>
<tr class="row-even"><td><p>5.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2452134.00</p></td>
<td><p>50.00</p></td>
<td><p>3308.00</p></td>
<td><p>60.00</p></td>
<td><p>28.00</p></td>
<td><p>35.00</p></td>
<td><p>54.00</p></td>
<td><p>87.00</p></td>
<td><p>129.00</p></td>
<td><p>45.00</p></td>
</tr>
<tr class="row-odd"><td><p>6.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2451134.00</p></td>
<td><p>50.00</p></td>
<td><p>3274.00</p></td>
<td><p>47.00</p></td>
<td><p>19.00</p></td>
<td><p>18.00</p></td>
<td><p>37.00</p></td>
<td><p>47.00</p></td>
<td><p>124.00</p></td>
<td><p>20.00</p></td>
</tr>
<tr class="row-even"><td><p>7.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2450134.00</p></td>
<td><p>50.00</p></td>
<td><p>3241.00</p></td>
<td><p>46.00</p></td>
<td><p>19.00</p></td>
<td><p>17.00</p></td>
<td><p>38.00</p></td>
<td><p>44.00</p></td>
<td><p>123.00</p></td>
<td><p>18.00</p></td>
</tr>
<tr class="row-odd"><td><p>8.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2449134.00</p></td>
<td><p>50.00</p></td>
<td><p>3208.00</p></td>
<td><p>59.00</p></td>
<td><p>28.00</p></td>
<td><p>33.00</p></td>
<td><p>60.00</p></td>
<td><p>84.00</p></td>
<td><p>129.00</p></td>
<td><p>43.00</p></td>
</tr>
<tr class="row-even"><td><p>9.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2448134.00</p></td>
<td><p>50.00</p></td>
<td><p>3174.00</p></td>
<td><p>66.00</p></td>
<td><p>34.00</p></td>
<td><p>42.00</p></td>
<td><p>57.00</p></td>
<td><p>98.00</p></td>
<td><p>130.00</p></td>
<td><p>56.00</p></td>
</tr>
<tr class="row-odd"><td><p>10.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2447134.00</p></td>
<td><p>50.00</p></td>
<td><p>3141.00</p></td>
<td><p>52.00</p></td>
<td><p>23.00</p></td>
<td><p>21.00</p></td>
<td><p>53.00</p></td>
<td><p>61.00</p></td>
<td><p>127.00</p></td>
<td><p>27.00</p></td>
</tr>
</tbody>
</table>
<p>Let’s use the option <code class="code docutils literal notranslate"><span class="pre">-mm</span></code> and <code class="code docutils literal notranslate"><span class="pre">-ws</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−extr−ws3−mm−oextrmm.txt training.txt landsatt1.tif</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head extr mm.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pixel_id</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>y</p></th>
<th class="head"><p>min1</p></th>
<th class="head"><p>min2</p></th>
<th class="head"><p>min3</p></th>
<th class="head"><p>min4</p></th>
<th class="head"><p>min5</p></th>
<th class="head"><p>min6</p></th>
<th class="head"><p>min7</p></th>
<th class="head"><p>max1</p></th>
<th class="head"><p>max2</p></th>
<th class="head"><p>max3</p></th>
<th class="head"><p>max4</p></th>
<th class="head"><p>max5</p></th>
<th class="head"><p>max6</p></th>
<th class="head"><p>maw7</p></th>
<th class="head"><p>center1</p></th>
<th class="head"><p>center2</p></th>
<th class="head"><p>center3</p></th>
<th class="head"><p>center4</p></th>
<th class="head"><p>center(</p></th>
<th class="head"><p>center6</p></th>
<th class="head"><p>center7</p></th>
<th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2456134.00</p></td>
<td><p>50.00</p></td>
<td><p>3441.00</p></td>
<td><p>52.00</p></td>
<td><p>24.00</p></td>
<td><p>24.00</p></td>
<td><p>51.00</p></td>
<td><p>65.00</p></td>
<td><p>128.00</p></td>
<td><p>29.00</p></td>
<td><p>50.00</p></td>
<td><p>23.00</p></td>
<td><p>24.00</p></td>
<td><p>46.00</p></td>
<td><p>64.00</p></td>
<td><p>128.00</p></td>
<td><p>28.00</p></td>
<td><p>52.00</p></td>
<td><p>24.00</p></td>
<td><p>25.00</p></td>
<td><p>53.00</p></td>
<td><p>70.00</p></td>
<td><p>129.00</p></td>
<td><p>32.00</p></td>
</tr>
<tr class="row-odd"><td><p>2.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2455134.00</p></td>
<td><p>50.00</p></td>
<td><p>3408.00</p></td>
<td><p>59.00</p></td>
<td><p>27.00</p></td>
<td><p>34.00</p></td>
<td><p>47.00</p></td>
<td><p>82.00</p></td>
<td><p>132.00</p></td>
<td><p>46.00</p></td>
<td><p>56.00</p></td>
<td><p>27.00</p></td>
<td><p>33.00</p></td>
<td><p>46.00</p></td>
<td><p>80.00</p></td>
<td><p>131.00</p></td>
<td><p>44.00</p></td>
<td><p>59.00</p></td>
<td><p>31.00</p></td>
<td><p>39.00</p></td>
<td><p>49.00</p></td>
<td><p>90.00</p></td>
<td><p>132.00</p></td>
<td><p>53.00</p></td>
</tr>
<tr class="row-even"><td><p>3.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2454134.00</p></td>
<td><p>50.00</p></td>
<td><p>3374.00</p></td>
<td><p>57.00</p></td>
<td><p>28.00</p></td>
<td><p>33.00</p></td>
<td><p>50.00</p></td>
<td><p>82.00</p></td>
<td><p>131.00</p></td>
<td><p>44.00</p></td>
<td><p>54.00</p></td>
<td><p>27.00</p></td>
<td><p>29.00</p></td>
<td><p>48.00</p></td>
<td><p>77.00</p></td>
<td><p>130.00</p></td>
<td><p>41.00</p></td>
<td><p>58.00</p></td>
<td><p>29.00</p></td>
<td><p>36.00</p></td>
<td><p>52.00</p></td>
<td><p>82.00</p></td>
<td><p>131.00</p></td>
<td><p>44.00</p></td>
</tr>
<tr class="row-odd"><td><p>4.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2453134.00</p></td>
<td><p>50.00</p></td>
<td><p>3341.00</p></td>
<td><p>55.00</p></td>
<td><p>26.00</p></td>
<td><p>29.00</p></td>
<td><p>52.00</p></td>
<td><p>72.00</p></td>
<td><p>129.00</p></td>
<td><p>34.00</p></td>
<td><p>52.00</p></td>
<td><p>24.00</p></td>
<td><p>27.00</p></td>
<td><p>48.00</p></td>
<td><p>68.00</p></td>
<td><p>128.00</p></td>
<td><p>31.00</p></td>
<td><p>58.00</p></td>
<td><p>27.00</p></td>
<td><p>32.00</p></td>
<td><p>54.00</p></td>
<td><p>80.00</p></td>
<td><p>129.00</p></td>
<td><p>41.00</p></td>
</tr>
<tr class="row-even"><td><p>5.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2452134.00</p></td>
<td><p>50.00</p></td>
<td><p>3308.00</p></td>
<td><p>60.00</p></td>
<td><p>28.00</p></td>
<td><p>35.00</p></td>
<td><p>54.00</p></td>
<td><p>87.00</p></td>
<td><p>129.00</p></td>
<td><p>45.00</p></td>
<td><p>56.00</p></td>
<td><p>27.00</p></td>
<td><p>31.00</p></td>
<td><p>51.00</p></td>
<td><p>76.00</p></td>
<td><p>129.00</p></td>
<td><p>36.00</p></td>
<td><p>60.00</p></td>
<td><p>30.00</p></td>
<td><p>37.00</p></td>
<td><p>60.00</p></td>
<td><p>90.00</p></td>
<td><p>129.00</p></td>
<td><p>48.00</p></td>
</tr>
<tr class="row-odd"><td><p>6.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2451134.00</p></td>
<td><p>50.00</p></td>
<td><p>3274.00</p></td>
<td><p>47.00</p></td>
<td><p>19.00</p></td>
<td><p>18.00</p></td>
<td><p>37.00</p></td>
<td><p>47.00</p></td>
<td><p>124.00</p></td>
<td><p>20.00</p></td>
<td><p>45.00</p></td>
<td><p>19.00</p></td>
<td><p>17.00</p></td>
<td><p>37.00</p></td>
<td><p>45.00</p></td>
<td><p>124.00</p></td>
<td><p>18.00</p></td>
<td><p>49.00</p></td>
<td><p>20.00</p></td>
<td><p>19.00</p></td>
<td><p>38.00</p></td>
<td><p>48.00</p></td>
<td><p>125.00</p></td>
<td><p>21.00</p></td>
</tr>
<tr class="row-even"><td><p>7.00</p></td>
<td><p>730785.00</p></td>
<td><p>−2450134.00</p></td>
<td><p>50.00</p></td>
<td><p>3241.00</p></td>
<td><p>46.00</p></td>
<td><p>19.00</p></td>
<td><p>17.00</p></td>
<td><p>38.00</p></td>
<td><p>44.00</p></td>
<td><p>123.00</p></td>
<td><p>18.00</p></td>
<td><p>46.00</p></td>
<td><p>19.00</p></td>
<td><p>17.00</p></td>
<td><p>37.00</p></td>
<td><p>40.00</p></td>
<td><p>123.00</p></td>
<td><p>17.00</p></td>
<td><p>49.00</p></td>
<td><p>20.00</p></td>
<td><p>18.00</p></td>
<td><p>39.00</p></td>
<td><p>46.00</p></td>
<td><p>124.00</p></td>
<td><p>21.00</p></td>
</tr>
</tbody>
</table>
<p>Using option <code class="code docutils literal notranslate"><span class="pre">-csv</span></code> and <code class="code docutils literal notranslate"><span class="pre">-ws</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−extr −ws 3 −csv −o extr_3.txt training.txt landsat_t1.tif</span>
<span class="go">head extr_3.txt</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>1.000000</p></td>
<td><p>730785.000000</p></td>
<td><p>−2456134.000000</p></td>
<td><p>50.000000</p></td>
<td><p>3441.000000</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>2.000000</p></td>
<td><p>730785.000000</p></td>
<td><p>−2455134.000000</p></td>
<td><p>50.000000</p></td>
<td><p>3408.000000</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-odd"><td><p>3.000000</p></td>
<td><p>730785.000000</p></td>
<td><p>−2454134.000000</p></td>
<td><p>50.000000</p></td>
<td><p>3374.000000</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>4.000000</p></td>
<td><p>730785.000000</p></td>
<td><p>−2453134.000000</p></td>
<td><p>50.000000</p></td>
<td><p>3341.000000</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-odd"><td><p>5.000000</p></td>
<td><p>730785.000000</p></td>
<td><p>−2452134.000000</p></td>
<td><p>50.000000</p></td>
<td><p>3308.000000</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>6.000000</p></td>
<td><p>730785.000000</p></td>
<td><p>−2451134.000000</p></td>
<td><p>50.000000</p></td>
<td><p>3274.000000</p></td>
<td><p>…</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="oft-his">
<h4>oft-his<a class="headerlink" href="#oft-his" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id174">
<h5>NAME<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h5>
<p>oft-his - computes image histogram by segments.</p>
</div>
<div class="section" id="id175">
<h5>SYNOPSIS<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-his -i &lt;infile&gt;-o &lt;outfile&gt;[-um maskfile] [-hr/-compact][-maxval val]</span>
</pre></div>
</div>
</div>
<div class="section" id="id176">
<h5>OPTIONS<a class="headerlink" href="#id176" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−i</span></code> specify input image file</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−o</span></code> specify output text file</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−um</span></code> specify mask file</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−hr</span></code> use human readable output format −compact = use compact output format</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−maxval</span></code> give maximum input value</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−h</span></code> print out more help</p></li>
</ul>
</div>
<div class="section" id="id177">
<h5>DESCRIPTION<a class="headerlink" href="#id177" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-his</span></code> extracts histograms for the different bands of an input image to an output text file.</p>
<ul class="simple">
<li><p>You need to give at least the input image file <code class="code docutils literal notranslate"><span class="pre">-i</span></code> option and the output file <code class="code docutils literal notranslate"><span class="pre">-o</span></code></p></li>
<li><p>Typically, you also give a mask file <code class="code docutils literal notranslate"><span class="pre">-um</span></code>. Each mask value gets own histogram, except 0 which is treated as nodata</p></li>
<li><p>If no mask file is given, a common histogram is computed for whole image</p></li>
<li><p>Maximum input value needs to be given to allocate enough memory for the histogram table. If the <code class="code docutils literal notranslate"><span class="pre">maxval</span></code> parameter is not given in the command line, it will be asked. For example, for a 8 Bit Landsat image, the maximum value parameter would be 255</p></li>
<li><p>The output format is: mask value, frequency of mask value and number of band.</p></li>
</ul>
<p>The rest of the columns values are frequencies for each image pixel value.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the benefit of users running scripts using the older version based on order of data files instead of options <code class="code docutils literal notranslate"><span class="pre">-i</span></code>, <code class="code docutils literal notranslate"><span class="pre">-o</span></code> and <code class="code docutils literal notranslate"><span class="pre">-um</span></code>, the program can still be used that way.</p>
</div>
</div>
<div class="section" id="id178">
<h5>EXAMPLE<a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h5>
<div class="section" id="typical-parameter-setting">
<h6>typical parameter setting<a class="headerlink" href="#typical-parameter-setting" title="Permalink to this headline">¶</a></h6>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−his −i input.img −o histogram.txt −um mask.img −hr −maxval 255</span>
</pre></div>
</div>
<p>The output file will contain NBR bands lines for every input mask value. The output format is: mask value, frequency of mask value and number of band; the rest of the columns values are frequencies for each image pixel values.</p>
<p>For example, in the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">657846</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span>
    <span class="mi">5</span> <span class="mi">205</span> <span class="mi">2166</span> <span class="mi">10162</span> <span class="mi">29145</span> <span class="mi">70813</span> <span class="mi">136848</span> <span class="mi">145398</span> <span class="mi">117541</span> <span class="mi">82955</span> <span class="mi">40937</span> <span class="mi">14060</span> <span class="mi">4255</span> <span class="mi">1618</span> <span class="mi">707</span> <span class="mi">345</span> <span class="mi">208</span> <span class="mi">140</span> <span class="mi">103</span> <span class="mi">83</span>
    <span class="mi">48</span> <span class="mi">42</span> <span class="mi">15</span> <span class="mi">17</span> <span class="mi">13</span> <span class="mi">6</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
    <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
    <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
    <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">1</span></code> is the mask value</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">657846</span></code> is the frequency of mask value 1</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">1</span></code> is the number of band</p></li>
<li><p>Every following value is the frequency of value <code class="code docutils literal notranslate"><span class="pre">x</span></code> in input image masked with mask value <code class="code docutils literal notranslate"><span class="pre">1</span></code>. Here <code class="code docutils literal notranslate"><span class="pre">x</span></code> is in [0, 255]</p></li>
<li><p>An alternative output format is provided by the <code class="code docutils literal notranslate"><span class="pre">-compact</span></code> option:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">657846</span> <span class="mi">1</span> <span class="mi">12</span> <span class="mi">1</span> <span class="mi">46</span> <span class="mi">1</span> <span class="mi">47</span> <span class="mi">5</span> <span class="mi">48</span> <span class="mi">205</span> <span class="mi">49</span> <span class="mi">2166</span> <span class="mi">50</span> <span class="mi">10162</span> <span class="mi">51</span> <span class="mi">29145</span> <span class="mi">52</span> <span class="mi">70813</span> <span class="mi">53</span> <span class="mi">136848</span> <span class="mi">54</span> <span class="mi">145398</span> <span class="mi">55</span> <span class="mi">117541</span> <span class="mi">56</span>
    <span class="mi">82955</span> <span class="mi">57</span> <span class="mi">40937</span> <span class="mi">58</span> <span class="mi">14060</span> <span class="mi">59</span> <span class="mi">4255</span> <span class="mi">60</span> <span class="mi">1618</span> <span class="mi">61</span> <span class="mi">707</span> <span class="mi">62</span> <span class="mi">345</span> <span class="mi">63</span> <span class="mi">208</span> <span class="mi">64</span> <span class="mi">140</span> <span class="mi">65</span> <span class="mi">103</span> <span class="mi">66</span> <span class="mi">83</span> <span class="mi">67</span> <span class="mi">48</span> <span class="mi">68</span> <span class="mi">42</span> <span class="mi">69</span> <span class="mi">15</span>
    <span class="mi">70</span> <span class="mi">17</span> <span class="mi">71</span> <span class="mi">13</span> <span class="mi">72</span> <span class="mi">6</span> <span class="mi">73</span> <span class="mi">3</span> <span class="mi">74</span> <span class="mi">2</span> <span class="mi">76</span> <span class="mi">3</span> <span class="mi">77</span> <span class="mi">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">1</span></code> is the mask value</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">657846</span></code> is the frequency of mask value 1</p></li>
<li><p>Every following value is a consists of value-frequency pairs. That is, entry <code class="code docutils literal notranslate"><span class="pre">12</span> <span class="pre">1</span></code> means that 1 pixel of value 12 was found within the region determined by mask value 1.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="oft-mm">
<h4>oft-mm<a class="headerlink" href="#oft-mm" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id179">
<h5>NAME<a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-mm</span></code> - computes minimum and maximum values for each band of the input file.</p>
</div>
<div class="section" id="id180">
<h5>SYNOPSIS<a class="headerlink" href="#id180" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-mm [-um maskfile] &lt;input&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id181">
<h5>DESCRIPTION<a class="headerlink" href="#id181" title="Permalink to this headline">¶</a></h5>
<p>For the input image, the command provides inline minimum and maximum values per band.</p>
</div>
<div class="section" id="id182">
<h5>OPTION<a class="headerlink" href="#id182" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">[um</span> <span class="pre">maskfile]</span></code> - zero values in the maskfile will be excluded in the calculation (maskfile extent must match inputfile extent)</p></li>
</ul>
</div>
<div class="section" id="id183">
<h5>EXAMPLE<a class="headerlink" href="#id183" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-mm</span></code>, <code class="code docutils literal notranslate"><span class="pre">grep</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-mm</span></code> with input: <code class="code docutils literal notranslate"><span class="pre">images/landsat_t1.tif</span></code>:</p>
<p>..code-block:: console</p>
<blockquote>
<div><p>oft−mm images/landsat−t1.tif</p>
</div></blockquote>
<p>The output will be printed in the terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">argc 2</span>
<span class="go">Driver : GTiff/GeoTIFF Size is 3000, 3500 Corner Coordinates :</span>
<span class="go">Upper Left (729285.000 , −2352885.000)</span>
<span class="go">Lower Left (729285.000 , −2457885.000)</span>
<span class="go">Upper Right (819285.000 , −2352885.000)</span>
<span class="go">Lower Right (819285.000 , −2457885.000)</span>
<span class="go">Center (774285.000 , −2405385.000)</span>
<span class="go">Done</span>
<span class="go">Band 1 min = 20.000000</span>
<span class="go">Band 1 max = 255.000000</span>
<span class="go">Band 2 min = 1.000000</span>
<span class="go">Band 2 max = 255.000000</span>
<span class="go">Band 3 min = 1.000000</span>
<span class="go">Band 3 max = 208.000000</span>
<span class="go">Band 4 min = 8.000000</span>
<span class="go">Band 4 max = 255.000000</span>
<span class="go">Band 5 min = 5.000000</span>
<span class="go">Band 5 max = 255.000000</span>
<span class="go">Band 6 min = 112.000000</span>
<span class="go">Band 6 max = 195.000000</span>
<span class="go">Band 7 min = 1.000000</span>
<span class="go">Band 7 max = 255.000000</span>
<span class="go">DoneClose</span>
</pre></div>
</div>
<p>If you are only interested in the min and max values for a certain band, you can use the <code class="code docutils literal notranslate"><span class="pre">grep</span></code> command. Example for band 1:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−mm images/landsat_t1.tif | grep &quot;Band 1&quot;</span>
</pre></div>
</div>
<p>Will return</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Band 1 min = 20.000000</span>
<span class="go">Band 1 max = 255.000000</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-segstat">
<h4>oft-segstat<a class="headerlink" href="#oft-segstat" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id184">
<h5>NAME<a class="headerlink" href="#id184" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-segstat</span></code> - output segments shape and spectral statistics in a text file.</p>
</div>
<div class="section" id="id185">
<h5>SYNOPSIS<a class="headerlink" href="#id185" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-segstat [-std] [-shape] &lt;maskfile&gt;&lt;input&gt;&lt;output&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id186">
<h5>DESCRIPTION<a class="headerlink" href="#id186" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-segstat</span></code> Extracts segment level shape (size, bounding box, # edge pixels) and spectral (averages and standard deviations) to a text file.</p>
<p>Maskfile is an image consisting of pixels with integer values. Pixels having value 0 are not processed. For all other mask values the statistics are reported separately.</p>
<p>The output: The basic usage outputs the following space separated columns:</p>
<ul class="simple">
<li><p>Segment ID</p></li>
<li><p>Size</p></li>
<li><p>(3+n) Segment averages pixel values for all n input image bands</p></li>
</ul>
</div>
<div class="section" id="id187">
<h5>OPTIONS<a class="headerlink" href="#id187" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-std</span></code> adds standard deviations for all input bands in the end of each record.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-shape</span></code> changes the output format to following:</p>
<ul>
<li><p>Segment ID</p></li>
<li><p>Size</p></li>
<li><p># of neighbors</p></li>
<li><p>xmin</p></li>
<li><p>xmax</p></li>
<li><p>ymin</p></li>
<li><p>ymax</p></li>
<li><p># edge pixels</p></li>
<li><p>(9 + n) Segment averages pixel values for all n input image bands</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This script can also be used after <code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code>.</p>
</div>
</div>
<div class="section" id="id188">
<h5>EXAMPLE<a class="headerlink" href="#id188" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-segstat</span></code>. For this exercise we use the Landsat imagery <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>, <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>. Further you need to run <code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code> in a first step to calculated the segmentation file <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<div class="section" id="regular-use">
<h6>Regular use<a class="headerlink" href="#regular-use" title="Permalink to this headline">¶</a></h6>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-segstat</span></code> with Input: <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>, <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−segstat landsat_t1_min50.tif landsat_t1.tif segstats.txt
</pre></div>
</div>
<p>The tool will ask you now to define the NoData value which we will
set to 0:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Please give NODATA value : 0 //in this step you only need to type the number 0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Lets take a look at the first 10 lines of our result <code class="code docutils literal notranslate"><span class="pre">segstats.txt</span></code>:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head segstats.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">49</span> <span class="mi">60</span> <span class="mf">49.183333</span> <span class="mf">20.366667</span> <span class="mf">18.883333</span> <span class="mf">36.800000</span> <span class="mf">47.866667</span> <span class="mf">126.500000</span> <span class="mf">20.700000</span>
<span class="mi">89</span> <span class="mi">56</span> <span class="mf">47.714286</span> <span class="mf">20.053571</span> <span class="mf">18.428571</span> <span class="mf">37.125000</span> <span class="mf">49.035714</span> <span class="mf">125.571429</span> <span class="mf">20.660714</span>
<span class="mi">26</span> <span class="mi">132</span> <span class="mf">49.310606</span> <span class="mf">20.295455</span> <span class="mf">18.651515</span> <span class="mf">35.840909</span> <span class="mf">46.863636</span> <span class="mf">126.833333</span> <span class="mf">20.257576</span>
<span class="mi">220</span> <span class="mi">54</span> <span class="mf">51.203704</span> <span class="mf">22.629630</span> <span class="mf">23.666667</span> <span class="mf">38.592593</span> <span class="mf">58.777778</span> <span class="mf">131.370370</span> <span class="mf">28.685185</span>
<span class="mi">231</span> <span class="mi">132</span> <span class="mf">56.416667</span> <span class="mf">27.325758</span> <span class="mf">34.606061</span> <span class="mf">43.409091</span> <span class="mf">82.636364</span> <span class="mf">134.871212</span> <span class="mf">45.454545</span>
<span class="mi">236</span> <span class="mi">55</span> <span class="mf">46.200000</span> <span class="mf">19.272727</span> <span class="mf">16.290909</span> <span class="mf">41.963636</span> <span class="mf">39.927273</span> <span class="mf">124.654545</span> <span class="mf">15.000000</span>
<span class="mi">7</span> <span class="mi">53</span> <span class="mf">48.886792</span> <span class="mf">20.056604</span> <span class="mf">18.339623</span> <span class="mf">37.207547</span> <span class="mf">45.698113</span> <span class="mf">125.698113</span> <span class="mf">19.396226</span>
<span class="mi">52</span> <span class="mi">105</span> <span class="mf">49.580952</span> <span class="mf">20.866667</span> <span class="mf">19.666667</span> <span class="mf">38.161905</span> <span class="mf">53.990476</span> <span class="mf">126.361905</span> <span class="mf">22.847619</span>
<span class="mi">114</span> <span class="mi">51</span> <span class="mf">46.960784</span> <span class="mf">19.470588</span> <span class="mf">16.235294</span> <span class="mf">41.294118</span> <span class="mf">37.725490</span> <span class="mf">124.764706</span> <span class="mf">15.039216</span>
<span class="mi">138</span> <span class="mi">55</span> <span class="mf">45.690909</span> <span class="mf">19.272727</span> <span class="mf">16.054545</span> <span class="mf">40.672727</span> <span class="mf">40.036364</span> <span class="mf">123.563636</span> <span class="mf">14.909091</span>
</pre></div>
</div>
<p>Explanation of the values of each column:</p>
<ul class="simple">
<li><p>Col1: Segment ID</p></li>
<li><p>Col2: Size</p></li>
<li><p>Col3 - Coln: Segment average pixel values of band3 - bandN</p></li>
</ul>
</div>
<div class="section" id="including-std">
<h6>including -std<a class="headerlink" href="#including-std" title="Permalink to this headline">¶</a></h6>
<p>Lets run <code class="code docutils literal notranslate"><span class="pre">oft-segstat</span></code> including the option of adding the standard deviation: Input: <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>, <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−segstat −std landsat_t1_min50.tif landsat_t1.tif segstats_std.txt</span>
</pre></div>
</div>
<p>Again, lets take a look at the first 10 lines of our result <code class="code docutils literal notranslate"><span class="pre">segstats_std.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head segstats_std.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">49</span> <span class="mi">60</span> <span class="mf">49.183333</span> <span class="mf">20.366667</span> <span class="mf">18.883333</span> <span class="mf">36.800000</span> <span class="mf">47.866667</span> <span class="mf">126.500000</span> <span class="mf">20.700000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">89</span> <span class="mi">56</span> <span class="mf">47.714286</span> <span class="mf">20.053571</span> <span class="mf">18.428571</span> <span class="mf">37.125000</span> <span class="mf">49.035714</span> <span class="mf">125.571429</span> <span class="mf">20.660714</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">26</span> <span class="mi">132</span> <span class="mf">49.310606</span> <span class="mf">20.295455</span> <span class="mf">18.651515</span> <span class="mf">35.840909</span> <span class="mf">46.863636</span> <span class="mf">126.833333</span> <span class="mf">20.257576</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">220</span> <span class="mi">54</span> <span class="mf">51.203704</span> <span class="mf">22.629630</span> <span class="mf">23.666667</span> <span class="mf">38.592593</span> <span class="mf">58.777778</span> <span class="mf">131.370370</span> <span class="mf">28.685185</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">231</span> <span class="mi">132</span> <span class="mf">56.416667</span> <span class="mf">27.325758</span> <span class="mf">34.606061</span> <span class="mf">43.409091</span> <span class="mf">82.636364</span> <span class="mf">134.871212</span> <span class="mf">45.454545</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">236</span> <span class="mi">55</span> <span class="mf">46.200000</span> <span class="mf">19.272727</span> <span class="mf">16.290909</span> <span class="mf">41.963636</span> <span class="mf">39.927273</span> <span class="mf">124.654545</span> <span class="mf">15.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">7</span> <span class="mi">53</span> <span class="mf">48.886792</span> <span class="mf">20.056604</span> <span class="mf">18.339623</span> <span class="mf">37.207547</span> <span class="mf">45.698113</span> <span class="mf">125.698113</span> <span class="mf">19.396226</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">52</span> <span class="mi">105</span> <span class="mf">49.580952</span> <span class="mf">20.866667</span> <span class="mf">19.666667</span> <span class="mf">38.161905</span> <span class="mf">53.990476</span> <span class="mf">126.361905</span> <span class="mf">22.847619</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">114</span> <span class="mi">51</span> <span class="mf">46.960784</span> <span class="mf">19.470588</span> <span class="mf">16.235294</span> <span class="mf">41.294118</span> <span class="mf">37.725490</span> <span class="mf">124.764706</span> <span class="mf">15.039216</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
<span class="mi">138</span> <span class="mi">55</span> <span class="mf">45.690909</span> <span class="mf">19.272727</span> <span class="mf">16.054545</span> <span class="mf">40.672727</span> <span class="mf">40.036364</span> <span class="mf">123.563636</span> <span class="mf">14.909091</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span> <span class="mf">0.000000</span>
</pre></div>
</div>
<p>Explanation of the values of each column:</p>
<ul class="simple">
<li><p>Col1: Segment ID</p></li>
<li><p>Col2: Size</p></li>
<li><p>Col3 - Col9: Segment average pixel values of band3 - band9 - Col10 - Col16: standard deviation value for each band</p></li>
</ul>
</div>
<div class="section" id="including-option-shape">
<h6>including option -shape<a class="headerlink" href="#including-option-shape" title="Permalink to this headline">¶</a></h6>
<p>For this exercise we want to create in a first step a mask file that is needed to define which pixels of the satellite image will be included in the calculation. In this case we exclude all pixels that were 0. Input: <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>, Output: <code class="code docutils literal notranslate"><span class="pre">landsat_t1_mask.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−calc landsat_t1.tif LT52_CUB00_mask.tif // create mask same dimension same location</span>
<span class="go">1</span>
<span class="gp">#</span><span class="m">1</span> <span class="nv">0</span> <span class="o">=</span> <span class="m">1</span> <span class="m">0</span> ?
</pre></div>
</div>
<p>Now we run the segmentation statistic not with the segmentation file we created before using <code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code>, but using a shapefile instead:</p>
<ul class="simple">
<li><p>Input: <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code>, <code class="code docutils literal notranslate"><span class="pre">landsat_t1_mask.tif</span></code>, <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code></p></li>
<li><p>Output: <code class="code docutils literal notranslate"><span class="pre">segstats_shp.txt</span></code></p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−segstat −shape landuse landsat_t1_mask.tif landsat_t1.tif segstats_shp.txt</span>
</pre></div>
</div>
<p>Again, lets take a look at our result <code class="code docutils literal notranslate"><span class="pre">segstats_shp.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head segstats_shp.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">10500000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">2999</span> <span class="mi">0</span> <span class="mi">3499</span> <span class="mi">6000</span> <span class="mf">48.742120</span> <span class="mf">21.032891</span> <span class="mf">19.848100</span> <span class="mf">41.126436</span> <span class="mf">50.192329</span> <span class="mf">126.019212</span> <span class="mf">21.810292</span>
</pre></div>
</div>
<p>Explanation of the values of each column:</p>
<ul class="simple">
<li><p>Col1 : Segment ID</p></li>
<li><p>Col2 : Size</p></li>
<li><p>Col3 : #of neighbors Col4 : xmin</p></li>
<li><p>Col5 : xmax</p></li>
<li><p>Col6 : ymin</p></li>
<li><p>Col7 : ymax</p></li>
<li><p>Col8 : # edge pixels</p></li>
<li><p>Col9: Segment average pixel values of band1 Col10: Segment average pixel value of band2</p></li>
<li><p>Coln: Segment average pixels valued of bandN</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="oft-stat">
<h4>oft-stat<a class="headerlink" href="#oft-stat" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id189">
<h5>NAME<a class="headerlink" href="#id189" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-stat</span></code> - computes segment statistics in a text file.</p>
</div>
<div class="section" id="id190">
<h5>SYNOPSIS<a class="headerlink" href="#id190" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-stat -i &lt;infile&gt;-o &lt;outfile&gt;[-um maskfile] [-mm] [-noavg] [- nostd] [-h help]</span>
</pre></div>
</div>
</div>
<div class="section" id="id191">
<h5>DESCRIPTION<a class="headerlink" href="#id191" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-stat</span></code> extracts segment level image statistics into a text file.</p>
<ul class="simple">
<li><p>Computes image statistics at segment level and outputs a text file.</p></li>
<li><p>The output format in the text file is: ID #pixels avgband1 …avgbandN stdband1 …stdbandN</p></li>
<li><p>You need to give at least the input image file (<code class="code docutils literal notranslate"><span class="pre">-i</span></code> option) and the output file (<code class="code docutils literal notranslate"><span class="pre">-o</span></code>)</p></li>
<li><p>Normally, you give also a maskfile (<code class="code docutils literal notranslate"><span class="pre">-um</span></code> maskfile) which is an image consisting of pixels with integer values:</p>
<ul>
<li><p>Pixels having value 0 are not processed.</p></li>
<li><p>For all other mask values the statistics are reported separately.</p></li>
</ul>
</li>
<li><p>When the <code class="code docutils literal notranslate"><span class="pre">-um</span></code> option is not used, statistics are a summary of all pixels in the image</p></li>
</ul>
</div>
<div class="section" id="id192">
<h5>OPTIONS<a class="headerlink" href="#id192" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-noavg</span></code> = program does not compute the averages</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-nostd</span></code> = program does not compute the std’s</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-mm</span></code> = program computes and prints out also minimum and maximum</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-h</span></code> = prints out help</p></li>
</ul>
</div>
<div class="section" id="note">
<h5>NOTE<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h5>
<p>For benefit of users running scripts using the older version based on order of data files instead of options <code class="code docutils literal notranslate"><span class="pre">-i</span></code>, <code class="code docutils literal notranslate"><span class="pre">-o</span></code> and <code class="code docutils literal notranslate"><span class="pre">-um</span></code>, the program can still be used that way.</p>
</div>
<div class="section" id="id193">
<h5>EXAMPLE<a class="headerlink" href="#id193" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-stat</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-stat</span></code> with input: <code class="code docutils literal notranslate"><span class="pre">images/landsat-t1.tif</span></code>, output: <code class="code docutils literal notranslate"><span class="pre">results/stats.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−stat −i images/landsat_t1.tif −o results/stats.txt</span>
</pre></div>
</div>
<p>Print the output in terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">less results/stats.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">10500000</span> <span class="mf">48.742120</span> <span class="mf">21.032891</span> <span class="mf">19.848100</span> <span class="mf">41.126436</span> <span class="mf">50.192329</span> <span class="mf">126.019212</span> <span class="mf">21.810292</span> <span class="mf">3.532883</span> <span class="mf">2.776924</span>
    <span class="mf">5.170575</span> <span class="mf">6.554972</span> <span class="mf">13.140675</span> <span class="mf">2.275625</span> <span class="mf">8.220984</span>
</pre></div>
</div>
<p>Explanation of values for each column:
-   Col1: ID
-   Col2: Number of pixels
-   Col3: Average value of band1
-   Col4 - col9: Average value of band2 - band7
-   Col10 - col16: Standard deviation of band1 - band7</p>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-stat</span></code> with input: <code class="code docutils literal notranslate"><span class="pre">images/landsat_t1.tif</span></code>, output: <code class="code docutils literal notranslate"><span class="pre">results/stats_mm.txt</span></code>, and the option <code class="code docutils literal notranslate"><span class="pre">-mm</span></code> to produce also minimum and maximum values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oft−stat −i images/landsat_t1.tif −o results/stats mm.txt −mm
</pre></div>
</div>
<p>Print the output in terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">less results/stats.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">10500000</span> <span class="mf">20.000000</span> <span class="mf">1.000000</span> <span class="mf">1.000000</span> <span class="mf">8.000000</span> <span class="mf">5.000000</span> <span class="mf">112.000000</span> <span class="mf">1.000000</span> <span class="mf">255.000000</span> <span class="mf">255.000000</span>
<span class="mf">208.000000</span> <span class="mf">255.000000</span> <span class="mf">255.000000</span> <span class="mf">195.000000</span> <span class="mf">255.000000</span> <span class="mf">48.742120</span> <span class="mf">21.032891</span> <span class="mf">19.848100</span> <span class="mf">41.126436</span> <span class="mf">50.192329</span>
<span class="mf">126.019212</span> <span class="mf">21.810292</span> <span class="mf">3.532883</span> <span class="mf">2.776924</span> <span class="mf">5.170575</span> <span class="mf">6.554972</span> <span class="mf">13.140675</span> <span class="mf">2.275625</span> <span class="mf">8.220984</span>
</pre></div>
</div>
<p>Explanation of values for each column:
-   Col1: ID (in this case one as no mask file has been given) - Col2: Number of pixels
-   Col3: Minimum value of band1
-   Col4 - col9: Minimum value of band2 - band7
-   Col10 - col16: Maximum value of band1 - band7
-   Col17 - col23: Average value of band1 - band7
-   Col24 - col30: Standard deviation of band1 - band7</p>
<p>Now we run oft-stat with input: <code class="code docutils literal notranslate"><span class="pre">images/landsat_t1.tif</span></code>, output: <code class="code docutils literal notranslate"><span class="pre">results/stats_mask.txt</span></code>; optional mask: <code class="code docutils literal notranslate"><span class="pre">images/segments.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−stat −i images/input.tif −o results/stats.txt −um images/segments.tif</span>
</pre></div>
</div>
<p>Print the first 10 lines of the output in terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head results/stats mask.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">49</span> <span class="mi">60</span> <span class="mf">49.183333</span> <span class="mf">20.366667</span> <span class="mf">18.883333</span> <span class="mf">36.800000</span> <span class="mf">47.866667</span> <span class="mf">126.500000</span> <span class="mf">20.700000</span> <span class="mf">0.929583</span> <span class="mf">0.551321</span> <span class="mf">0.640224</span> <span class="mf">1.054450</span> <span class="mf">1.890804</span> <span class="mf">0.504219</span> <span class="mf">1.046382</span>
<span class="mi">89</span> <span class="mi">56</span> <span class="mf">47.714286</span> <span class="mf">20.053571</span> <span class="mf">18.428571</span> <span class="mf">37.125000</span> <span class="mf">49.035714</span> <span class="mf">125.571429</span> <span class="mf">20.660714</span> <span class="mf">1.073893</span> <span class="mf">0.553325</span> <span class="mf">0.598700</span> <span class="mf">1.280092</span> <span class="mf">1.747354</span> <span class="mf">0.499350</span> <span class="mf">0.977507</span>
<span class="mi">26</span> <span class="mi">132</span> <span class="mf">49.310606</span> <span class="mf">20.295455</span> <span class="mf">18.651515</span> <span class="mf">35.840909</span> <span class="mf">46.863636</span> <span class="mf">126.833333</span> <span class="mf">20.257576</span> <span class="mf">0.989507</span> <span class="mf">0.490188</span> <span class="mf">0.552370</span> <span class="mf">0.799136</span> <span class="mf">1.763812</span> <span class="mf">0.481199</span> <span class="mf">1.088603</span>
<span class="mi">220</span> <span class="mi">54</span> <span class="mf">51.203704</span> <span class="mf">22.629630</span> <span class="mf">23.666667</span> <span class="mf">38.592593</span> <span class="mf">58.777778</span> <span class="mf">131.370370</span> <span class="mf">28.685185</span> <span class="mf">2.870669</span> <span class="mf">2.139444</span> <span class="mf">4.374023</span> <span class="mf">2.375333</span> <span class="mf">9.681078</span> <span class="mf">0.957518</span> <span class="mf">6.804061</span>
<span class="mi">231</span> <span class="mi">132</span> <span class="mf">56.416667</span> <span class="mf">27.325758</span> <span class="mf">34.606061</span> <span class="mf">43.409091</span> <span class="mf">82.636364</span> <span class="mf">134.871212</span> <span class="mf">45.454545</span> <span class="mf">1.644058</span> <span class="mf">1.207459</span> <span class="mf">2.153490</span> <span class="mf">1.689458</span> <span class="mf">4.386434</span> <span class="mf">2.786021</span> <span class="mf">3.416090</span>
<span class="mi">236</span> <span class="mi">55</span> <span class="mf">46.200000</span> <span class="mf">19.272727</span> <span class="mf">16.290909</span> <span class="mf">41.963636</span> <span class="mf">39.927273</span> <span class="mf">124.654545</span> <span class="mf">15.000000</span> <span class="mf">1.145038</span> <span class="mf">0.449467</span> <span class="mf">0.533081</span> <span class="mf">0.961550</span> <span class="mf">0.939948</span> <span class="mf">0.479899</span> <span class="mf">0.769800</span>
<span class="mi">7</span> <span class="mi">53</span> <span class="mf">48.886792</span> <span class="mf">20.056604</span> <span class="mf">18.339623</span> <span class="mf">37.207547</span> <span class="mf">45.698113</span> <span class="mf">125.698113</span> <span class="mf">19.396226</span> <span class="mf">1.049915</span> <span class="mf">0.534037</span> <span class="mf">0.586495</span> <span class="mf">0.947841</span> <span class="mf">1.169893</span> <span class="mf">0.463470</span> <span class="mf">0.967543</span>
<span class="mi">52</span> <span class="mi">105</span> <span class="mf">49.580952</span> <span class="mf">20.866667</span> <span class="mf">19.666667</span> <span class="mf">38.161905</span> <span class="mf">53.990476</span> <span class="mf">126.361905</span> <span class="mf">22.847619</span> <span class="mf">0.988209</span> <span class="mf">0.555855</span> <span class="mf">0.780368</span> <span class="mf">0.951960</span> <span class="mf">2.100802</span> <span class="mf">0.482856</span> <span class="mf">1.089998</span>
<span class="mi">114</span> <span class="mi">51</span> <span class="mf">46.960784</span> <span class="mf">19.470588</span> <span class="mf">16.235294</span> <span class="mf">41.294118</span> <span class="mf">37.725490</span> <span class="mf">124.764706</span> <span class="mf">15.039216</span> <span class="mf">0.937247</span> <span class="mf">0.542326</span> <span class="mf">0.789639</span> <span class="mf">0.807319</span> <span class="mf">1.201306</span> <span class="mf">0.428403</span> <span class="mf">0.847603</span>
<span class="mi">138</span> <span class="mi">55</span> <span class="mf">45.690909</span> <span class="mf">19.272727</span> <span class="mf">16.054545</span> <span class="mf">40.672727</span> <span class="mf">40.036364</span> <span class="mf">123.563636</span> <span class="mf">14.909091</span> <span class="mf">1.051854</span> <span class="mf">0.449467</span> <span class="mf">0.890655</span> <span class="mf">1.155575</span> <span class="mf">1.439697</span> <span class="mf">0.739460</span> <span class="mf">0.866511</span>
</pre></div>
</div>
<p>The output is basically the same as in step 4. However, now average and standard deviation are not given for the whole image, but for each zone/segment value of the mask file (exception: value 0 that is not processed).</p>
<p>Explanation of values for each column:</p>
<ul class="simple">
<li><p>Col1: ID (in this case one as no mask file has been given)</p></li>
<li><p>Col2: Number of pixels</p></li>
<li><p>Col3: Average value of band1</p></li>
<li><p>Col4 - col9: Average value of band2 - band7</p></li>
<li><p>Col10 - col16: Standard deviation of band1 - band7</p></li>
</ul>
<p>Depending on the purpose, you can now try the different options:
-   <code class="code docutils literal notranslate"><span class="pre">-mm</span></code> if you want to compute minimum and maximum values as well
-   <code class="code docutils literal notranslate"><span class="pre">-noavg</span></code> if you do not want to output the average
-   <code class="code docutils literal notranslate"><span class="pre">-nostd</span></code> if you do not want to compute the standard deviation.</p>
<p>The output will always be in the following order:</p>
<p>ID, number of pixels, [minimum if <code class="code docutils literal notranslate"><span class="pre">-mm</span></code> is chosen], [maximum if <code class="code docutils literal notranslate"><span class="pre">-mm</span></code> is chosen], average, standard deviation.</p>
<p>If the input image has several bands, the parameters are given for all bands.</p>
</div>
</div>
</div>
<div class="section" id="classification">
<h3>CLASSIFICATION<a class="headerlink" href="#classification" title="Permalink to this headline">¶</a></h3>
<div class="section" id="oft-cluster-bash">
<h4>oft-cluster.bash<a class="headerlink" href="#oft-cluster-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id194">
<h5>NAME<a class="headerlink" href="#id194" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-cluster.bash</span></code> - clusters raster images.</p>
</div>
<div class="section" id="id195">
<h5>SYNOPSIS<a class="headerlink" href="#id195" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-cluster.bash &lt;input.img&gt;&lt;output.img&gt;&lt;NBR clusters&gt;&lt;sampling density%&gt; oft-cluster.bash &lt;input.img&gt;&lt;output.img&gt;&lt;NBR clusters&gt;...&lt;sampling density%&gt;[mask]</span>
</pre></div>
</div>
</div>
<div class="section" id="id196">
<h5>DESCRIPTION<a class="headerlink" href="#id196" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-cluster.bash</span></code> clusters input image into a given number of clusters. The clustering process is as follows:</p>
<ol class="arabic simple">
<li><p>Generate a systematic sample using the given sample density and covering the area of input.img. For more details, please have a look at <code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code>.</p></li>
<li><p>extract spectral (or other) information for every point of the grid using <code class="code docutils literal notranslate"><span class="pre">oft-extr</span></code></p></li>
<li><p>cluster the grid points into given number of clusters using kmeans algorithm <code class="code docutils literal notranslate"><span class="pre">oft-kmeans</span></code></p></li>
<li><p>classify each image pixel in one of the generated clusters using NN classification with Euclidean distance in the feature space</p></li>
</ol>
<p>The mask values are:
-   0 = do not classify
-   1 = classify</p>
</div>
<div class="section" id="id197">
<h5>OPTION<a class="headerlink" href="#id197" title="Permalink to this headline">¶</a></h5>
<p>Parameters:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">[mask]</span></code> - use maskfile and process only areas having mask value &gt;0</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you’re using LEDAPS input, you can generate the mask using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">trim ledaps.bash</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id198">
<h5>EXAMPLE<a class="headerlink" href="#id198" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-cluster.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal-</span> <span class="pre">polygonize</span></code> to compute clusters and convert them into polygons.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<div class="section" id="id199">
<h6>oft-cluster.bash<a class="headerlink" href="#id199" title="Permalink to this headline">¶</a></h6>
<p>Let’s run <code class="code docutils literal notranslate"><span class="pre">oft-cluster</span></code> with Input: <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> ; Output: <code class="code docutils literal notranslate"><span class="pre">cluster50.tif</span></code> for 50 classes and 10 percent</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it takes some time computing, so be patient.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−cluster.bash landsat_t1.tif cluster50.tif 50 10</span>
</pre></div>
</div>
<p>Load the result in QGIS and see that all the pixel values are between 1 and 50 corresponding to the 50 classes we defined in the command line.</p>
<div class="figure align-default" id="id267">
<img alt="../_images/oft-cluster.png" src="../_images/oft-cluster.png" />
<p class="caption"><span class="caption-text">Cluster50.tif</span><a class="headerlink" href="#id267" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="oft-clump-bash">
<h6>oft-clump.bash<a class="headerlink" href="#oft-clump-bash" title="Permalink to this headline">¶</a></h6>
<p>Now we will run <code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code>. This tool is meant for separating uniform regions in a class image. Get detailed information under <code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code>:</p>
<ul class="simple">
<li><p>Input: <code class="code docutils literal notranslate"><span class="pre">cluster50.tif</span></code></p></li>
<li><p>Output: <code class="code docutils literal notranslate"><span class="pre">clump_clus50.tif</span></code></p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−clump cluster50.tif clump_clus50.tif</span>
</pre></div>
</div>
</div>
<div class="section" id="gdal-polygonize-py">
<h6>gdal_polygonize.py<a class="headerlink" href="#gdal-polygonize-py" title="Permalink to this headline">¶</a></h6>
<p>In the last step we want to create polygons using the Input: <code class="code docutils literal notranslate"><span class="pre">clump_clus50.tif</span></code> Output: <code class="code docutils literal notranslate"><span class="pre">clump_clus50.shp</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal_polygonize.py clump_clus50_.tif −f &quot;ESRI Shapefile&quot; clump_clus50.shp</span>
</pre></div>
</div>
<div class="figure align-default" id="id268">
<img alt="../_images/gdal_polygonize.png" src="../_images/gdal_polygonize.png" />
<p class="caption"><span class="caption-text">Left: Zoom into the cluster image Cluster50.tif. Right: Corresponding zoom into the shapefile clump clus50.shp.</span><a class="headerlink" href="#id268" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="oft-kmeans">
<h4>oft-kmeans<a class="headerlink" href="#oft-kmeans" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id200">
<h5>NAME<a class="headerlink" href="#id200" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-kmeans</span></code> - for kmeans clustering</p>
</div>
<div class="section" id="id201">
<h5>SYNOPSIS<a class="headerlink" href="#id201" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-kmeans -i &lt;infile&gt;-o &lt;outfile&gt;[OPTIONS]</span>
</pre></div>
</div>
</div>
<div class="section" id="id202">
<h5>DESCRIPTION<a class="headerlink" href="#id202" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-kmeans</span></code> carries out unsupervised classification with k-means algorithm.</p>
<ul>
<li><p>By default, the program asks user to input two parameters:</p>
<ol class="arabic simple">
<li><p>input text file</p></li>
<li><p>number of classes</p></li>
</ol>
</li>
<li><p>The input text file is a collection of signatures from the input file.</p>
<ul>
<li><p>It contains at minimum the grey values of each band</p></li>
<li><p>It can be done with <code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code> and <code class="code docutils literal notranslate"><span class="pre">oft-extr</span></code></p></li>
<li><p>The program uses it to establish the cluster centers and proceeds by assigning each pixel the Class ID of the closest cluster center.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The proximity of the cluster centers is computed using Euclidean distance in the spectral feature space.</p>
</div>
</li>
</ul>
</li>
<li><p>If the <code class="code docutils literal notranslate"><span class="pre">-auto</span></code> option is used, the program divides the data automatically and the number of clusters is not requested.</p></li>
<li><p>If the <code class="code docutils literal notranslate"><span class="pre">-aw</span></code> option is used, the programs asks user to provide weight for each of the input bands.</p></li>
</ul>
</div>
<div class="section" id="id203">
<h5>OPTIONS<a class="headerlink" href="#id203" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">[-ot]</span></code> - { Byte/Int16/UInt16/UInt32/Int32/Float32/Float64}</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-um]</span></code> - specify mask band</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-auto]</span></code> - automated division of data</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-aw]</span></code> - ask weights for input bands</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-h]</span></code> - print out more help</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the benefit of users running scripts using the older version based on order of files instead of option <code class="code docutils literal notranslate"><span class="pre">-i</span></code>, the program can still be used that way.</p>
</div>
</div>
<div class="section" id="id204">
<h5>EXAMPLE<a class="headerlink" href="#id204" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-kmeans</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-extr</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>The exercise is divided into two step: first we prepare the input signature text file which is need for <code class="code docutils literal notranslate"><span class="pre">oft-kmeans</span></code>, then we will run the classification tool itself:</p>
<div class="section" id="creation-of-input-signature-text-file">
<h6>Creation of input signature text file<a class="headerlink" href="#creation-of-input-signature-text-file" title="Permalink to this headline">¶</a></h6>
<p>We want to generate a grid of points over our image <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> using <code class="code docutils literal notranslate"><span class="pre">oft-gengrid.bash</span></code> with user-defined spacing in x and y directions, in this case 5000 x 5000 m distance between the points in X and Y directions. The output file <code class="code docutils literal notranslate"><span class="pre">gengrid.txt</span></code> contains information on the created grid: <strong>ID</strong>, <strong>x</strong> and  <strong>y</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−gengrid.bash landsat_t1.tif 5000 5000 gengrid.txt</span>
</pre></div>
</div>
<p>Lets see the results</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head gengrid.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1 730785 −2456134
2 730785 −2451134
3 730785 −2446134
4 730785 −2441134
5 730785 −2436134
6 730785 −2431134
7 730785 −2426134
8 730785 −2421134
9 730785 −2416134
10 730785 −2411134
</pre></div>
</div>
<p>To extract the values from our input image <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> f for those pixels that lay on our grid we created in the previous step we run <code class="code docutils literal notranslate"><span class="pre">oft-extr</span></code>. Output: <code class="code docutils literal notranslate"><span class="pre">my_extr.txt</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−extr −o my_extr.txt gengrid.txt landsat_t1.tif</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head my_extr.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1.00 730785.00 −2456134.00 50.00 3441.00 52.00 24.00 24.00 51.00 65.00 128.00 29.00
2.00 730785.00 −2451134.00 50.00 3274.00 47.00 19.00 18.00 37.00 47.00 124.00 20.00
3.00 730785.00 −2446134.00 50.00 3108.00 52.00 23.00 22.00 53.00 57.00 127.00 26.00
4.00 730785.00 −2441134.00 50.00 2941.00 49.00 20.00 17.00 34.00 43.00 124.00 19.00
5.00 730785.00 −2436134.00 50.00 2774.00 47.00 20.00 18.00 34.00 44.00 125.00 19.00
6.00 730785.00 −2431134.00 50.00 2608.00 51.00 21.00 20.00 36.00 51.00 128.00 23.00
7.00 730785.00 −2426134.00 50.00 2441.00 62.00 29.00 38.00 53.00 85.00 136.00 45.00
8.00 730785.00 −2421134.00 50.00 2274.00 48.00 21.00 18.00 34.00 45.00 126.00 19.00
9.00 730785.00 −2416134.00 50.00 2108.00 49.00 20.00 19.00 35.00 47.00 125.00 20.00
10.00 730785.00 −2411134.00 50.00 1941.00 49.00 20.00 18.00 35.00 45.00 125.00 18.00
</pre></div>
</div>
</div>
<div class="section" id="unsupervised-classification">
<h6>Unsupervised classification<a class="headerlink" href="#unsupervised-classification" title="Permalink to this headline">¶</a></h6>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-kmeans</span></code> with Input:<code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> and Output: <code class="code docutils literal notranslate"><span class="pre">my_kmeans.tif</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−kmeans −o my_kmeans.tif −i landsat_t1.tif</span>
</pre></div>
</div>
<p>The program will ask you for:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Input signature file name?: my extr.txt</span>
<span class="go">Number of clusters?: 25 //For this example we choose 25 clusters</span>
</pre></div>
</div>
<p>Load your result my kmeans.tif in QGIS:</p>
<div class="figure align-default" id="id269">
<img alt="../_images/oft-kmeans.png" src="../_images/oft-kmeans.png" />
<p class="caption"><span class="caption-text">shows the classified image my kmeans.tif with pixel values between 1 and 25.</span><a class="headerlink" href="#id269" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="oft-nn">
<h4>oft-nn<a class="headerlink" href="#oft-nn" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To be tested</p>
</div>
<div class="section" id="id205">
<h5>NAME<a class="headerlink" href="#id205" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code> - is a nearest neighbor classifier.</p>
</div>
<div class="section" id="id206">
<h5>SYNOPSIS<a class="headerlink" href="#id206" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-nn &lt;-i input image&gt;&lt;-o output image/-or output text file&gt; oft-nn&lt;-i input image&gt;&lt;-o output image/-or output text file&gt;[OPTIONS]</span>
</pre></div>
</div>
</div>
<div class="section" id="id207">
<h5>OPTIONS<a class="headerlink" href="#id207" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−h</span></code> = help</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−ot</span></code> {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/CInt16/CInt32/CFloat32/CFloat64} = define output type</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−um</span></code> &lt;maskfile&gt; = only areas having mask value larger than 0 are processed</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−dem</span></code> &lt;demfile&gt; = use given DEM and vertical distance rules prompted by the program</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−hrules</span></code> = use horizontal distance rules (prompted by the program) to restrict the search in horizontal direction</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−segme</span></code> = use segments in the mask file. If this option is used, the processing is done at the segment level.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−speed</span></code> = approximate knn, asks for speed parameter.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Experimental</p>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−or</span></code> &lt;output text file&gt; = save weights for training data records for later calculations of large area statistics</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−aw</span></code> = ask weights for the input bands</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−dw</span></code> {1/2/3} = weight the nearest neighbor data with:</p>
<ol class="arabic simple">
<li><p>equal</p></li>
<li><p>inverse distance</p></li>
<li><p>inverse distance squared (default) weights</p></li>
</ol>
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−norm</span></code> = normalize the image features and the training data features to mean 0 and std 1 (default is no normalization).</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−lu</span> <span class="pre">&lt;image&gt;</span></code> = use given land use image for stratification of the reference data.</p></li>
</ul>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>NOT IMPLEMENTED YET</p>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−adm</span> <span class="pre">&lt;image&gt;</span></code> = use given administrative borders to collect weights for field plots by administrative unit (e.g. county). This enables you to compute statistics for each administrative unit separately.</p></li>
</ul>
</div>
<div class="section" id="id208">
<h5>DESCRIPTION<a class="headerlink" href="#id208" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code> carries out nearest neighbor estimation or classification of an image.</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code> classifies or estimates an output value for every image analysis unit using given training data set and k nearest neighbor algorithm. Nearest neighbors are determined based on Euclidean distances in the feature space.</p></li>
<li><p>In a classification, the output is the class having the largest sum of weights. In estimation, the output value is computed as straight or weighted average of the k nearest neighbors.</p></li>
<li><p>You need to give at least the input image file (<code class="code docutils literal notranslate"><span class="pre">-i</span></code> option) and the output image (<code class="code docutils literal notranslate"><span class="pre">-o</span></code> option) OR the output text file (<code class="code docutils literal notranslate"><span class="pre">-or</span></code> option)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the program will ask for the data-file, number and location of target variables, NBR of neighbors (k) and data type (continuous or class). Other parameters are asked when needed, if you use extra options specified under OPTIONS.</p>
</div>
<ul class="simple">
<li><p>Last columns of the training data set are used as the feature space. In other words, if the input image has four bands, last four columns of the training data set should correspond to the values for training observations.</p></li>
<li><p>In cases of <code class="code docutils literal notranslate"><span class="pre">-dem</span></code> or <code class="code docutils literal notranslate"><span class="pre">-lu</span></code> you need to have a corresponding column in your field data text file (prompted by the program).</p></li>
<li><p>In case of DEM is used, we use absolute difference: if you want to reject observations &gt;500 m above or below the target pixel, give 500</p></li>
<li><p>In case of <code class="code docutils literal notranslate"><span class="pre">-norm</span></code>, the normalization parameters are computed from the field data.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>you may also normalize your features (image and training data) BEFORE using <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code>, Just be sure that the values come from the same distribution.</p>
</div>
<ul class="simple">
<li><p>In case of <code class="code docutils literal notranslate"><span class="pre">-or</span></code> the output text file contains the target variable and collected weight for each training data observation.</p></li>
<li><p>If the <code class="code docutils literal notranslate"><span class="pre">-lu</span></code> option is given, only observations from the same land use category/class will be used for estimation.</p></li>
</ul>
</div>
<div class="section" id="id209">
<h5>EXAMPLE<a class="headerlink" href="#id209" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-sigshp.bash</span></code>.</p>
<p>You will need for this exercise the following data: <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> and <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> which was digitized manually in QGIS.</p>
<p>Create the signature file using <code class="code docutils literal notranslate"><span class="pre">oft-sigshp.bash</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−sigshp.bash images/landsat_t1.tif shapefiles/landuse id newcol txt/sig_landuse.txt</span>
</pre></div>
</div>
<p>Take a look at the input signature file <code class="code docutils literal notranslate"><span class="pre">sig_landuse.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">more txt/sig_landuse.txt</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">14</span> <span class="mi">4</span> <span class="mf">54.872263</span> <span class="mf">26.561314</span> <span class="mf">28.113869</span> <span class="mf">58.320438</span> <span class="mf">75.259854</span> <span class="mf">129.021898</span> <span class="mf">33.874453</span>
<span class="mi">15</span> <span class="mi">4</span> <span class="mf">58.635842</span> <span class="mf">29.131097</span> <span class="mf">35.067535</span> <span class="mf">50.379166</span> <span class="mf">86.387111</span> <span class="mf">131.054293</span> <span class="mf">47.649746</span>
<span class="mi">16</span> <span class="mi">4</span> <span class="mf">58.217101</span> <span class="mf">29.102204</span> <span class="mf">34.695057</span> <span class="mf">54.351035</span> <span class="mf">82.787575</span> <span class="mf">130.169673</span> <span class="mf">43.795925</span>
<span class="mi">17</span> <span class="mi">1</span> <span class="mf">54.840000</span> <span class="mf">25.463590</span> <span class="mf">29.768205</span> <span class="mf">43.720000</span> <span class="mf">80.614359</span> <span class="mf">132.413333</span> <span class="mf">42.431795</span>
<span class="mi">18</span> <span class="mi">2</span> <span class="mf">54.172608</span> <span class="mf">25.085366</span> <span class="mf">28.419325</span> <span class="mf">48.404315</span> <span class="mf">74.633208</span> <span class="mf">131.336773</span> <span class="mf">37.128518</span>
<span class="mi">19</span> <span class="mi">3</span> <span class="mf">55.198990</span> <span class="mf">26.094949</span> <span class="mf">30.674747</span> <span class="mf">49.970707</span> <span class="mf">76.598990</span> <span class="mf">131.734343</span> <span class="mf">36.209091</span>
<span class="mi">20</span> <span class="mi">2</span> <span class="mf">57.269874</span> <span class="mf">26.903766</span> <span class="mf">31.171548</span> <span class="mf">42.291841</span> <span class="mf">78.776151</span> <span class="mf">133.120293</span> <span class="mf">41.883891</span>
<span class="mi">21</span> <span class="mi">5</span> <span class="mf">55.277745</span> <span class="mf">26.597769</span> <span class="mf">29.771580</span> <span class="mf">56.949501</span> <span class="mf">76.772754</span> <span class="mf">128.934234</span> <span class="mf">36.727540</span>
<span class="mi">22</span> <span class="mi">4</span> <span class="mf">54.130526</span> <span class="mf">24.966316</span> <span class="mf">29.842105</span> <span class="mf">42.627368</span> <span class="mf">85.372632</span> <span class="mf">134.662105</span> <span class="mf">45.390526</span>
<span class="mi">23</span> <span class="mi">4</span> <span class="mf">54.960094</span> <span class="mf">26.014085</span> <span class="mf">28.808685</span> <span class="mf">54.773474</span> <span class="mf">75.338028</span> <span class="mf">129.531690</span> <span class="mf">34.167840</span>
<span class="mi">24</span> <span class="mi">1</span> <span class="mf">57.802077</span> <span class="mf">27.928833</span> <span class="mf">34.113622</span> <span class="mf">48.773060</span> <span class="mf">83.804520</span> <span class="mf">132.198839</span> <span class="mf">43.640501</span>
<span class="mi">25</span> <span class="mi">3</span> <span class="mf">58.298009</span> <span class="mf">28.367690</span> <span class="mf">33.835545</span> <span class="mf">48.340315</span> <span class="mf">82.241186</span> <span class="mf">132.243467</span> <span class="mf">45.336790</span>
</pre></div>
</div>
<p>Explanation of columns:</p>
<ul class="simple">
<li><p>col 1: ID of the polygon</p></li>
<li><p>col 2: landuse class of the polygon</p></li>
<li><p>col 3−9: pixel values of band1−band7 of the Landsat imagery</p></li>
</ul>
<p>Now run <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code> with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−nn −i images/landsat_t1.tif −o results/my_knn.tif</span>
</pre></div>
</div>
<p>Following variables will be asked:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Input signature file name?: sig landuse . txt</span>
<span class="go">Number of k ?:5</span>
<span class="go">Nbr of output variables ?:1</span>
<span class="go">Cols of 1 output vars in sig file?</span>
<span class="go">Output var 1: 2 //Here we define col2 where the information on</span>
<span class="go">landuse−classes is stored in sig landuse . txt</span>
<span class="go">Class/Other = (0/1) ?: 1</span>
</pre></div>
</div>
<p>Load your result my <code class="code docutils literal notranslate"><span class="pre">knn.tif</span></code> in QGIS:</p>
<p>You can see the polygons labeled corresponding to their landuse-class on top of our result <code class="code docutils literal notranslate"><span class="pre">my_knn.tif</span></code>, of which the pixel values vary between 1-5 (e.g. 1.78283) as there are 5 landuse-classes (1,2,3,4,5).</p>
<div class="figure align-default" id="id270">
<img alt="../_images/oft-knn.png" src="../_images/oft-knn.png" />
<p class="caption"><span class="caption-text">Result <code class="code docutils literal notranslate"><span class="pre">my_knn.tif</span></code> overlayed with <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code></span><a class="headerlink" href="#id270" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-nn-training-data-bash">
<h4>oft-nn-training-data.bash<a class="headerlink" href="#oft-nn-training-data-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id210">
<h5>NAME<a class="headerlink" href="#id210" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-nn-training-data.bash</span></code> - Script for preparing a training data text file for <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code> analysis</p>
</div>
<div class="section" id="id211">
<h5>SYNOPSIS<a class="headerlink" href="#id211" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-nn-training-data.bash &lt;-i image.tif&gt;&lt;-f field data.txt&gt;&lt;-x col&gt;&lt;- y col&gt;[-m mask.tif] [-d dem] [-l lu]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-i</span></code> = give the Landsat image where grey values are to be picked for the field plot locations</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-f</span></code> = give the field data text file</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-x</span></code> = give the column where x-coordinate resides in the text file</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-y</span></code> = give the column where y-coordinate resides in the text file</p></li>
</ul>
</div>
<div class="section" id="id212">
<h5>OPTIONS<a class="headerlink" href="#id212" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-m</span></code> = give a mask with values 0 and 1, where 0 tells that “this location is not to be picked if a field plot falls here”</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-d</span></code> = give a digital elevation model file from which the elevations at field plot locations are to be added to the training data</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-lu</span></code> = give a land-use, land cover etc image file from which this information is to be added to the training data</p></li>
</ul>
</div>
<div class="section" id="id213">
<h5>DESCRIPTION<a class="headerlink" href="#id213" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Picks field data in a text file based on the extent of given image - Image may contain 6 or 7 bands</p></li>
<li><p>Extracts image values based on field data locations</p></li>
<li><p>If a mask is given, pixels with mask value 0 are dropped</p></li>
<li><p>At this point the materials must to be in the same projection</p></li>
<li><p>The text file is preserved as such. Image grey values are added to the end of each row. If <code class="code docutils literal notranslate"><span class="pre">lu</span></code> and/or <code class="code docutils literal notranslate"><span class="pre">dem</span></code> are given, they appear between the original field data and grey values (<code class="code docutils literal notranslate"><span class="pre">lu</span></code> before <code class="code docutils literal notranslate"><span class="pre">dem</span></code> in case of both)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Checking of the result is obligatory!!!!</p>
</div>
</div>
<div class="section" id="id214">
<h5>EXAMPLE<a class="headerlink" href="#id214" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-nn-training-data.bash</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>The script <code class="code docutils literal notranslate"><span class="pre">oft-nn-training-data.bash</span></code> extracts image values based on field data locations using input image <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> and for the field data we are using <code class="code docutils literal notranslate"><span class="pre">training.txt</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−nn−training−data.bash −i landsat_t1.tif −f training.txt −x 2 −y 3</span>
</pre></div>
</div>
<p>Let’s take a closer look at our output values for <strong>nn</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">head values for nn</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1 730785 −2456134 1.00 730785.00 −2456134.00 52.00 24.00 24.00 51.00 65.00 128.00 29.00
2 730785 −2455134 2.00 730785.00 −2455134.00 59.00 27.00 34.00 47.00 82.00 132.00 46.00
3 730785 −2454134 3.00 730785.00 −2454134.00 57.00 28.00 33.00 50.00 82.00 131.00 44.00
4 730785 −2453134 4.00 730785.00 −2453134.00 55.00 26.00 29.00 52.00 72.00 129.00 34.00
5 730785 −2452134 5.00 730785.00 −2452134.00 60.00 28.00 35.00 54.00 87.00 129.00 45.00
6 730785 −2451134 6.00 730785.00 −2451134.00 47.00 19.00 18.00 37.00 47.00 124.00 20.00
7 730785 −2450134 7.00 730785.00 −2450134.00 46.00 19.00 17.00 38.00 44.00 123.00 18.00
8 730785 −2449134 8.00 730785.00 −2449134.00 59.00 28.00 33.00 60.00 84.00 129.00 43.00
9 730785 −2448134 9.00 730785.00 −2448134.00 66.00 34.00 42.00 57.00 98.00 130.00 56.00
10 730785 −2447134 10.00 730785.00 −2447134.00 52.00 23.00 21.00 53.00 61.00 127.00 27.00
</pre></div>
</div>
<p>Explanation of values for each column:</p>
<ul class="simple">
<li><p>Col1: pixel ID</p></li>
<li><p>Col2: x-coordinates</p></li>
<li><p>Col3: y-coordinates</p></li>
<li><p>Col4: pixel ID</p></li>
<li><p>Col5: x-coordinates</p></li>
<li><p>Col6: y-coordinates</p></li>
<li><p>Col7 - Col13: center pixel value for bands 1-7</p></li>
</ul>
</div>
</div>
<div class="section" id="oft-normalize-bash">
<h4>oft-normalize.bash<a class="headerlink" href="#oft-normalize-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id215">
<h5>NAME<a class="headerlink" href="#id215" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-normalize.bash</span></code> - Script for preparing a training data text file for <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code> analysis</p>
</div>
<div class="section" id="id216">
<h5>SYNOPSIS<a class="headerlink" href="#id216" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-normalize.bash &lt;-i image&gt;[-t training data] [-f 1/2 ] [-m mask]</span>
</pre></div>
</div>
</div>
<div class="section" id="id217">
<h5>OPTIONS<a class="headerlink" href="#id217" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-i</span></code> image = give the Landsat image with 6 or 7 bands to be normalized</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-t</span></code> training data = give a text file containing ground truth and image bands (in last columns)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-f</span></code> 1/2 = normalization will be based on the distribution present in the image (1) or the training data file (2)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-m</span></code> mask = give a mask file showing areas to be processed with 1 and others with 0</p></li>
</ul>
</div>
<div class="section" id="id218">
<h5>DESCRIPTION<a class="headerlink" href="#id218" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Image grey values in both files are converted to mean 0 and std 1 based on the selected source of distribution (image or training data file)</p></li>
<li><p>Procedure for converting each grey value on each band in the image and/or training data file is (value - average)/std</p></li>
<li><p>It is possible to</p>
<ul>
<li><p>Normalize just the image based on it’s grey value distribution on each band</p></li>
<li><p>Normalize also the training data text file using the same distribution</p></li>
<li><p>Normalize both files using the grey value distribution obtained from the training data file</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id219">
<h5>EXAMPLE<a class="headerlink" href="#id219" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-normalize.bash</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Let’s run a simple exercise using <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> as the only input:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−normalize.bash −i landsat_t1.tif</span>
</pre></div>
</div>
<p>Automatic output: <code class="code docutils literal notranslate"><span class="pre">landsat_t1_norm.tif</span></code> and <code class="code docutils literal notranslate"><span class="pre">stat_landsat_t1.txt</span></code></p>
<p>Now we run it including the training data option values for nn:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−normalize.bash −i landsat_t1.tif −f values_for_nn</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-prepare-image-for-nn-bash">
<h4>oft-prepare-image-for-nn.bash<a class="headerlink" href="#oft-prepare-image-for-nn-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id220">
<h5>NAME<a class="headerlink" href="#id220" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-prepare-image-for-nn.bash</span></code> - for preparing a Landsat image for nn-analysis with <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code></p>
</div>
<div class="section" id="id221">
<h5>SYNOPSIS<a class="headerlink" href="#id221" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-prepare-image-for-nn.bash oft-prepare-image-for-nn.bash &lt;-i image&gt; oft-prepare-image-for-nn.bash &lt;-i image&gt;[-b baseimage] [-p projec- tion] [-s shapefile] [-a attribute]</span>
</pre></div>
</div>
</div>
<div class="section" id="id222">
<h5>DESCRIPTION<a class="headerlink" href="#id222" title="Permalink to this headline">¶</a></h5>
<p>Re-projects and shifts an image if needed.</p>
<p>Prepares a 0/1 mask of nodata in image, all values ¡= 0 are considered nodata</p>
<ul class="simple">
<li><p>Image = Landsat image with 6 or 7 bands to be prepared for <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code></p></li>
<li><p>Baseimage = Image already in correct grid, meaning pixel size and pixel locations (Target projection in EPSG, e.g. EPSG:32736)</p></li>
<li><p>Shapefile = additional mask areas to be added to the base mask, e.g.</p></li>
<li><p>clouds = If target projection is given, also shapefile is re-projected</p></li>
<li><p>Attribute = name of attribute field to be used in shapefile. Field must contain 0 in regions to be masked off</p></li>
</ul>
</div>
<div class="section" id="id223">
<h5>EXAMPLE<a class="headerlink" href="#id223" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-prepare-image-for-nn.bash</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>For this exercise we will use <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> as image file and <code class="code docutils literal notranslate"><span class="pre">landsat_t2.tif</span></code> as the base image file, <code class="code docutils literal notranslate"><span class="pre">landuse.shp</span></code> is the input shapefile of which we define <code class="code docutils literal notranslate"><span class="pre">landuse</span></code> as the attribute to be used:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−prepare−image−for−nn.bash −i landsat_t1.tif −b landsat_t2.tif −s landuse.shp −a landuse</span>
</pre></div>
</div>
<p>The output image is automatically processed: <code class="code docutils literal notranslate"><span class="pre">landsat_t1_mask.tif</span></code>
Check in QGIS the values of your output-mask</p>
<div class="figure align-default" id="id271">
<img alt="../_images/oft−prepare−image−for−nn.png" src="../_images/oft−prepare−image−for−nn.png" />
<p class="caption"><span class="caption-text">Output of <code class="code docutils literal notranslate"><span class="pre">oft-prepare-image-for-nn.bash</span></code> is <code class="code docutils literal notranslate"><span class="pre">landsat_t1_mask.tif</span></code></span><a class="headerlink" href="#id271" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="oft-unique-mask-for-nn-bash">
<h4>oft-unique-mask-for-nn.bash<a class="headerlink" href="#oft-unique-mask-for-nn-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id224">
<h5>NAME<a class="headerlink" href="#id224" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-unique-mask-for-nn.bash</span></code> - creates a unique mask for <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code> analysis.</p>
</div>
<div class="section" id="id225">
<h5>SYNOPSIS<a class="headerlink" href="#id225" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-unique-mask-for-nn.bash oft-unique-mask-for-nn.bash &lt;-m mask of base image&gt;&lt;-s mask of new image&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id226">
<h5>DESCRIPTION<a class="headerlink" href="#id226" title="Permalink to this headline">¶</a></h5>
<p>Unique means here, that same pixel is not classified from several images.</p>
<p>It is needed in 2 cases:</p>
<ol class="arabic simple">
<li><p>take an adjacent image into account or</p></li>
<li><p>use the new image to fill a cloud etc. on nn-classified base image</p></li>
</ol>
<ul class="simple">
<li><p>As input you need a mask of the main image and a preliminary mask of the new image</p></li>
<li><p>A preliminary mask for the new image can be run with oft-trim- mask.bash</p></li>
<li><p>If you need to add clouds or water, do that before or after this unique mask script</p></li>
<li><p>The new image must be in the same projection and grid (pixel locations)</p></li>
<li><p>In all masks, 0=do not use, 1=use</p></li>
<li><p>To take several images into account, re-run</p></li>
<li><p>Script produces also an accumulated mask, showing common ok areas</p></li>
</ul>
</div>
<div class="section" id="id227">
<h5>EXAMPLE<a class="headerlink" href="#id227" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-unique-mask-for-nn.bash</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>For this exercise we will use <code class="code docutils literal notranslate"><span class="pre">mask.tif</span></code> as mask of the base image (produced by <code class="code docutils literal notranslate"><span class="pre">oft-trim-mask.bash</span></code> and <code class="code docutils literal notranslate"><span class="pre">landsat_t2_mask.tif</span></code> as the mask of the new image:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−unique−mask−for−nn.bash −m mask.tif −s landsat_t2 mask.tif</span>
</pre></div>
</div>
<p>Two output images are automatically processed:
-   <code class="code docutils literal notranslate"><span class="pre">landsat_t2_mask_unique_mask.tif</span></code>
-   <code class="code docutils literal notranslate"><span class="pre">landsat_t2_mask_accumulated_mask.tif</span></code></p>
<div class="figure align-default" id="id272">
<img alt="../_images/oft−unique−mask−for−nn_mask.png" src="../_images/oft−unique−mask−for−nn_mask.png" />
<p class="caption"><span class="caption-text">Mask of base image: <code class="code docutils literal notranslate"><span class="pre">mask.tif</span></code></span><a class="headerlink" href="#id272" title="Permalink to this image">¶</a></p>
</div>
<p>Here you will get the Mask of new image: <code class="code docutils literal notranslate"><span class="pre">landsat_t2_mask.tif</span></code> (left) and the Output: <code class="code docutils literal notranslate"><span class="pre">landsat_t2_mask_unique_mask.tif</span></code> (right).</p>
<a class="reference internal image-reference" href="../_images/oft−unique−mask−for−nn.png"><img alt="../_images/oft−unique−mask−for−nn.png" class="align-left" src="../_images/oft−unique−mask−for−nn.png" style="width: 40%;" /></a>
<a class="reference internal image-reference" href="../_images/oft−unique−mask−for−nn_unique.png"><img alt="../_images/oft−unique−mask−for−nn_unique.png" class="align-left" src="../_images/oft−unique−mask−for−nn_unique.png" style="width: 40%;" /></a>
</div>
</div>
</div>
<div class="section" id="segmentation">
<h3>SEGMENTATION<a class="headerlink" href="#segmentation" title="Permalink to this headline">¶</a></h3>
<div class="section" id="oft-clump">
<h4>oft-clump<a class="headerlink" href="#oft-clump" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id228">
<h5>NAME<a class="headerlink" href="#id228" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code> - connected component labeling.</p>
</div>
<div class="section" id="id229">
<h5>SYNOPSIS<a class="headerlink" href="#id229" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-clump &lt;-i input &gt;&lt;-o output&gt;[-b band] [-um maskile] [-h help]</span>
</pre></div>
</div>
</div>
<div class="section" id="id230">
<h5>DESCRIPTION<a class="headerlink" href="#id230" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code> Add spatial coherency to existing classes by combining
adjacent similar classified areas.</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code> is meant for separating uniform regions in a class image.</p></li>
<li><p>You may obtain such a class image by using e.g. <code class="code docutils literal notranslate"><span class="pre">oft-cluster.bash</span></code>, <code class="code docutils literal notranslate"><span class="pre">oft-kmeans</span></code> or <code class="code docutils literal notranslate"><span class="pre">oft-nn</span></code>.</p></li>
<li><p>The program looks for similar and adjacent class values in the input image and gives each area an own id.</p></li>
</ul>
</div>
<div class="section" id="id231">
<h5>OPTION<a class="headerlink" href="#id231" title="Permalink to this headline">¶</a></h5>
<p>Parameters:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">[-b</span> <span class="pre">band]</span></code> - use determined band of the image</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-</span> <span class="pre">um</span> <span class="pre">maskfile]</span></code> - use maskfile and process only areas having mask value &gt;0</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[-h</span> <span class="pre">help]</span></code> - opens the help manual in the terminal</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the benefit of users running the script using the older version, where the data files are based on the file order instead of options <code class="code docutils literal notranslate"><span class="pre">-i</span></code> and <code class="code docutils literal notranslate"><span class="pre">-o</span></code>, the program can still be used that way.</p>
</div>
<ul class="simple">
<li><p>After clumping: pixels with identical class values, but are not spatially connected, will have different id</p></li>
</ul>
</div>
<div class="section" id="id232">
<h5>EXAMPLE<a class="headerlink" href="#id232" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code>.</p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>To run the <code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code> we use the Input: <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code>, Output: <code class="code docutils literal notranslate"><span class="pre">clump.tif</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−clump landsat_t1.tif clump.tif</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oft-seg">
<h4>oft-seg<a class="headerlink" href="#oft-seg" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id233">
<h5>NAME<a class="headerlink" href="#id233" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code> - Image segmentation tool.</p>
</div>
<div class="section" id="id234">
<h5>SYNOPSIS<a class="headerlink" href="#id234" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-seg &lt;input&gt;&lt;output&gt;[OPTIONS]</span>
</pre></div>
</div>
</div>
<div class="section" id="id235">
<h5>OPTIONS<a class="headerlink" href="#id235" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−aw</span></code> = Ask input band weights.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−automax</span></code> = Use automatically computed maximum distance threshold</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−4n</span></code> = Describes the pixel connectivity . Default is <code class="code docutils literal notranslate"><span class="pre">−8n</span></code>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−automin</span></code> = Use automatically computed minimum distance threshold -</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−region</span></code> = Use “Segmentation with directed trees” −method for initial segmentation</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−th</span></code> threshold = give a user defined threshold value for above mentioned initial segmentation</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−ttest</span></code> = use t−value based merging criteria</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="code docutils literal notranslate"><span class="pre">-4n</span></code> is indicated, the neighborhood is reduced to consider only top, bottom, left and right pixels.</p>
</div>
<p>Additional Options upon Execution</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">−Min.</span> <span class="pre">segment</span> <span class="pre">size</span> <span class="pre">?</span></code>: Minimum segment size in pixels.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">Min.</span> <span class="pre">spec</span> <span class="pre">.</span> <span class="pre">dist</span> <span class="pre">.</span> <span class="pre">btw</span> <span class="pre">segs</span> <span class="pre">?</span></code>: Not asked if <code class="code docutils literal notranslate"><span class="pre">−automin</span></code> is specified above.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−Max.</span> <span class="pre">spec.</span> <span class="pre">dist.</span> <span class="pre">btw</span> <span class="pre">segs?</span></code>: Not asked if <code class="code docutils literal notranslate"><span class="pre">−automax</span></code> is specified above.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">−Use</span> <span class="pre">size</span> <span class="pre">weighting</span> <span class="pre">?</span></code>: 0 indicates no size weighting , 1 indicates use size weighting.</p></li>
</ul>
</div>
<div class="section" id="id236">
<h5>DESCRIPTION<a class="headerlink" href="#id236" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code> region merging segmentation.</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code> uses a simple iterative region merging algorithm to merge each segment with its spectrally nearest adjacent segment. The spectral distance (D) between the segments is computed using all input bands and Euclidean distance or t-value. In the latter case the t-value is computed using the equation for equal or unequal sample sizes, unequal variances.</p></li>
<li><p>The algorithm is controlled by three parameters: minimum segment size in pixels (MinSize), and minimum required (MinDist) and maximum allowed (MaxDist) spectral distances in the feature space. The conditional merging is done in two phases. First, all segments which are 1) smaller than MinSize and 2) have a neighboring segment to which the spectral distance is &lt;MaxDist are merged. This step is iterated until no such segments exist. After that, all segments which have an adjacent segment with D &lt;MinDist are merged with their spectrally nearest neighbor.</p></li>
<li><p>In addition, the user can choose to weight the distance computation with the size (pixels) of the neighboring segment.</p></li>
<li><p>The tool can also compute the MinDist and MaxDist thresholds automatically. To do that, use <code class="code docutils literal notranslate"><span class="pre">-automin</span></code> and/or <code class="code docutils literal notranslate"><span class="pre">-automax</span></code> options. Otherwise the tool will ask for user input.</p></li>
<li><p>If you do not want to use MinDist or MaxDist parameters or size weighting, reply 0 when the parameter is asked.</p></li>
<li><p>If the given MinSize is 0 and the program is being run without <code class="code docutils literal notranslate"><span class="pre">-region</span></code> option, an image with unique labels for every pixel is produced. Otherwise using MinSize 0 will output initial segments produced using the other method.</p></li>
<li><p>If a mask is given, initial segments are read from the mask.</p></li>
<li><p>To do a hierarchical segmentation, the user should run the first iteration without a mask. In the subsequent iterations the resulting output of the previous segmentation step should be fed to the process using <code class="code docutils literal notranslate"><span class="pre">-um</span></code> option.</p></li>
<li><p>In case the input image is large and computing resources are low, an alternative method can be used. The initial segmentation can be produced using <code class="code docutils literal notranslate"><span class="pre">oft-cluster.bash</span></code> <code class="code docutils literal notranslate"><span class="pre">oft-clump</span></code> and the final removal of undesired small segments with <code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A further tool <code class="code docutils literal notranslate"><span class="pre">oft-segstat</span></code> can then be used to extract segment level shape (size, bounding box, # edge pixels) and spectral statistics (averages and standard deviations) to a text file.</p>
</div>
</div>
<div class="section" id="id237">
<h5>EXAMPLE<a class="headerlink" href="#id237" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code>, <code class="code docutils literal notranslate"><span class="pre">gdal_polygonize.py</span></code></p>
<p>Open your working directory using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~</span>
</pre></div>
</div>
<p>Now we run <code class="code docutils literal notranslate"><span class="pre">oft-seg</span></code> to do the hierarchical segmentation with Input: <code class="code docutils literal notranslate"><span class="pre">landsat_t1.tif</span></code> ; Output: <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−seg landsat_t1.tif landsat_t1_min50.tif</span>
</pre></div>
</div>
<p>The tool will ask you now further details which we will define in this exercise as followed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Please give NODATA value : 0</span>
<span class="go">Min. segment size ?: 50</span>
<span class="go">Min. spec. dist. btw segs?: 0</span>
<span class="go">Max. spec. dist. btw segs?: 0 Use size weighting ?: 0</span>
</pre></div>
</div>
<p>In the next step we create a shapefile where pixels of the same value, with other words of the same segment, combined into one polygon. Input: <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code>, Output: <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.shp</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gdal_polygonize.py landsat_t1_min50.tif −f &quot;ESRI Shapefile&quot; landsat_t1_min50.shp</span>
</pre></div>
</div>
<p>Open your file <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code> in QGIS and overlay it with <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.shp</span></code>.</p>
<ul class="simple">
<li><p>Right click of the shapefile -&gt;Properties-&gt;Label-&gt;tick display label and under Field containing label chose DN</p></li>
<li><p>Right click of the shapefile -&gt;Properties-&gt;Style-&gt;Transparency e.g. 50%</p></li>
</ul>
<p>Now zoom in and will see something similar to the image displayed, depending on the area you are zooming in, where each polygon refers to one segment and the displayed number is the corresponding ID.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>some segments have the same ID, but they still belong to the same segment as they are connect through neighboring corner pixels.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The segmentation image <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code> can be used in a further step for <code class="code docutils literal notranslate"><span class="pre">oft-segstat</span></code>.</p>
</div>
<div class="figure align-default" id="id273">
<img alt="../_images/oft-seg.png" src="../_images/oft-seg.png" />
<p class="caption"><span class="caption-text">The segmentation image <code class="code docutils literal notranslate"><span class="pre">landsat_t1_min50.tif</span></code></span><a class="headerlink" href="#id273" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="projection">
<h3>PROJECTION<a class="headerlink" href="#projection" title="Permalink to this headline">¶</a></h3>
<div class="section" id="oft-getproj-bash">
<h4>oft-getproj.bash<a class="headerlink" href="#oft-getproj-bash" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id238">
<h5>NAME<a class="headerlink" href="#id238" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-getproj.bash</span></code> - fetches projection definition files for UTM zones.</p>
</div>
<div class="section" id="id239">
<h5>SYNOPSIS<a class="headerlink" href="#id239" title="Permalink to this headline">¶</a></h5>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft-getproj.bash</span>
</pre></div>
</div>
</div>
<div class="section" id="id240">
<h5>DESCRIPTION<a class="headerlink" href="#id240" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">oft-getproj.bash</span></code> fetches projection definition files for UTM zones: - Downloads OGC WKT projection definition files for user-defined UTM S or N zones (in WGS84) from <a class="reference external" href="http://spatialreference.org/ref/epsg/">http://spatialreference.org/ref/epsg/</a>.</p>
<ul class="simple">
<li><p>Creates directory <code class="code docutils literal notranslate"><span class="pre">∼/ogcwkt</span></code> if does not exist, otherwise uses the existing</p></li>
<li><p>Copies the downloaded files there and can be viewed with a text editor</p></li>
</ul>
</div>
<div class="section" id="id242">
<h5>EXAMPLE<a class="headerlink" href="#id242" title="Permalink to this headline">¶</a></h5>
<p>For this exercise following tools are used: <code class="code docutils literal notranslate"><span class="pre">oft-getproj.bash</span></code></p>
<p>Run the <code class="code docutils literal notranslate"><span class="pre">oft-getproj.bash</span></code> for the UTM zone 20N:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−getproj.bash 20N</span>
</pre></div>
</div>
<p>Fetching the projection definition for several zones:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">oft−getproj.bash 21N 22N 25N 31S</span>
</pre></div>
</div>
<p>Change your working directory to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd  ̃/ ogcwkt</span>
</pre></div>
</div>
<p>Here you can find the downloaded projection definition file for the UTM zone 20N (<code class="code docutils literal notranslate"><span class="pre">WGS84_UTM_20N.ogcwkt</span></code>). Open it with any text editor program, such as <code class="code docutils literal notranslate"><span class="pre">gedit</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PROJCS[&quot;WGS 84 / UTM zone 20N&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS 1984&quot;,
SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;
7030&quot;]] , AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
PRIMEM [ &quot;Greenwich&quot; , 0 , AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],
UNIT [ &quot;degree&quot;, 0.01745329251994328, AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]] ,
AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]] , UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]] , PROJECTION[&quot;Transverse Mercator&quot;] , PARAMETER[&quot;latitude of origin&quot;,0],
PARAMETER[&quot;central meridian&quot;,−63], PARAMETER[&quot;scale factor&quot;,0.9996],
PARAMETER[&quot;false easting&quot;,500000],
PARAMETER[&quot;false northing&quot; ,0] , AUTHORITY[&quot;EPSG&quot; ,&quot;32620&quot;] ,
A X I S [ &quot;Easting&quot; , EAST ] , AXIS[&quot;Northing&quot; ,NORTH]]
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2020-2021, the SEPAL development team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.3.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>