
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perform area estimation analysis with SEPAL-CEO &#8212; SEPAL  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CCDC" href="ccdc.html" />
    <link rel="prev" title="SEPAL recipes" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/sepal.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../setup/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Cookbook
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../modules/index.html">
  Modules
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../cli/index.html">
  CLI
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../team/index.html">
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/openforis/sepal" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/OpenForis" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://gis.stackexchange.com/questions/tagged/sepal" rel="noopener" target="_blank" title="GIS Stackexchange">
            <span><i class="fab fa-stack-exchange"></i></span>
            <label class="sr-only">GIS Stackexchange</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/channel/UCtpxScciUj0fjMmhpYsAZbA/featured" rel="noopener" target="_blank" title="Youtube">
            <span><i class="fab fa-youtube"></i></span>
            <label class="sr-only">Youtube</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Perform area estimation analysis with SEPAL-CEO
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ccdc.html">
   CCDC
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ccdc_slice.html">
   CCDC Slice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="classification.html">
   CLassification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="optical_mosaic.html">
   Optical mosaic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="planet_mosaic.html">
   planet mosaic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="radar_mosaic.html">
   radar mosaic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sop_template.html">
   Creating Standard Operating Procedures (SOPs) for Sample-based Area Estimation for REDD+
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="time_series.html">
   Time series
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="vizualisation.html">
   vizualisation
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#project-planning-information">
     Project Planning Information
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mosaic-generation-landsat-sentinel-2">
   Mosaic generation (Landsat &amp; Sentinel 2)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-landsat-mosaic">
     Create a Landsat Mosaic
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#name-and-save-your-recipe-and-mosaic">
     Name and Save your Recipe and Mosaic
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#image-classification">
   Image classification
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#response-design-for-classification">
     Response design for classification
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specify-the-classification-scheme">
       Specify the classification scheme
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-mosaic-for-classification">
     Create a mosaic for classification
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-and-exporting-a-mosaic-for-a-drawn-aoi">
       Creating and exporting a mosaic for a drawn AOI
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#finding-your-earth-engine-asset">
       Finding your Earth Engine Asset
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-classification-training-data-collection">
     Creating a classification &amp; training data collection
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#set-up-your-classification">
       Set up your classification
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#collect-training-data-points">
       Collect training data points
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#classification-using-machine-learning-algorithms-random-forests">
     Classification using machine learning algorithms (Random Forests)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#add-training-data-collected-outside-of-sepal">
       Add training data collected outside of sepal
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#review-additional-classification-options">
       Review additional classification options
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#qa-qc-considerations-and-methods">
       QA/QC considerations and methods
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#image-change-detection">
   Image change detection
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#two-date-change-detection">
     Two date change detection
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#create-mosaics-for-change-detection">
       Create mosaics for change detection
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#start-the-classification">
       Start the classification
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#collect-change-classification-training-data">
       Collect change classification training data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#two-date-classification-retrieval">
       Two date classification retrieval
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#quality-assurance-and-quality-control">
       Quality assurance and quality control
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calculating-above-ground-biomass-and-change">
     Calculating above-ground biomass and change
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#downloading-the-alos-mosaics">
       Downloading the ALOS mosaics
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#processing-the-data-and-producing-outputs">
       Processing the data and producing outputs
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#displaying-your-outputs">
       Displaying your outputs
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#additional-resources">
       Additional Resources
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deforest-tool">
     Deforest Tool
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-preparation">
       Data preparation
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#optional-jupyter-notebook-basics">
       (Optional) Jupyter notebook basics
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#preparing-you-data">
       Preparing you data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#setup">
       Setup
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#process-the-time-series">
       Process the time series
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-visualization">
       Data visualization
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Additional Resources
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-approaches-to-time-series-analysis">
     Other approaches to time series analysis
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bfast-explorer">
       BFAST Explorer
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#timesync-and-landtrendr">
       TimeSync and LandTrendr
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#timesync">
         TimeSync
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#landtrendr">
         LandTrendr
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sample-based-estimation-of-area-and-accuracy">
   Sample-based estimation of area and accuracy
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sample-design-and-stratification">
     Sample design and stratification
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#uploading-files-to-sepal">
       Uploading files to SEPAL
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-a-stratified-random-sample">
       Creating a stratified random sample
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-a-ceo-project-via-csv">
       Creating a CEO project via CSV
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-collection-with-data-quality-management-approaches">
     Data collection with data quality management approaches
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specify-a-classification-scheme">
       Specify a classification scheme
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#planning-data-collection">
       Planning data collection
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#determine-level-of-effort">
         Determine level of effort
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#identify-data-collection-participants">
         Identify data collection participants
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#organize-training-and-calibration-sessions">
         Organize training and calibration sessions
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#distribute-and-assign-sample-units-to-interpreters">
         Distribute and assign sample units to interpreters
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#collecting-data">
       Collecting data
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#data-collection-by-interpreters">
         Data collection by interpreters
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#data-collection-in-ceo">
         Data collection in CEO
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#data-collection-in-ceo-sepal-bridge">
         Data collection in CEO-SEPAL bridge
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#data-assembly">
         Data assembly
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#quality-management-and-archiving-quality-assurance">
       Quality management and archiving - Quality Assurance
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#quality-management-and-archiving-quality-control">
       Quality management and archiving - Quality Control
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#area-and-uncertainty-estimation">
     Area and uncertainty estimation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#understanding-the-error-matrix">
       Understanding the error matrix
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#preparing-your-ceo-collected-data-for-analysis-in-sepal">
       Preparing your CEO collected data for analysis in SEPAL
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-the-stratified-estimator-in-sepal">
       Using the stratified estimator in SEPAL
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documentation-and-archiving">
   Documentation and archiving
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#logging-decision-points">
     Logging decision points
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reporting">
     Reporting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#commenting-in-scripts">
     Commenting in Scripts
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#transparent-coding-github-and-saving-gee-scripts">
     Transparent coding: GitHub and saving GEE scripts
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#version-control-and-git">
       Version Control and Git
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#google-earth-engine-version-control">
       Google Earth Engine version control
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-archiving-and-creating-metadata">
     Data archiving and creating metadata
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-archiving">
       Data archiving
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-metadata">
       Creating metadata
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   conclusion
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/openforis/sepal-doc/edit/master/docs/source/cookbook/area_estimation.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="perform-area-estimation-analysis-with-sepal-ceo">
<h1>Perform area estimation analysis with SEPAL-CEO<a class="headerlink" href="#perform-area-estimation-analysis-with-sepal-ceo" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All thanks goes to <a class="reference external" href="https://sig-gis.com">SIG-GIS</a> for this documentation material.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To follow this tutorial, you need to:</p>
<ul class="simple">
<li><p>register to SEPAL</p></li>
<li><p>register to GEE</p></li>
<li><p>register to CEO</p></li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Welcome to area estimation with SEPAL and CEO!</p>
<p>In this manual, you will learn how to perform area estimation for land use/land cover and two date change detection classifications. We will use sample-based approaches to area estimation. This approach is preferred over pixel-counting methods because all maps have errors. For example, maps derived from land cover land use classifications may have errors due to pixel mixing, or noise in the input data. Using pixel-counting methods will produce biased estimates of area, and you cannot tell whether these are overestimates or underestimates. Sample based approaches create unbiased estimates of area and the error associated with your map.</p>
<p>The goal of this manual is to teach you how to perform these tasks such that you can conduct your own area estimation for land use/land cover or change detection classifications.</p>
<p>In this manual, you will find four modules covering methods, and one module covering the documentation needed for replicating these methods. The modules are as follows:</p>
<ul class="simple">
<li><p>In <a class="reference internal" href="#module-1">module 1</a>, you will learn how to generate mosaics based on satellite imagery in SEPAL. You will learn how to build these mosaics by selecting different data sources and images based on dates and cloud cover.</p></li>
<li><p>In <a class="reference internal" href="#module-2">module 2</a>, you will learn how to perform a land use/land cover image classification using random forest methods. You will learn how to define your land uses and land covers, collect training data, and run your model.</p></li>
<li><p>In <a class="reference internal" href="#module-3">module 3</a>, you will learn how to perform image change detection. Building on skills from <a class="reference internal" href="#module-1">module 1</a> and <a class="reference internal" href="#module-2">module 2</a>, you will define what change looks like, collect training data, and run your model. You will also learn about different tools to perform time series analysis.</p></li>
<li><p>In <a class="reference internal" href="#module-4">module 4</a>, you will learn how to calculate a sample-based estimate of area and error. You will learn how to use stratified random sampling and verification image analysis in order to calculate area and error estimates based on the classification you create in <a class="reference internal" href="#module-2">module 2</a>. You will also learn about some key documentation steps in preparation for <a class="reference internal" href="#module-5">module 5</a>.</p></li>
<li><p>In <a class="reference internal" href="#module-5">module 5</a>, you will learn about documenting and archiving your area estimation project. The information in this step is required for your project to be replicated by yourself or your colleagues in the future, either for additional areas or points in time.</p></li>
</ul>
<p>These exercises include step-by-step directions and are built to facilitate learning through reading and by doing. This manual will be accompanied by short videos, which will visually illustrate the steps described in the text.</p>
<div class="graphviz"><img src="../_images/graphviz-8b0e6ee5250fe30871c69a0a38c80fc77b26db55.png" alt="digraph process {
       mosaic [label=&quot;Mosaic Image creation&quot;, href=&quot;#mosaic-generation-landsat-sentinel-2&quot;, shape=box];
       classif [label=&quot;Image classification&quot;, href=&quot;#image-classification&quot;, shape=box];
       change [label=&quot;Two dates cange detection&quot;, href=&quot;#image-change-detection&quot;, shape=box];
       sample [label=&quot;Sample based area and error&quot;, href=&quot;#sample-based-estimation-of-area-and-accuracy&quot;, shape=box];
       doc [label=&quot;Documentation&quot;, href=&quot;#documentation-and-archiving&quot;, shape=box];
       mosaic -&gt; classif;
       mosaic -&gt; change;
       classif -&gt; sample;
       change -&gt; sample;
       sample -&gt; doc;
    }" usemap="#process" class="graphviz" /></div>
<map id="process" name="process">
<area shape="rect" id="node1" href="#mosaic-generation-landsat-sentinel-2" title="Mosaic Image creation" alt="" coords="102,5,293,53"/>
<area shape="rect" id="node2" href="#image-classification" title="Image classification" alt="" coords="5,101,173,149"/>
<area shape="rect" id="node3" href="#image-change-detection" title="Two dates cange detection" alt="" coords="198,101,413,149"/>
<area shape="rect" id="node4" href="#sample-based-estimation-of-area-and-accuracy" title="Sample based area and error" alt="" coords="83,197,312,245"/>
<area shape="rect" id="node5" href="#documentation-and-archiving" title="Documentation" alt="" coords="130,293,265,341"/>
</map><p>Our primary tool for this Manual is the System for Earth Observation Data Access, Processing, &amp; Analysis for Land Monitoring (SEPAL). SEPAL is a web based cloud computing platform that enables users to create image composites, process images, download files, create stratified sampling designs, and more all from your browser. SEPAL is a system for earth observations, data access, processing &amp; analysis for land monitoring, which is a cloud-based computing software designed by the United Nation’s Food and Agricultural Organization (FAO) to aid in remote sensing applications in developing countries. SEPAL is part of the Open Foris suite of tools. Geoprocessing is possible via Jupyter, JavaScript, R, R Shiny apps, and Rstudio. SEPAL also integrates with Collect Earth Online (CEO) and the Google Earth Engine (GEE).</p>
<p>SEPAL provides a platform for users to access satellite imagery (Landsat and Sentinel-2) and perform change detection and land cover classifications using a set of easy-to-use tools. SEPAL was designed to be used in developing countries where internet access is limited and computers are often outdated and, thus, inefficient for processing satellite imagery. It achieves this by drawing on a cloud-based supercomputer, which enables users to process, store, and interpret large amounts of data. Many more advanced functions than what we will cover here are available in SEPAL for more advanced users.</p>
<p>We will also use two other tools that SEPAL integrates with: CEO and GEE. Collect Earth Online (CEO), is a free and open-source image viewing and interpretation tool, suitable for projects requiring information about land cover and/or land use. CEO enables simultaneous visual interpretations of satellite imagery, providing global coverage from MapBox and Bing Maps, a variety of satellite data sources from Google Earth Engine, and the ability to connect to your own Web Map Service (WMS) or Web Map Tile Service (WMTS). The full functionality is implemented online, no desktop installation is necessary. CEO allows institutions to create projects and leverage their teams to collect spatial data using remote sensing imagery. Use cases include historical and near-real-time interpretation of satellite imagery and data collection for land cover/land use model validation.</p>
<p>Google Earth Engine (GEE) combines a multi-petabyte catalog of satellite imagery and geospatial dataset with planetary-scale analysis capabilities and makes it available for scientists, researchers, and developers to detect changes, map trends, and quantify differences on the Earth’s surface. The code portion of GEE (called Code Editor) is a web-based IDE for the Earth Engine JavaScript API. Code Editor features are designed to make developing complex geospatial workflows fast and easy. The Code Editor has the following elements: JavaScript code editor; a map display for visualizing geospatial dataset; an API reference documentation (Docs tab); Git-based Script Manager (Scripts tab); Console output (Console tab); Task Manager (Tasks tab) to handle long-running queries; Interactive map query (Inspector tab); search of the data archive or saved scripts; and geometry drawing tools.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>You can find more information at these sites, among others:</p>
<ul class="simple">
<li><p>An older forest change detection manual for SEPAL: <a class="reference external" href="https://drive.google.com/file/d/1kPE2wFNDqNpXycqTJfNUtZf9iWsQHcab/view?usp=sharing">Forest Cover Change Detection with SEPAL</a></p></li>
<li><p>Olofsson et al 2014: <a class="reference external" href="http://www.fao.org/sustainable-forest-management/toolbox/tools/tool-detail/en/c/411863/">FAO - SFM Tool Detail: Good practices for estimating area and assessing accuracy of land change</a></p></li>
<li><p>CEO documentation: <a class="reference external" href="https://collect.earth/support">https://collect.earth/support</a></p></li>
<li><p>GEE documentation: <a class="reference external" href="https://developers.google.com/earth-engine/guides/playground">Earth Engine Code Editor from Google Earth Engine</a></p></li>
<li><p>REDD Compass: <a class="reference external" href="https://reddcompass.org/frontpage">Front Page - GFOI</a></p></li>
<li><p>Reporting and Verification: <a class="reference external" href="https://reddcompass.org/reporting-verification">Reporting and Verification - GFOI</a></p></li>
</ul>
</div>
<div class="section" id="project-planning-information">
<h3>Project Planning Information<a class="headerlink" href="#project-planning-information" title="Permalink to this headline">¶</a></h3>
<p>Project planning and methods documentation play a key role in any remote sensing analysis project. While we use example projects in this Manual, in the future you may use these techniques for your own projects. We encourage you to think about the following items to ensure your resulting products will be relevant, and that your chosen methods are well documented and transparent.</p>
<ul class="simple">
<li><p>Descriptions and Objectives of the Project (State issues and information needs). Are you trying to conform to an IPCC Tier?</p></li>
<li><p>Descriptions of the end user product (data, information, monitoring system or map that will be created by the project).  What type of information do you need? A map? An inventory? A change product? That is, do you need to know where different land cover types exist or do you just need an inventory of how much there is?</p></li>
<li><p>How will success be defined for this project? Do you require specific accuracy or a certain level of detail in the final map product?</p></li>
<li><p>Description of the project area / extent (national/subnational/specific forest/etc.)</p></li>
<li><p>Description of the features/classes to be modeled or mapped.</p>
<ul>
<li><p>Do you have a national definition of “forest”?</p></li>
<li><p>Are you aware of the IPCC guidelines for the recommended land use classes and how they will relate to mapping land cover?</p></li>
<li><p>Do you have key categories that will drive different analysis techniques?</p></li>
</ul>
</li>
<li><p>Considerations for measuring, reporting, and verifying your data.</p>
<ul>
<li><p>Do you have a strategy; do you know what is required? Do you know where to get the required information? Looking ahead, are you on the right path (who are the decision makers that will inform these strategies?)</p></li>
<li><p>What field data will be required for classification and accuracy assessment?</p></li>
<li><p>Do you have an existing National Forest Monitoring System (NFMS) in place?</p></li>
</ul>
</li>
<li><p>Will you supplement your remote sensing project with existing data (local data on forest type, management intent, records of natural disturbance…)?</p></li>
<li><p>Partnerships (vendors, agencies, bureaus, etc.)</p></li>
</ul>
</div>
</div>
<div class="section" id="mosaic-generation-landsat-sentinel-2">
<span id="module-1"></span><h2>Mosaic generation (Landsat &amp; Sentinel 2)<a class="headerlink" href="#mosaic-generation-landsat-sentinel-2" title="Permalink to this headline">¶</a></h2>
<p>SEPAL provides a robust interface for generating Landsat and Sentinel 2 mosaics. Mosaic creation is the first step for the image classification and two date change detection processes covered in <a class="reference internal" href="#module-2">module 2</a> and <a class="reference internal" href="#module-3">module 3</a> respectively. These mosaics can be downloaded locally or to your Google Drive.</p>
<p>In this tutorial, you will create a Landsat mosaic for the Mai Ndombe region of the Democratic Republic of the Congo, where REDD+ projects are currently underway.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Objectives</strong></p>
<ul class="simple">
<li><p>Learn how to create an image mosaic</p></li>
<li><p>Become familiar with a variety of options for selecting dates, sensors, mosaicking and download options.</p></li>
<li><p>Create a cloud-free mosaic for 2016</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>SEPAL account</p></li>
</ul>
</div>
<div class="section" id="create-a-landsat-mosaic">
<h3>Create a Landsat Mosaic<a class="headerlink" href="#create-a-landsat-mosaic" title="Permalink to this headline">¶</a></h3>
<p>If SEPAL is not already open, click to open SEPAL in your browser: <a class="reference external" href="https://sepal.io/">https://sepal.io/</a> and login.
Click on the <code class="code docutils literal notranslate"><span class="pre">Processing</span></code> tab.
Then, click on <code class="code docutils literal notranslate"><span class="pre">Optical</span> <span class="pre">Mosaic</span></code>.
When the Optical Mosaic tab opens, you will see an <strong>Area of Interest</strong> window in the lower right hand corner of your screen.</p>
<p>There are three ways to choose your area of interest. Bring up the menu by clicking the carrot to the right of the window label.</p>
<ul class="simple">
<li><p>Select Country/Province (the default)</p></li>
<li><p>Select from EE table</p></li>
<li><p>Draw a polygon</p></li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/area_of_interest.png"><img alt="The Area of Interest menu" src="../_images/area_of_interest.png" style="width: 350px;" /></a>
</div>
<p>We will use the <code class="code docutils literal notranslate"><span class="pre">Select</span> <span class="pre">a</span> <span class="pre">country/province</span></code> option.</p>
<p>In the list of countries that pops up, scroll down until you see the available options for <strong>Congo, Dem Republic of</strong>. Note there is also the Republic of Congo, which is not what we’re looking for.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Under Province/Area, notice that there are many different options.</p>
</div>
<p>Select <code class="code docutils literal notranslate"><span class="pre">Mai-Ndombe</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Optional</strong>: You can add a <strong>Buffer</strong> to your mosaic. This will include an area around the province of the specified size in your mosaic.</p>
</div>
<p>Click <code class="code docutils literal notranslate"><span class="pre">Next</span></code>.</p>
<div class="figure align-center">
<img alt="The Country or Province selection screen." src="../_images/country_province.png" />
</div>
<p>In the <code class="code docutils literal notranslate"><span class="pre">Date</span></code> menu you can select the <code class="code docutils literal notranslate"><span class="pre">Year</span></code> you are interested in or click on <code class="code docutils literal notranslate"><span class="pre">More</span></code>.</p>
<ul class="simple">
<li><p>This interface allows you to refine the dates or seasons you are interested in.</p></li>
<li><p>You can select a <code class="code docutils literal notranslate"><span class="pre">target</span> <span class="pre">date</span></code> (The date in which pixels in the mosaic should ideally come from), as well as adjust the start and end date flags.</p></li>
<li><p>You can also include additional seasons from the past or the future by adjusting the <code class="code docutils literal notranslate"><span class="pre">Past</span> <span class="pre">Seasons</span></code> and <code class="code docutils literal notranslate"><span class="pre">Future</span> <span class="pre">Seasons</span></code> slider. This will include additional years’ data of the same dates specified. For example, if you’re interested in August 2015, including one future season will also include data from August 2016. This is useful if you’re interested in a specific time of year but there is significant cloud cover.</p></li>
<li><p>For this exercise, let’s create imagery for the dry season of 2019.</p>
<ul>
<li><p>Select July 1 of 2019 as your target date (<strong>2019-07-01</strong>), and move your date flags to <strong>May 1-September 30</strong>.</p></li>
<li><p>Click <code class="code docutils literal notranslate"><span class="pre">Apply</span></code>.</p></li>
</ul>
</li>
</ul>
<div class="figure align-center">
<img alt="The date menu." src="../_images/date_menu.png" />
</div>
<p>Now select the <code class="code docutils literal notranslate"><span class="pre">Data</span> <span class="pre">Sources</span> <span class="pre">(SRC)</span></code> you’d like. Here, select the <strong>Landsat L8 &amp; L8 T2</strong> option. The color of the label turns brown once it has been selected.Then click <code class="code docutils literal notranslate"><span class="pre">Done</span></code>.</p>
<ul class="simple">
<li><p><strong>L8</strong> began operating in 2012 and is continuing to collect data</p></li>
<li><p><strong>L7</strong> began operating in 2001, but has a scan-line error that can be problematic for dates between 2005-present</p></li>
<li><p><strong>L4-5 TM,</strong> collected data from July 1982-May 2012</p></li>
<li><p><strong>Sentinel 2 A+B</strong> began operating in June 2015</p></li>
</ul>
<p>Now SEPAL will load a preview of your data. By default it will show you where RGB band data is available. You can click on the RGB image at the bottom to choose from other combinations of bands or metadata.</p>
<ul class="simple">
<li><p>When it is done, examine the preview to see how much data is available. For this example, coverage is good. However, in the future when you are creating your own mosaic, if there is not enough coverage of your area of interest, you will need to adjust your parameters.</p></li>
<li><p>To do so, notice the five tabs in the lower right. You can adjust the initial search parameters using the first three of these tabs. For example, Click on <code class="code docutils literal notranslate"><span class="pre">Dat</span></code> to expand the date range if you would like.</p></li>
<li><p>The last two tabs are for <code class="code docutils literal notranslate"><span class="pre">scene</span> <span class="pre">selection</span></code> and <code class="code docutils literal notranslate"><span class="pre">composite</span></code>, which are more advanced filtering steps. We’ll cover those now.</p></li>
</ul>
<div class="figure align-center">
<img alt="A preview of your mosaic." src="../_images/mosaic_preview.png" />
</div>
<p>We’re now going to go through the <strong>scene selection process</strong>. This allows you to change which specific images to include in your mosaic.</p>
<ul class="simple">
<li><p>You can change the scenes that are selected using the <code class="code docutils literal notranslate"><span class="pre">SCN</span></code> button on the lower right of the screen. You can use all scenes or select which are prioritized. You can revert any changes by clicking on <code class="code docutils literal notranslate"><span class="pre">Use</span> <span class="pre">All</span> <span class="pre">Scenes</span></code> and then <code class="code docutils literal notranslate"><span class="pre">Apply</span></code>.</p></li>
<li><p>Change the <strong>Scenes</strong> by selecting <strong>Select Scenes</strong> with Priority: <strong>Target Date</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="Selecting scenes for your mosaic." src="../_images/scene_selection.png" />
</div>
<p>Click <code class="code docutils literal notranslate"><span class="pre">Apply</span></code>. The result should look like the below image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice the collection of circles over the <strong>Mai Ndombe</strong> study area and that they are all populated with a zero. These represent the locations of scenes in the study area and the numbers of images per scene that are selected. The number is currently 0 because we haven’t selected the scenes yet.</p>
</div>
<div class="figure align-center">
<img alt="Scene selection process showing zeros before selection." src="../_images/scene_selection_zeros.png" />
</div>
<p>Click the <code class="code docutils literal notranslate"><span class="pre">Auto-Select</span></code> button to auto-select some scenes.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/auto_select_scenes.png"><img alt="Arrow showing the button for auto selecting scenes." src="../_images/auto_select_scenes.png" style="width: 550px;" /></a>
</div>
<p>You may set a minimum and maximum number of images per scene area that will be selected. Increase the minimum to <strong>2</strong> and the maximum to <strong>100</strong>. Click <code class="code docutils literal notranslate"><span class="pre">Select</span> <span class="pre">Scenes</span></code>. If there is only one scene for an area, that will be the only one selected despite the minimum.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/auto_select_scenes_menu.png"><img alt="Menu for auto selecting scenes." src="../_images/auto_select_scenes_menu.png" style="width: 350px;" /></a>
</div>
<p>You should now see imagery overlain with circles indicating how many scenes are selected.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/imagery_number_scenes.png"><img alt="Example of the imagery with the number of scenes selected" src="../_images/imagery_number_scenes.png" style="width: 450px;" /></a>
</div>
<p>You will notice that the circles that previously displayed a zero now display a variety of numbers. These numbers represent the number of Landsat images per scene that meet your specifications.</p>
<p>Hover your mouse over one of the circles to see the footprint (outline) of the Landsat scene that it represents. Click on that circle.</p>
<div class="figure align-center">
<img alt="The select scenes interface showing 0 available and 4 selected scenes" src="../_images/select_scenes_interface.png" />
</div>
<p>In the window that opens, you will see a list of selected scenes on the right side of the screen. These are the images that will be added to the mosaic. There are three pieces of information for each:</p>
<ul class="simple">
<li><p>Satellite (e.g. L8, L7, L5 or L4)</p></li>
<li><p>Percent cloud cover</p></li>
<li><p>Number of days from the target date</p></li>
</ul>
<p>To expand the Landsat image, hover over one of the images and click <code class="code docutils literal notranslate"><span class="pre">Preview</span></code>. Click on the image to close the zoomed in graphic and return to the list of scenes.
To remove a scene from the composite, click the <code class="code docutils literal notranslate"><span class="pre">Remove</span></code> button when you hover over the selected scene.</p>
<div class="figure align-center">
<img alt="Removing or previewing selected scenes." src="../_images/remove_preview_scenes.png" />
</div>
<div class="figure align-center">
<img alt="Scene preview screen." src="../_images/scene_preview.png" />
</div>
<p>On the left hand side, you will see <strong>Available Scenes</strong>, which are images that will not be included in the mosaic but can be added to it. If you have removed an image and would like to re-add it or if there are additional scenes you would like to add, hover over the image and click <code class="code docutils literal notranslate"><span class="pre">Add</span></code>.</p>
<ul class="simple">
<li><p>Once you are satisfied with the selected imagery for a given area, click <code class="code docutils literal notranslate"><span class="pre">Close</span></code> in the bottom right corner.</p></li>
<li><p>You can then select different scenes (represented by the circles) and evaluate the imagery for each scene.</p></li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/select_scenes_1.png"><img alt="Select scenes screen showing one available scene and 3 selected scenes" src="../_images/select_scenes_1.png" style="width: 450px;" /></a>
</div>
<p>You can also change the composing method using the <code class="code docutils literal notranslate"><span class="pre">CMP</span></code> button on the lower right.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice that there are several additional options including shadow tolerance, haze tolerance, NDVI importance, cloud masking and cloud buffering.</p>
</div>
<p>For this exercise, we will leave these at their default settings. If you make changes, click <code class="code docutils literal notranslate"><span class="pre">Apply</span></code> after you’re done.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/composite.png"><img alt="The composite menu." src="../_images/composite.png" style="width: 350px;" /></a>
</div>
<p>Now we’ll explore the <code class="code docutils literal notranslate"><span class="pre">Bands</span></code> dropdown. Click on the <code class="code docutils literal notranslate"><span class="pre">Red|Green|Blue</span></code> at the bottom of the page.</p>
<div class="figure align-center">
<img alt="Arrow pointing at the red, green, blue bands." src="../_images/arrow_bands.png" />
</div>
<p>The below dropdown menu will appear.</p>
<ul class="simple">
<li><p>Select the <strong>NIR, RED, GREEN</strong> band combination. This band combination displays vegetation as red, with darker reds indicating dense vegetation. Bare ground and urban areas appear grey or tan, while water appears black. NIR stands for near infrared.</p></li>
<li><p>Once selected, the preview will automatically show what the composite will look like.</p></li>
<li><p>Use the scroll wheel on your mouse to zoom in to the mosaic and then click and drag to pan around the image. This will help you assess the quality of the mosaic.</p></li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/bands_menu.png"><img alt="The band combinations menu." src="../_images/bands_menu.png" style="width: 350px;" /></a>
</div>
<p>The map now shows the complete mosaic that incorporates all of the user-defined settings. Here is an example, yours may look different depending on which scenes you chose.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/completed_mosaic.png"><img alt="The imagery preview with the completed mosaic shown." src="../_images/completed_mosaic.png" style="width: 450px;" /></a>
</div>
<p>Using what you’ve learned, take some time to explore adjusting some of the input parameters and examine the influence on the output. Once you have a composite you are happy with, we will download the mosaic (instructions follow).</p>
<ul class="simple">
<li><p>For example, if you have too many clouds in your mosaic, then you may want to adjust some of your settings or choose a different time of year when there is a lower likelihood of cloud cover.</p></li>
<li><p>The algorithm used to create this mosaic attempts to remove all cloud cover, but is not always successful in doing so. Portions of clouds often remain in the mosaic.</p></li>
</ul>
</div>
<div class="section" id="name-and-save-your-recipe-and-mosaic">
<h3>Name and Save your Recipe and Mosaic<a class="headerlink" href="#name-and-save-your-recipe-and-mosaic" title="Permalink to this headline">¶</a></h3>
<p>Now, we will name the ‘recipe’ for creating the mosaic and explore options for the recipe.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will use this recipe when working with the classification or change detection tools, as well as when loading SEPAL mosaics into SEPAL’s Collect Earth Online.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can make the recipe easier to find by naming it. Click on the tab in the upper right and type in a new name. For this example use <em>MiaNdombe_LS8_2019_Dry.</em></p>
</div>
<p>Now let’s explore options for the recipe. Click on the three lines in the upper right hand corner.</p>
<ul class="simple">
<li><p>You can <strong>Save the recipe</strong> (SEPAL will do this automatically on retrieval) so that it is available later.</p></li>
<li><p>You can also <strong>Duplicate the recipe</strong>. This is useful for creating two years of data, as we will do in <a class="reference internal" href="#module-3">module 3</a>.</p></li>
<li><p>Finally you can <strong>Export the recipe</strong>. This downloads a zip file with a JSON of your mosaic specifications.</p></li>
</ul>
<p>Click on <code class="code docutils literal notranslate"><span class="pre">Save</span> <span class="pre">recipe….</span></code> This will also let you rename the mosaic if you choose.</p>
<div class="figure align-center">
<img alt="Save, duplicate, export recipe menu." src="../_images/save_duplicate_export_recipe.png" />
</div>
<p>Now if you click on the three lines icon, you should see an additional option: <strong>Revert to old revision…</strong></p>
<div class="figure align-center">
<img alt="After saving the menu adds a revert to old revision option." src="../_images/revert_to_old_revision.png" />
</div>
<p>Clicking on this option brings up a list of auto-saved versions from SEPAL. You can use this to revert changes if you make a mistake.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Now, when you open SEPAL and click the Search option, you will see a row with this name that contains the parameters you just set.</p>
</div>
<div class="figure align-center">
<img alt="Revisions menu dropdown." src="../_images/revision_menu.png" />
</div>
<p>Finally, we will save the mosaic itself. This is called ‘retrieving’ the mosaic. This step is necessary to perform analysis on the imagery.</p>
<p>To download this imagery mosaic to your SEPAL account, click the <code class="code docutils literal notranslate"><span class="pre">Retrieve</span></code> button.</p>
<div class="figure align-center">
<img alt="The retrieve button." src="../_images/retrieve.png" />
</div>
<div class="figure align-center">
<img alt="The retrieve menu" src="../_images/retrieve_menu.png" />
</div>
<p>A window will appear with the following options:</p>
<ul class="simple">
<li><p><strong>Bands to Retrieve:</strong> select the desired bands you would like to include in the download.</p>
<ul>
<li><p>Select the <strong>Blue, Green, Red, NIR, SWIR 1 and SWIR 2</strong> bands. These are visible spectrum and infrared data collected by Landsat.</p></li>
<li><p>Other bands that are available include Aerosol, Thermal, Brightness, Greenness, and Wetness. More information on these can be found at: <a class="reference external" href="https://landsat.gsfc.nasa.gov/landsat-data-continuity-mission/">https://landsat.gsfc.nasa.gov/landsat-data-continuity-mission/</a>.</p></li>
<li><p>Metadata on Date, Day of Year, and Days from Target can also be selected.</p></li>
</ul>
</li>
<li><p><strong>Scale:</strong> the resolution of the mosaic. Landsat data is collected at 30m resolution, so we will leave the slider there.</p></li>
<li><p><strong>Retrieve to:</strong> Sepal Workspace is the default option. Other options may appear depending on your permissions.</p></li>
</ul>
<p>When you have the desired bands selected, click <code class="code docutils literal notranslate"><span class="pre">Retrieve</span></code>.</p>
<p>You will notice the <code class="code docutils literal notranslate"><span class="pre">Tasks</span></code> icon is now spinning. If you click on it, you will see the data retrieval is in process. This step will take some time.</p>
<div class="figure align-center">
<img alt="Retrieval task being carried out" src="../_images/retrieval_task.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will take around <strong>25 minutes</strong> to finish downloading, however, you can move on to the next exercise without waiting for the download to finish.</p>
</div>
</div>
</div>
<div class="section" id="image-classification">
<span id="module-2"></span><h2>Image classification<a class="headerlink" href="#image-classification" title="Permalink to this headline">¶</a></h2>
<p>The main goal of this Module is to construct a single-date land cover map by classification of a Landsat composite generated from Landsat images. Image classification is frequently used to map land cover, describing what the landscape is composed of (grass, trees, water, impervious surface), and to map land use, describing the organization of human systems on the landscape (farms, cities, wilderness). Learning to do image classification well is extremely important and requires experience. So here is your chance to build some experience. You will first consider the types of land cover classes you would like to map and the amount of variability within each class.</p>
<p>There are both supervised (uses human guidance including training data) and unsupervised (no human guidance) classification methods. The random forest approach used here uses training data and is thus a supervised classification method.</p>
<p>There are a number of supervised classification algorithms that can be used to assign the pixels in the image to the various map classes. One way of performing a supervised classification is to utilize a Machine Learning algorithm. Machine Learning algorithms utilize training data combined with image values to learn how to classify pixels. Using manually collected training data, these algorithms can train a classifier, and then use the relationships identified in the training process to classify the rest of the pixels in the map. The selection of image values (e.g., NDVI, elevation, etc.) used to train any statistical model should be well thought out and informed by your knowledge of the phenomenon of interest to classify your data (e.g., into forest, water, other, and clouds).</p>
<p>In this module, we will create a land cover map using supervised classification in SEPAL. We will train a random forest machine learning algorithm to predict land cover with a user generated reference data set. This data set is collected either in the field or manually through examination of remotely sensed data sources such as aerial imagery. The resulting model is then applied across the landscape. You will complete an accuracy assessment of the map output in <a class="reference internal" href="#module-4">module 4</a>.</p>
<p>Before starting your classification, you will need to create a response design with details about each of the land covers / land uses that you want to classify (Exercise 2.1); create mosaics for your area of interest (in <a class="reference internal" href="#section-2-2">section 2.2</a> we will use a region of Brazil); and collect training data for the model (Exercise 2.3). Then, in Exercise 2.4 we will run the classification and examine our results.</p>
<p>The workflow in this module has been adapted from exercises and material developed by Dr. Pontus Olofsson, Christopher E. Holden, and Eric L. Bullock at the Boston Education in Earth Observation Data Analysis in the Department of Earth &amp; Environment, Boston University. To learn more about their materials and their work, visit their GitHub site at <a class="reference external" href="https://github.com/beeoda">https://github.com/beeoda</a>.</p>
<p>At the end of this module you will have a classified land use land cover map.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section takes approximately 4 hours to complete.</p>
</div>
<div class="section" id="response-design-for-classification">
<span id="section-2-1"></span><h3>Response design for classification<a class="headerlink" href="#response-design-for-classification" title="Permalink to this headline">¶</a></h3>
<p>Creating consistent labeling protocols is necessary for creating accurate training data and later, accurate sample based estimates (see <a class="reference internal" href="#module-4">module 4</a>). They are especially important when more than one researcher is working on a project and for reproducible data collection. Response design helps a user assign a land cover / land use class to a spatial point. The response design is part of the metadata for the assessment and should contain the information necessary to reproduce the data collection. The response design lays out an objective procedure that interpreters can follow and that reduces interpreter bias.</p>
<p>In this exercise, you will build a decision tree for your classification along with much of the other documentation and decision points (for more on decision points, please see <a class="reference internal" href="#section-5-1">section 5.1</a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objective</strong>: Learn how to create a classification scheme for land cover land use classification mapping.</p>
</div>
<div class="section" id="specify-the-classification-scheme">
<h4>Specify the classification scheme<a class="headerlink" href="#specify-the-classification-scheme" title="Permalink to this headline">¶</a></h4>
<p>“Classification scheme” is the name used to describe the land cover and land use classes adopted. It should cover all of the possible classes that occur in the area of interest. Here, you will create a classification scheme with detailed definitions of the land cover and land use classes to share with interpreters.</p>
<p>Create a decision tree for your land cover or land use classes. There may be one already in use by your department. The tree should capture the most important classifications for your study. Here is an example:</p>
<ul class="simple">
<li><p>This example includes a hierarchical component. For example, the green and red categories have multiple sub-categories, which might be multiple types of forest or crops or urban areas. You can also have classification schemes that are all one level with no hierarchical component.</p></li>
<li><p>For this Exercise, we’ll use a simplified land cover and land use classification as in this graph:</p></li>
</ul>
<div class="graphviz"><img src="../_images/graphviz-4cbcbdcee619f77c11df2e0095e59fd8115784d8.png" alt="digraph process {
       lc [label=&quot;Land cover&quot;, shape=box];
       f [label=&quot;Forest&quot;, shape=box, style=&quot;filled&quot; color=&quot;darkgreen&quot;];
       nf [label=&quot;Non forest&quot;, shape=box, style=&quot;filled&quot;, color=&quot;grey&quot;];
       lc -&gt; f;
       lc -&gt; nf;
    }" class="graphviz" /></div>
<p>When creating your own decision tree, be sure to specify if your classification scheme was derived from a template, including the IPCC (Intergovernmental Panel on Climate Change) land-use categories, CLC (CORINE land cover), or LUCAS (land cover and land use, landscape).</p>
<ul class="simple">
<li><p>If applicable, your classification scheme should be consistent with the national land cover and land use definitions.</p></li>
<li><p>In cases where the classification scheme definition is different from the national definition, you will need to provide a reason.</p></li>
</ul>
<p>Create a detailed definition for each land cover and land use and change class included in the classification scheme. We recommend you include measurable thresholds.</p>
<p>Our classification will take place in Brazil, in an area of the Amazon rainforest undergoing deforestation.</p>
<ul>
<li><p>We’ll define Forest as an area with over 70% tree cover.
ii. We’ll define Non-forest as areas with less than 70% tree cover. This will capture urban areas, water, and agricultural fields.</p></li>
<li><p>For creating your own classifications, here’s some things to keep in mind:</p>
<ul class="simple">
<li><p>It is important to have definitions for each of the classes. A lack of clear definitions of the land cover classes can make the quality of the resulting maps difficult to assess, and challenging for others to use. The definitions you come up with now will probably be working definitions that you find you need to modify as you move through the land cover classification process.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As you become more familiar with the landscape, data limitations, and the ability of the land cover classification methods to discriminate some classes better than others, you will undoubtedly need to update your definitions.</p>
</div>
<ul class="simple">
<li><p>As you develop your definitions, you should be relating back to your applications. Make sure that your definitions meet your project objectives. For example, if you are creating a map to be used as part of your UNFCCC greenhouse gas reporting documents you will need to make sure that your definition of forest meets the needs of this application.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above land cover tree is an excerpt of text from the Methods and Guidance from the Global Forest Observations Initiative (GFOI) document that describes the Intergovernmental Panel on Climate Change (IPCC) 2003 Good Practice Guidance (GPG) forest definition and suggestions to consider when drafting your forest definition. When creating your own decision tree, be sure to specify if your definitions follow a specific standard, e.g., using ISO standard Land Cover Meta-Language (LCML, ISO 19144-2) or similar.</p>
</div>
<ul class="simple">
<li><p>During this online training course, you will be mapping land cover across the landscape using the Landsat composite, a moderate resolution data set. You may develop definitions based upon your knowledge from the field or from investigating high resolution imagery. However, when deriving your land cover class definitions, it’s also important to be aware of how the definitions relate to the data used to model the land cover.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will continue to explore this relationship throughout the exercise. Will the spectral signatures between your land cover categories differ? If the spectral signatures are not substantially different between classes, is there additional data you can use to differentiate these categories? If not, you might consider modifying your definitions.</p>
</div>
</li>
</ul>
<p>More resources are available online, for example at <a class="reference external" href="http://www.ipcc.ch/ipccreports/tar/wg2/index.php?idp=132">http://www.ipcc.ch/ipccreports/tar/wg2/index.php?idp=132</a>.</p>
</div>
</div>
<div class="section" id="create-a-mosaic-for-classification">
<span id="section-2-2"></span><h3>Create a mosaic for classification<a class="headerlink" href="#create-a-mosaic-for-classification" title="Permalink to this headline">¶</a></h3>
<p>We first need an image to classify before running a classification. For best results, we will need to create an optical mosaic with good coverage of our study area. We will build on knowledge gained in <a class="reference internal" href="#module-1">module 1</a> to create an optical mosaic in SEPAL and retrieve it to Google Earth Engine.</p>
<p>In SEPAL you can run a classification on either a mosaic recipe or on a GEE asset. It is best practice to run a classification using an asset rather than on-the-fly with a recipe. This will improve how quickly your classification will export and avoid computational limitations.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objectives</strong>:</p>
<ul class="simple">
<li><p>Build on knowledge gained in <a class="reference internal" href="#module-1">module 1</a></p></li>
<li><p>Create a mosaic to be the basis for your classification</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisit</strong>: <a class="reference internal" href="#module-1">module 1</a></p>
</div>
<div class="section" id="creating-and-exporting-a-mosaic-for-a-drawn-aoi">
<h4>Creating and exporting a mosaic for a drawn AOI<a class="headerlink" href="#creating-and-exporting-a-mosaic-for-a-drawn-aoi" title="Permalink to this headline">¶</a></h4>
<p>We will create a mosaic for an area in the Amazon basin. If any of the steps for creating a mosaic are unfamiliar, please revisit <a class="reference internal" href="#module-1">module 1</a>.</p>
<p>Navigate to the Process tab, then create a new optical mosaic by selecting Optical Mosaic on the Process menu.
Under <code class="code docutils literal notranslate"><span class="pre">Area</span> <span class="pre">of</span> <span class="pre">Interest</span></code>:</p>
<ul>
<li><p>Select <strong>Draw Polygon</strong> from the dropdown list.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/aoi_dropdown.png"><img alt="Area of interest dropdown menu." src="../_images/aoi_dropdown.png" style="width: 450px;" /></a>
</div>
</li>
<li><p>Navigate using the map to the State of Rondonia (Brazil) and either draw a polygon around it or draw a polygon within the borders. A smaller polygon will export faster.</p>
<div class="figure align-center">
<img alt="A polygon drawn around the State of Rondonia." src="../_images/rondonia.png" />
</div>
</li>
</ul>
<p>Now use what you have learned in <a class="reference internal" href="#module-1">module 1</a> to create a mosaic with imagery from the year 2019 (whole year or part of year, your choice).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Don’t forget to consider which satellites you would like to include and which scenes you would like to include (all, some).</p>
</div>
<p>Your preview should include imagery data across your entire area of interest. This is important for your classification. Try also to get a cloud-free mosaic, as this makes your classification easier.</p>
<p>Name your mosaic for easy retrieval. Try <strong>Module2_Amazon</strong>.</p>
<p>When you’re satisfied with your mosaic, <strong>Retrieve</strong> it to Google Earth Engine. Be sure to include the red, green, blue, nir, swir1, and swir2 layers. You may choose to add the greenness, etc. layers as well.</p>
</div>
<div class="section" id="finding-your-earth-engine-asset">
<h4>Finding your Earth Engine Asset<a class="headerlink" href="#finding-your-earth-engine-asset" title="Permalink to this headline">¶</a></h4>
<p>For future exercises, you may need to know how to find your Earth Engine Asset.</p>
<ol class="arabic simple">
<li><p>Navigate to <a class="reference external" href="https://code.earthengine.google.com/">https://code.earthengine.google.com/</a> and login.</p></li>
<li><p>Navigate to your <strong>Assets</strong> tab in the left hand column.</p></li>
<li><p>Under <strong>Assets,</strong> look for the name of the mosaic you just exported.</p></li>
<li><p>Click on the mosaic name.</p></li>
<li><p>You will see a window with information about your mosaic pop up.</p></li>
<li><p>Click on the two overlapping box icon to copy your asset’s location.</p></li>
</ol>
<div class="figure align-center">
<img alt="Your mosaic's information pane." src="../_images/mosaic_information.png" />
</div>
</div>
</div>
<div class="section" id="creating-a-classification-training-data-collection">
<span id="section-2-3"></span><h3>Creating a classification &amp; training data collection<a class="headerlink" href="#creating-a-classification-training-data-collection" title="Permalink to this headline">¶</a></h3>
<p>In this exercise, we will learn how to start a classification process and collect training data. These training data points will become the foundation of the classification in <a class="reference internal" href="#section-2-4">section 2.4</a>. High quality training data is necessary to get good land cover map results. In the most ideal situation, training data is collected in the field by visiting each of the land cover types to be mapped and collecting attributes. When field collection is not an option, the second best choice is to digitize training data from high resolution imagery, or at the very least for the imagery to be classified.</p>
<p>In general, there are multiple pathways for collecting training data. Using desktop GIS, including QGIS and ArcGIS, to create a layer of points is one common approach. Using GEE is another approach. You can also use CEO to create a project of random points to identify (see detailed directions in <a class="reference internal" href="#section-4-1-2">section 4.1.2</a>). All of these pathways will create .csv or an GEE table that you can import into SEPAL to use as your training data set.</p>
<p>However, SEPAL has a built-in reference data collection tool in the classifier. In this exercise, we will use this tool to collect training data. Even if you use a .csv or GEE table in the future, this is a helpful feature to collect additional training data points to help refine your model.</p>
<p>In this assignment, you will create training data points using high-resolution imagery, including Planet NICFI data. These will be used to train the classifier in a supervised classification using SEPAL’s random forests algorithm. The goal of training the classifier is to provide examples of the variety of spectral signatures associated with each class in the map.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objectives</strong>: Create training data for your classes that can be used to train a machine learning algorithm.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisites</strong>:</p>
<ul class="simple">
<li><p>SEPAL account</p></li>
<li><p>Land cover categories defined in <a class="reference internal" href="#section-2-1">section 2.1</a>.</p></li>
<li><p>Mosaic created in <a class="reference internal" href="#section-2-2">section 2.2</a></p></li>
</ul>
</div>
<div class="section" id="set-up-your-classification">
<h4>Set up your classification<a class="headerlink" href="#set-up-your-classification" title="Permalink to this headline">¶</a></h4>
<p>In the <strong>Process</strong> menu, click the green plus symbol and select <strong>Classification.</strong></p>
<p>Add the Amazon optical mosaic for classification:</p>
<ul>
<li><p>Click <code class="code docutils literal notranslate"><span class="pre">+</span> <span class="pre">Add</span></code> and choose either <strong>Saved Sepal Recipe</strong> or <strong>Earth Engine Asset</strong> (recommended).</p>
<ul class="simple">
<li><p>If you choose <strong>Saved Sepal Recipe</strong>, simply select your <a class="reference internal" href="#module-2">module 2</a> Amazon recipe.</p></li>
<li><p>If you choose <strong>Earth Engine Asset</strong>, enter the Earth Engine Asset ID for the mosaic. The ID should look like “users/username/Module2_Amazon”.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Remember that you can find the link to your Earth Engine Asset ID via Google Earth Engine’s Asset tab (<a class="reference internal" href="#section-2-2">section 2.2</a>).</p>
</div>
</li>
<li><p>Select bands: Blue, Green, Red, NIR, SWIR1, &amp; SWIR2. You can add other bands as well if you included them in your mosaic.</p></li>
<li><p>You can also include <strong>Derived bands</strong> by clicking on the green button on the lower left.</p></li>
<li><p>Click <code class="code docutils literal notranslate"><span class="pre">Apply</span></code>, then click <code class="code docutils literal notranslate"><span class="pre">Next</span></code>.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Selecting <strong>Saved Sepal Recipe</strong> may cause the following error at the final stage of your classification:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Google Earth Engine error: Failed to create preview</span>
</pre></div>
</div>
<p>This occurs because GEE gets overloaded. If you encounter this error, please retrieve your classification as described in <a class="reference internal" href="#section-2-2">section 2.2</a>.</p>
</div>
<p>In the Legend menu, click <code class="code docutils literal notranslate"><span class="pre">+</span> <span class="pre">Add</span></code> This will add a place for you to write your first class label.</p>
<ul class="simple">
<li><p>You will need two legend entries.</p></li>
<li><p>The first should have the number 1 and a Class label of Forest.</p></li>
<li><p>The second should have the number 2 and a Class  label of Non-forest.</p></li>
<li><p>Choose colors for each class as you see fit.</p></li>
<li><p>Click <code class="code docutils literal notranslate"><span class="pre">Close</span></code>.</p></li>
</ul>
<div class="figure align-center">
<img alt="Classification legend." src="../_images/classification_legend.png" />
</div>
</div>
<div class="section" id="collect-training-data-points">
<h4>Collect training data points<a class="headerlink" href="#collect-training-data-points" title="Permalink to this headline">¶</a></h4>
<p>Now that you have created your classification, you are ready to begin collecting data points for each land cover class.</p>
<p>In most cases, it is ideal to collect a large amount of training data points for each class that capture the variability within each class and cover the different areas of the study area. However, for this exercise, you will only collect a small number of points: around 25 per class. When collecting data points, make sure that your plot contains only the land cover class of interest (no plots with a mixture of your land cover categories).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To help you understand why the random forest algorithm might get some categories you are trying to map confused with others, you will use spectral signatures charts in CEO-SEPAL to look at the NDVI signature of your different land cover classes. You should notice a few things when exploring the spectral signatures of your land cover classes. First, some classes are more spectrally distinct than others. For example, water is consistently dark in the NIR and MIR wavelengths, and much darker than the other classes. This means that it shouldn’t be difficult to separate water from the other land cover classes with high accuracy.</p>
</div>
<p>Not all pixels in the same classes have the exact same values—there is some natural variability! Capturing this variation will strongly influence the results of your classification.</p>
<p>First, let’s become familiar with the SEPAL Interface. In the upper right corner of the map is a stack of three rectangles. If you mouse over this icon, it says “Select layers to view.”</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Available base layers include SEPAL (Minimal dark Sepal default layer), Google Satellite, and Planet NICFI composites.</p>
</div>
<p>We will use the Planet NICFI composites for this example. The composites are available in either RGB or false color infrared (CIR). Composites are available monthly after September 2020 and for every 6 months prior back till 2015.</p>
<ul class="simple">
<li><p>Select RGB, Jun 2019 (6 months).</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also select “Show labels” to enable labels that can help you orient yourself in the landscape.</p>
</div>
<div class="figure align-center">
<img alt="The layers available." src="../_images/layer_view.png" />
</div>
<p>Now click on the point icon. When you mouse over this icon, it says “Enable reference data collection.”</p>
<p>With reference data collection enabled, you can start adding points to your map.</p>
<p>Use the scroll wheel on your mouse to zoom in to the study area. You can click-hold and drag to pan around the map. Be careful though, as a single click will place a point on the map.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you accidentally add a point, you can delete it by clicking on the red <strong>Remove</strong> button.</p>
</div>
<p>Now we will start collecting forest training data:</p>
<ul class="simple">
<li><p>Zoom into an area that is clearly forested. When you find an area that is completely forested, click it once.</p></li>
<li><p>You have just placed a training data point!</p></li>
<li><p>Click the <strong>Forest</strong> button in the training data interface to classify the point.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you haven’t classified the point yet, then you can just click somewhere else on the map instead of deleting the record.</p>
</div>
<div class="figure align-center">
<img alt="Collecting forest data in the SEPAL interface." src="../_images/collecting_forest_data.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ideally you should switch back to the Landsat mosaic to make sure that this forested area is not covered with a cloud. If you mistakenly classify a cloudy pixel as Forest, then the results will be impacted negatively if your Landsat mosaic does have cloud-covered areas.</p>
<p>However, this interface does not allow for switching between the Base Layer imagery and your exported mosaic. If you are using another training data collection method, keep this point in mind.</p>
</div>
<p>If you need to modify classification of any of your data points, you can click on the point to return to the classification (or delete) options.</p>
<p>Begin collecting the rest of the 25 <strong>Forest</strong> training data points throughout other parts of the study area.</p>
<ul class="simple">
<li><p>The study area contains an abundance of forested land, so it should be pretty easy to identify places that can be confidently classified as forest. If you’d like, use the charts function to ensure that there is a relatively high NDVI value for the point.</p></li>
<li><p>Ensure you are placing data points within the extent of the mosaic (Rondonia).</p></li>
</ul>
<p>Collect about 25 points for the <strong>Forest</strong> land cover class.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When you are done, zoom out to the full extent of the area. Did you place data points somewhat equally across the full region? Are all points clustered in the same region? It’s best to make sure you have data points covering the full spatial extent of the study region, add more points in areas that are sparsely represented if needed.</p>
</div>
<p>After you collect your training data for <strong>Forest</strong>, you may see the classification preview appear.</p>
<ul class="simple">
<li><p>To disable the classification preview to continue to collect training data, return to the map layer selector.</p></li>
<li><p>Uncheck the “Classification” Overlay.</p></li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/classification_overlay.png"><img alt="Disabling the classification overlay." src="../_images/classification_overlay.png" style="width: 450px;" /></a>
</div>
<p>Once you are satisfied with your forested training data points, move on to the <strong>Non-Forest</strong> training points.</p>
<ul class="simple">
<li><p>Since we are using a very basic set of land cover classes for this exercise, this should include agricultural areas, water, and buildings and roads. Therefore, it will be important that you focus on collecting a variety of points from different types of land cover throughout the study area.</p></li>
<li><p><strong>Water</strong> is one of the easiest classes to identify and the easiest to model, due to the distinct spectral signature of water.</p>
<ul>
<li><p>Look for water bodies within Rondonia.</p></li>
<li><p>Collect 10-15 data points for Water and be sure to spread them throughout Lake Mai Ndombe, the water sources feeding into it, and a couple of the water bodies/rivers to the eastern side of the mosaic. Be sure to put 2-3 points on rivers.</p></li>
<li><p>Some wetland areas may have varying amounts of water throughout the year, so it is important to check both Planet NICFI maps for 2019. (Jun 2019 and Dec 2019).</p></li>
</ul>
</li>
</ul>
<div class="figure align-center">
<img alt="Collecting data points in water." src="../_images/data_points_water.png" />
</div>
<p>Let’s now collect some building and road non-forest Training Data.</p>
<ul class="simple">
<li><p>There are not very many residential areas in the region. However, if you look you can find homes with dirt roads, and there are some airports as well.</p></li>
<li><p>Place a point or points within these areas and classify them as Non-forest. Do your best to avoid placing the points over areas of the town with lots of trees.</p></li>
<li><p>Find some roads, and place points and classify as Non-forest. These may look like areas of bare soil. Both bare soil and roads are classified as Non-forest, so place some points on both.</p></li>
</ul>
<div class="figure align-center">
<img alt="Collecting residential and other human settlement area data points." src="../_images/data_points_residential.png" />
</div>
<p>Next, place several points in grassland/pasture, shrub, and agricultural areas around the study area.</p>
<ul class="simple">
<li><p>Shrubs or small, non-forest vegetation can sometimes be hard to identify, even with high-resolution imagery. Do your best to find vegetation that is clearly not forest.</p></li>
<li><p>The texture of the vegetation is one of the best ways to differentiate between trees and grasses/shrubs. Look at the below image and notice the clear contrast between the area where the points are placed and the other areas in the image that have rougher textures and that create shadows.</p></li>
</ul>
<div class="figure align-center">
<img alt="Collecting low vegetation data" src="../_images/data_points_low_vegetation.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using QGIS etc. to collect training data, you should also collect <strong>cloud</strong> training data in the <strong>Non-forest</strong> class, if your Landsat has any clouds. If there are some clouds that were not removed during the Landsat mosaic creation process you will need to create training data for the clouds that remain so that the classifier knows what those pixels represent. Sometimes clouds were detected during the mosaic process and were mostly removed. However, you can see some of the edges of those clouds remain.</p>
<p>Note that you may not have any clouds in your Landsat imagery.</p>
</div>
<p>Continue collecting Non-forest points. Again, be sure to spread the points out across the study area.</p>
<p>Once again when you are done collecting data for these categories, zoom out to the full extent of the study region.</p>
<ul class="simple">
<li><p>Did you place data points somewhat equally across the full region?</p></li>
<li><p>Are all points clustered in the same area?</p></li>
<li><p>It’s best to make sure you have data points covering the full spatial extent of the study region, add more points in areas that are sparsely represented if needed.</p></li>
</ul>
</div>
</div>
<div class="section" id="classification-using-machine-learning-algorithms-random-forests">
<span id="section-2-4"></span><h3>Classification using machine learning algorithms (Random Forests)<a class="headerlink" href="#classification-using-machine-learning-algorithms-random-forests" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<img alt="The outcome of a random forest model." src="../_images/random_forest_model_outcome.png" />
</div>
<p>As mentioned in the Module introduction, the classification algorithm you will be using today is called random forest.  The random forest algorithm creates numerous decision trees for each pixel. Each of these decision trees votes on what the pixel should be classified as. The land cover class that receives the most votes is then assigned as the map class for that pixel. Random forests are efficient on large data and accurate when compared to other classification algorithms.</p>
<p>To complete the classification of our mosaicked image you are going to use a random forests classifier contained within the easy-to-use Classification tool in SEPAL. The image values used to train the model include the Landsat mosaic values and some derivatives, if selected (such as NDVI). There are likely additional data sets that can be used to help differentiate land cover classes, such as elevation data.</p>
<p>After we create the map, you might find that there are some areas that are not classifying well. The classification process is iterative, and there are ways you can modify the process to get better results. One way is to collect more or better reference data to train the model. You can test different classification algorithms, or explore object based approaches opposed to pixel based approaches. The possibilities are many and should relate back to the nature of the classes you hope to map. Last but certainly not least is to improve the quality of your training data. Be sure to log all of these decision points in order to recreate your analysis in the future.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objective</strong>: Run SEPAL’s classification tool.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>prerequisites</strong>:</p>
<ul class="simple">
<li><p>Land cover categories defined in <a class="reference internal" href="#section-2-1">section 2.1</a></p></li>
<li><p>Mosaic created in <a class="reference internal" href="#section-2-2">section 2.2</a></p></li>
<li><p>Training data created in <a class="reference internal" href="#section-2-3">section 2.3</a></p></li>
</ul>
</div>
<div class="section" id="add-training-data-collected-outside-of-sepal">
<h4>Add training data collected outside of sepal<a class="headerlink" href="#add-training-data-collected-outside-of-sepal" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is fully optional</p>
</div>
<p>If you collected training data using QGIS, CEO, or another pathway, you will need to add the Training Data we collected in <a class="reference internal" href="#section-2-3">section 2.3</a> in the <code class="code docutils literal notranslate"><span class="pre">TRN</span></code> tab.</p>
<p>Click on the green <code class="code docutils literal notranslate"><span class="pre">Add</span></code> button.</p>
<ul class="simple">
<li><p>Import your training data
-   Upload a CSV file.
-   Select Earth Engine Table and enter the path to your Earth Engine asset in the EE Table ID field.</p></li>
<li><p>Click <code class="code docutils literal notranslate"><span class="pre">Next</span></code>.</p></li>
<li><p>For <strong>Location Type</strong>, select “X/Y” coordinate columns” or “GEOJSON Column” depending on your data source. GEE assets will need the GEOJSON column option.</p></li>
<li><p>Click <code class="code docutils literal notranslate"><span class="pre">Next</span></code>.</p></li>
<li><p>Leave the <strong>Row filter expression</strong> blank. For <strong>Class format</strong>, select “Single Column” or “Column per class” as your data dictates.</p></li>
<li><p>In the <strong>Class Column</strong> field select the column name that is associated with the class.</p></li>
<li><p>Click <code class="code docutils literal notranslate"><span class="pre">Next</span></code>.</p></li>
</ul>
<p>Now you will be asked to confirm the link between the legend you input previously and your classification. You should see a screen as follows. If you need to change anything, click the green plus buttons. Otherwise, click <code class="code docutils literal notranslate"><span class="pre">Done</span></code>, then click <code class="code docutils literal notranslate"><span class="pre">Close</span></code>.</p>
<div class="figure align-center">
<img alt="link between legend and classification" src="../_images/link.png" />
</div>
</div>
<div class="section" id="review-additional-classification-options">
<h4>Review additional classification options<a class="headerlink" href="#review-additional-classification-options" title="Permalink to this headline">¶</a></h4>
<p>Click on <code class="code docutils literal notranslate"><span class="pre">AUX</span></code> to examine the auxiliary data sources available for the classification.</p>
<p>Auxiliary inputs are optional layers which can be added to help aid the classification. There are three additional sources available:
-   Latitude: Includes the latitude of each pixel
-   Terrain: Includes elevation of each pixel from SRTM data
-   Water: Includes information from the JRC Global Surface water Mapping layers</p>
<p>Click on <code class="code docutils literal notranslate"><span class="pre">Water</span></code> and <code class="code docutils literal notranslate"><span class="pre">Terrain</span></code> and then <code class="code docutils literal notranslate"><span class="pre">Apply</span></code>.</p>
<p>Click on <strong>CLS</strong> to examine the classifier being used.</p>
<ul class="simple">
<li><p>The default is a random forest with 25 trees.</p></li>
<li><p>Other options include classification and regression trees (CART), Naive Bayes, support vector machine (SVM), minimum distance, and decision trees (requires a CSV).</p></li>
<li><p>Additional parameters for each of these can be specified by clicking on the <strong>More</strong> button in the lower left.</p></li>
<li><p>For this example, we will use the default random forest with 25 trees.</p></li>
</ul>
<p>If you turned off your classification preview previously to collect training data, now is the time to turn it back on.</p>
<ul class="simple">
<li><p>Click on the “Select layers to show” icon.</p></li>
<li><p>Select “Classification”</p></li>
<li><p>Make sure Classification now has a check mark next to it, indicating that the layer is now turned on.</p></li>
</ul>
<div class="figure align-center">
<img alt="A preview of a classification." src="../_images/classification_preview.png" />
</div>
<p>Now we’ll save our classification output.</p>
<ul>
<li><p>First, rename your classification by typing a new name in the tab.</p></li>
<li><p>Click <code class="code docutils literal notranslate"><span class="pre">Retrieve</span> <span class="pre">classification</span></code> in the upper right hand corner (cloud icon).</p></li>
<li><p>Choose <strong>30 m</strong> resolution.</p></li>
<li><p>Select the Class, Class probability, Forest % and Non-forest % bands.</p></li>
<li><p>Retrieve to your <strong>SEPAL Workspace.</strong>
.. note:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">You</span> <span class="n">can</span> <span class="n">also</span> <span class="n">choose</span> <span class="o">**</span><span class="n">Google</span> <span class="n">Earth</span> <span class="n">Engine</span> <span class="n">Asset</span><span class="o">**</span> <span class="k">if</span> <span class="n">you</span> <span class="n">would</span> <span class="n">like</span> <span class="n">to</span> <span class="n">be</span> <span class="n">able</span> <span class="n">to</span> <span class="n">share</span> <span class="n">your</span> <span class="n">results</span> <span class="ow">or</span> <span class="n">perform</span> <span class="n">additional</span> <span class="n">analysis</span> <span class="ow">in</span> <span class="n">GEE</span><span class="o">.</span> <span class="n">However</span> <span class="k">with</span> <span class="n">this</span> <span class="n">option</span><span class="p">,</span> <span class="n">you</span> <span class="n">will</span> <span class="n">need</span> <span class="n">to</span> <span class="n">download</span> <span class="n">your</span> <span class="nb">map</span> <span class="kn">from</span> <span class="nn">GEE</span> <span class="n">using</span> <span class="n">the</span> <span class="n">Export</span> <span class="n">function</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>Once the download begins, you will see the spinning wheel in the bottom left of the web-page in <strong>Tasks.</strong> Click the spinning wheel to observe the progress of your export.</p></li>
<li><p>When complete, if you chose SEPAL workspace, the file will be in your SEPAL downloads folder. (Browse &gt; downloads &gt; classification name folder). If you chose GEE Asset the file will be in your GEE Assets.</p></li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/retrieval_interface.png"><img alt="The retrieval interface." src="../_images/retrieval_interface.png" style="width: 450px;" /></a>
</div>
</div>
<div class="section" id="qa-qc-considerations-and-methods">
<h4>QA/QC considerations and methods<a class="headerlink" href="#qa-qc-considerations-and-methods" title="Permalink to this headline">¶</a></h4>
<p>Quality assurance and quality control, commonly referred to as QA/QC, is a critical part of any analysis. There are two approaches to QA/QC: formal and informal. Formal QA/QC, specifically sample-based estimates of error and area are described in <a class="reference internal" href="#module-4">module 4</a>. Informal QA/QC involves qualitative approaches to identifying problems with your analysis and classifications to iterate and create improved classifications. Here we’ll discuss one approach to informal QA/QC.</p>
<p>Following analysis you should spend some time looking at your change detection in order to understand if the results make sense. We’ll do this in the classification window. This allows us to visualize the data and collect additional training points if we find areas of poor classification. Other approaches not covered here include visualizing the data in Google Earth Engine or in another program, such as QGIS or ArcMAP.</p>
<p>With SEPAL you can examine your classification and collect additional training data to improve the classification.</p>
<div class="figure align-center">
<img alt="Examining your change detection map" src="../_images/examine_classification_map.png" />
</div>
<p>Turn on the imagery for your Classification and pan and zoom around the map. Compare your Classification map to the 2015 and 2020 imagery. Where do you see areas that are correct? Where do you see areas that are incorrect? If your results make sense, and you are happy with them, great! Go on to the formal QA/QC in <a class="reference internal" href="#module-4">module 4</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>if you are not satisfied, collect additional points of training data where you see inaccuracies. Then re-export the classification following the steps in <a class="reference internal" href="#section-2-3">section 2.3</a>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="image-change-detection">
<span id="module-3"></span><h2>Image change detection<a class="headerlink" href="#image-change-detection" title="Permalink to this headline">¶</a></h2>
<p>Image change detection allows us to understand differences in the landscape–or more correctly, in the satellite images taken of the landscape–over time. There are many questions that change detection methods can help answer, including “When did deforestation take place?” and “How much forest area has been converted to agriculture in the past 5 years?”</p>
<p>Most methods for change detection use algorithms backed by statistical methods to extract and compare information in the satellite images. To conduct change detection then, we need multiple mosaics or images, each one representing a point in time. Here, we will describe how to detect change between two dates using a simple model, however this theory can be expanded to include more dates. In addition, we’ll describe time series analysis, which generally looks at longer periods of time.</p>
<p>The objective of this module is to become associated with methods of detecting change for an area of interest using the SEPAL platform. This will build upon and incorporate what we have covered in the previous modules including: creating mosaics, creating training samples, and classifying imagery. This module is split into two exercises. The first addresses change detection using two dates, and the second more advanced methods using time series analysis with the BFAST algorithm and LandTrendr. At the end of this module you will know how to conduct a two-date change detection in SEPAL, have a basic understanding of the BFAST tool in SEPAL, and be familiar with TimeSync and LandTrendr.</p>
<p>This module should take you approximately 3 hours.</p>
<div class="section" id="two-date-change-detection">
<span id="section-3-1"></span><h3>Two date change detection<a class="headerlink" href="#two-date-change-detection" title="Permalink to this headline">¶</a></h3>
<p>In this Exercise, you will learn how to conduct a two-date change detection in SEPAL. This approach uses the same classification algorithm you used in <a class="reference internal" href="#module-2">module 2</a>. This approach can be used with more than two dates if you so choose in the future.</p>
<p>In this example, you will create optical mosaics and classify them, building on skills learned in Modules 1 and 2. Alternatively, you may also use two classifications from your own research area.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objectives</strong>:</p>
<ul class="simple">
<li><p>Learn how to conduct a two-date change detection</p></li>
<li><p>Build on skills learned in <a class="reference internal" href="#module-1">module 1</a> &amp; <a class="reference internal" href="#module-2">module 2</a></p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisites</strong>:</p>
<ul class="simple">
<li><p>SEPAL account</p></li>
<li><p>Complete <a class="reference internal" href="#module-1">module 1</a> &amp; <a class="reference internal" href="#module-2">module 2</a> or be familiar with the skills covered</p></li>
</ul>
</div>
<div class="section" id="create-mosaics-for-change-detection">
<h4>Create mosaics for change detection<a class="headerlink" href="#create-mosaics-for-change-detection" title="Permalink to this headline">¶</a></h4>
<p>Before we can identify change, we first need to have images to compare. We will create two mosaics of Sri Lanka, generate some training data, and then classify the mosaics. This is discussed in detail in <a class="reference internal" href="#module-1">module 1</a> &amp; <a class="reference internal" href="#module-2">module 2</a>.</p>
<p>Open the <code class="code docutils literal notranslate"><span class="pre">Process</span></code> menu and click on <code class="code docutils literal notranslate"><span class="pre">Optical</span> <span class="pre">mosaic</span></code>. Alternatively click the <strong>green plus symbol</strong> to open the <strong>Create Recipe</strong> menu and then click on <code class="code docutils literal notranslate"><span class="pre">Optical</span> <span class="pre">Mosaic</span></code>.</p>
<p>use the following data:</p>
<ul class="simple">
<li><p>Choose <strong>Sri Lanka</strong> for the Area of interest (AOI).</p></li>
<li><p>Select 2015 for the Date (DAT).</p></li>
<li><p>Select Landsat 8 (L8) as the source (SRC).</p></li>
<li><p>In the Composite (CMP) menu, ensure the surface reflectance <strong>(SR) correction</strong> is selected and median is the compositing method.</p></li>
</ul>
<p>Click <code class="code docutils literal notranslate"><span class="pre">Retrieve</span> <span class="pre">Mosaic</span></code> and select <strong>Blue, Green, Red, NIR, SWIR1, SWIR2</strong>. Then select Google Earth Engine Asset, and lastly click <code class="code docutils literal notranslate"><span class="pre">retrieve</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you don’t see the Google Earth Engine asset option, you’ll need to connect your Google account to SEPAL by clicking on your user name in the lower right.</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/retrieval_mosaic.png"><img alt="The retrieval screen for mosaics." src="../_images/retrieval_mosaic.png" style="width: 450px;" /></a>
</div>
<p>Repeat previous steps but change the <strong>Date</strong> parameter to 2020.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It may take a significant amount of time before your mosaics finish exporting.</p>
</div>
</div>
<div class="section" id="start-the-classification">
<h4>Start the classification<a class="headerlink" href="#start-the-classification" title="Permalink to this headline">¶</a></h4>
<p>Now we will begin the classification, as we did in <a class="reference internal" href="#module-2">module 2</a>. There are multiple pathways for collecting training data. Using desktop GIS, including QGIS and ArcGIS, to create a layer of points is one common approach. Using GEE is another approach. You can also use CEO to create a project of random points to identify (see detailed directions in <a class="reference internal" href="#section-4-1-2">section 4.1.2</a>). All of these pathways will create .csv or an GEE table that you can import into SEPAL to use as your training data set.</p>
<p>However, SEPAL has a built-in reference data collection tool in the classifier. This is the tool you used in <a class="reference internal" href="#module-2">module 2</a>, and we will again use this tool to collect training data. Even if you use a .csv or GEE table in the future, this is a helpful feature to collect additional training data points to help refine your model.</p>
<p>In the <strong>Process</strong> menu, click the green plus symbol and select <code class="code docutils literal notranslate"><span class="pre">Classification</span></code>.
Add the two Sri Lanka optical mosaics for classification by clicking <strong>+ Add</strong> and choose either <strong>Saved Sepal Recipe</strong> or <strong>Earth Engine Asset</strong> (recommended).</p>
<ul class="simple">
<li><p>If you choose <strong>Saved Sepal Recipe</strong>, simply select your <a class="reference internal" href="#module-2">module 2</a> Amazon recipe.</p></li>
<li><p>If you choose <strong>Earth Engine Asset</strong>, enter the Earth Engine Asset ID for the mosaic. The ID should look like “users/username/SriLanka2015”.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Remember that you can find the link to your Earth Engine Asset ID via Google Earth Engine’s Asset tab (see <strong>Exercise 2.2 Part 2</strong>).</p>
</div>
<p>Select bands: Blue, Green, Red, NIR, SWIR1, &amp; SWIR2. You can add other bands as well if you included them in your mosaic. You can also include <strong>Derived bands</strong> by clicking on the green button on the lower left and then click <code class="code docutils literal notranslate"><span class="pre">Apply</span></code>.</p>
<p>Repeat the previous steps for your 2020 optical mosaic.</p>
<div class="figure align-center">
<img alt="Two assets ready for classification." src="../_images/two_assets.png" />
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Selecting <strong>Saved Sepal Recipe</strong> may cause the following error at the final stage of your classification:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Google Earth Engine error: Failed to create preview</span>
</pre></div>
</div>
<p>This occurs because GEE gets overloaded. If you encounter this error, please retrieve your classification as described in <a class="reference internal" href="#section-2-2">section 2.2</a>.</p>
</div>
</div>
<div class="section" id="collect-change-classification-training-data">
<span id="section-3-1-3"></span><h4>Collect change classification training data<a class="headerlink" href="#collect-change-classification-training-data" title="Permalink to this headline">¶</a></h4>
<p>Now that we have the mosaics created, we will collect change training data. While more complex systems can be used, we will consider two land cover classes that each pixel can be in 2015 or 2020: forest and non-forest. Thinking about change detection, we will use three options: stable forest, stable non-forest, and change. That is, between 2015 and 2020 there are four pathways: a pixel can be forest in 2015 and in 2020 (stable forest); a pixel can be non-forest in 2015 and in 2020 (stable non-forest); or it can change from forest to non-forest or from non-forest to forest. If you use this manual to guide your own change classification, remember to log your decisions including how you are thinking about change detection (what classes can change and how), and the imagery and other settings used for your classification.</p>
<div class="graphviz"><img src="../_images/graphviz-29f3b0910079787f71362adebd9811a0752dc34a.png" alt="digraph G {
    rankdir=LR;
    subgraph cluster0 {
        node [style=filled, shape=box];
        a0 [label=&quot;Non-forest&quot;, color=lightgrey];
        a1 [label=&quot;Forest&quot;, color=darkgreen];
        label = &quot;2015&quot;;
    }
    subgraph cluster1 {
        node [style=filled, shape=box];
        b0 [label=&quot;Non-forest&quot;, color=lightgrey];
        b1 [label=&quot;Forest&quot;, color=darkgreen];
        label = &quot;2018&quot;;
    }
    a0 -&gt; b0 [color=grey];
    a1 -&gt; b1 [color=darkgreen];
    a1 -&gt; b0 [color=orange];
    a0 -&gt; b1 [color=orange];

}" class="graphviz" /></div>
<p>In the Legend menu, click <code class="code docutils literal notranslate"><span class="pre">+</span> <span class="pre">Add</span></code>. This will add a place for you to write your first class label. You will need three legend entries:</p>
<ul class="simple">
<li><p>The first should have the number 1 and a Class label of Forest.</p></li>
<li><p>The second should have the number 2 and a Class  label of Non-forest.</p></li>
<li><p>The third should have the number 3 and a Class label of Change.</p></li>
</ul>
<p>Choose colors for each class as you see fit and click <code class="code docutils literal notranslate"><span class="pre">Close</span></code>.</p>
<div class="figure align-center">
<img alt="Classification legend." src="../_images/3_classes.png" />
</div>
<p>Now, we’ll create training data. First, let’s pull up the correct imagery. Click on “Select layers to view”. As a reminder, available base layers include:
-   SEPAL (Minimal dark Sepal default layer)
-   Google Satellite
-   Planet NICFI composites</p>
<p>We will use the Planet NICFI composites for this example. The composites are available in either RGB or false color infrared (CIR). Composites are available monthly after September 2020 and for every 6 months prior back till 2015. Select Dec 2015 (6 months). Both RGB and CIR will be useful, so choose whichever you prefer. You can also select “Show labels” to enable labels that can help you orient yourself in the landscape. You will need to switch between this <strong>Dec 2015</strong> data and the <strong>Dec 2020</strong> data to find stable areas and changed areas.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have collected data in QGIS, CEO, or another program, you can skip the following steps. Simply click on <strong>TRN</strong> in the lower right. Click <strong>+ Add</strong> then upload your data to SEPAL. Finally click on the <strong>CLS</strong> button in the bottom right and you can skip to <a class="reference internal" href="#section-3-1-4">section 3.1.4</a></p>
</div>
<p>Now click on the point icon. When you mouse over this icon, it says “Enable reference data collection”.</p>
<p>With reference data collection enabled, you can start adding points to your map.</p>
<p>Use the scroll wheel on your mouse to zoom in to the study area. You can click-hold and drag to pan around the map. Be careful though, as a single click will place a point on the map.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you accidentally add a point, you can delete it by clicking on the red <code class="code docutils literal notranslate"><span class="pre">Remove</span></code> button.</p>
</div>
<p>Collect training data for the “Stable Forest” class. Place points where there is forest in both 2015 and 2020 imagery.Then collect training data for the “Stable Non-forest” class. Place points where there is not forest in either 2015 or 2020. You should include water, built up areas, bare dirt, and agricultural areas in your points. Finally collect training data for the “Change” class.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are having a hard time finding areas of change several tools can help you:</p>
<ul class="simple">
<li><p>you can use the Google satellite imagery to help. Areas of forest loss often appear as black or dark purple patches on the landscape. Be sure to always check the 2015 and 2020 Planet imagery to verify Change.</p></li>
<li><p>The CIR (false color infrared) imagery from Planet can also be helpful in identifying areas of change.</p></li>
<li><dl class="simple">
<dt>You can also use SEPAL’s on-the-fly classification to help after collecting a few Change points.</dt><dd><ul>
<li><p>If the classification does not appear after collecting the Stable Forest and Stable Non-forest classes, click on the “Select layers to view” icon.</p></li>
<li><p>Toggle the “Classification” option off, and then on again.</p></li>
<li><p>You may need to click on “CLS” on the bottom right of the screen, then click “Close” to get the classification map to appear.</p></li>
<li><p>With the Classification map created, you can find change pixels and confirm whether they are change or not by comparing 2015 and 2020 imagery.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<p>One trick for determining change is to place a “Change” point in an area of suspected change. Then you can compare 2015 and 2020 imagery without losing the place you were looking at. If it is not Change, you can switch which classification you have identified the point as.</p>
<div class="figure align-center">
<img alt="Using Google imagery to examine areas for change." src="../_images/finding_change.png" />
</div>
<p>Continue collecting points until you have approximately 25 points for Forest and Non-forest classes and about 5 points for the Change class. More is better. Try to have your points are spread out across Sri Lanka.</p>
<p>If you need to modify classification of any of your data points, you can click on the point to return to the classification options. You can also remove the point in this way.</p>
<p>When you are happy with your data points, click on the <code class="code docutils literal notranslate"><span class="pre">AUX</span></code> button in the bottom right. Select <strong>Terrain</strong> and <strong>Water</strong>. This will add auxiliary data to the classification.</p>
<p>Finally click on the <code class="code docutils literal notranslate"><span class="pre">CLS</span></code> button in the bottom right. You can change your classification type to see how the output changes.
8. If it has not already, SEPAL will now load a preview of your classification.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/change_detection_model_preview.png"><img alt="A preview of the change detection model output." src="../_images/change_detection_model_preview.png" style="width: 450px;" /></a>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If any of the previous sections is unclear, review <a class="reference internal" href="#module-1">module 1</a> or <a class="reference internal" href="#module-2">module 2</a> for more detailed explanations of how to process mosaics, and collect training data with CEO.</p>
</div>
</div>
<div class="section" id="two-date-classification-retrieval">
<span id="section-3-1-4"></span><h4>Two date classification retrieval<a class="headerlink" href="#two-date-classification-retrieval" title="Permalink to this headline">¶</a></h4>
<p>Now that the hard work of setting up the mosaics and creating and adding the training data is complete, all that is left to do is retrieve the classification.</p>
<p>To retrieve your classification, click the cloud icon in the upper right to open the <strong>Retrieve</strong> panel.</p>
<ul class="simple">
<li><p>Select <strong>Google Earth Engine Asset</strong> if you would like to share your map or if you would like to use it for further analysis</p></li>
<li><p>Select <strong>SEPAL Workspace</strong> if you would like to use the map internally only.</p></li>
</ul>
<p>Then use the following parameters:
- <strong>resolution</strong>: 30 m resolution
- <strong>Selected bands</strong>:  the Class, Class probability, Forest % and Non-forest % bands.</p>
<p>Finally click <code class="code docutils literal notranslate"><span class="pre">Retrieve</span></code>.</p>
</div>
<div class="section" id="quality-assurance-and-quality-control">
<h4>Quality assurance and quality control<a class="headerlink" href="#quality-assurance-and-quality-control" title="Permalink to this headline">¶</a></h4>
<p>Quality assurance and quality control, commonly referred to as QA/QC, is a critical part of any analysis. There are two approaches to QA/QC: formal and informal. Formal QA/QC, specifically sample-based estimates of error and area are described in <a class="reference internal" href="#module-4">module 4</a>. Informal QA/QC involves qualitative approaches to identifying problems with your analysis and classifications to iterate and create improved classifications. Here we’ll discuss one approach to informal QA/QC.</p>
<p>Following analysis you should spend some time looking at your change detection in order to understand if the results make sense. This allows us to visualize the data and collect additional training points if we find areas of poor classification. Other approaches not covered here include visualizing the data in Google Earth Engine or in another program, such as QGIS or ArcMAP.</p>
<p>With SEPAL you can examine your classification and collect additional training data to improve the classification.</p>
<div class="figure align-center">
<img alt="Examining your change detection map" src="../_images/examine_change_detection_map.png" />
</div>
<p>Turn on the imagery for your Classification and pan and zoom around the map.
Compare your Classification map to the 2015 and 2020 imagery. Where do you see areas that are correct? Where do you see areas that are incorrect?
If your results make sense, and you are happy with them, great! Go on to the formal QA/QC in <a class="reference internal" href="#module-4">module 4</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>However, if you are not satisfied, collect additional points of training data where you see inaccuracies. Then re-export the classification following the steps in <a class="reference internal" href="#section-3-1-3">section 3.1.3</a>.</p>
</div>
</div>
</div>
<div class="section" id="calculating-above-ground-biomass-and-change">
<h3>Calculating above-ground biomass and change<a class="headerlink" href="#calculating-above-ground-biomass-and-change" title="Permalink to this headline">¶</a></h3>
<p>In this exercise, you will learn how to use the BIOmass Tool for Alos (BIOTA) to calculate above-ground biomass in dry forests and savannas, as well as change maps.</p>
<p>The BIOTA tool is part of the Satellite Monitoring for Forest Management (SMFM) project by the World Bank, and it was developed by <a class="reference external" href="https://ltsi.co.uk/">LTS International</a> and the <a class="reference external" href="https://www.ed.ac.uk/geosciences">University of Edinburgh</a>. The tool relies on the use of JAXA’s <a class="reference external" href="https://www.eorc.jaxa.jp/ALOS/en/about/palsar.htm">ALOS PALSAR</a> L-band mosaics and it allows you to produce outputs of:</p>
<ul class="simple">
<li><p>Calibrated Gamma0 backscatter</p></li>
<li><p>Forest cover</p></li>
<li><p>Above-ground biomass</p></li>
<li><p>Above-ground biomass change</p></li>
<li><p>Classified forest change types (deforestation, degradation, etc)</p></li>
</ul>
<p>More information can be found online at <a class="reference external" href="https://www.smfm-project.com/">https://www.smfm-project.com/</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objectives</strong>:</p>
<ul class="simple">
<li><p>Generate maps of above-ground biomass (AGB), Gamma0 backscatter, forest cover, AGB change, deforestation risk, and change type.</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisites</strong>:</p>
<ul class="simple">
<li><p>SEPAL account</p></li>
</ul>
</div>
<p>Navigate to the <strong>Apps</strong> menu by clicking on the wrench icon and typing “SMFM” into the search field. Select “SMFM Biota”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sometimes the tool takes a few minutes to load. Wait until you see the tool’s interface. In case the tool fails to load properly, as seen below, please close the tab and repeat the above steps. If this does not work, reload SEPAL.</p>
<div class="figure align-center">
<img alt="Failure of the BIOTA tool." src="../_images/biota_fail.png" />
</div>
<p>If none of these steps work, you might need to start another instance. Please see <a class="reference external" href="https://docs.sepal.io/en/latest/setup/presentation.html#terminal-tab">Introduction to SEPAL</a> for steps on how to use the terminal to start a higher instance. A ‘m4’ instance should be enough.</p>
</div>
<p>You should see an interface like the one below.</p>
<div class="figure align-center">
<img alt="The SMFM BIOTA interface." src="../_images/biota_interface.png" />
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Depending on your computer screen size, sometimes the left column will be on top of the content, as seen below:</p>
<div class="figure align-center">
<img alt="Left column on top of the tool." src="../_images/biota_column.png" />
</div>
<p>If this is the case, you can:</p>
<ul class="simple">
<li><p>Adjust your browser zoom level, or</p></li>
</ul>
<div class="figure align-center">
<img alt="Example of how to adjust the zoom level on Google Chrome." src="../_images/biota_chrome.png" />
</div>
<ul class="simple">
<li><p>Keep the zoom level but click outside of the column to hide it. Then, to open it again, you will need to click on the three dots located at the top right side.</p></li>
</ul>
<div class="figure align-center">
<img alt="How to show the left column again." src="../_images/biota_three_dots.png" />
</div>
</div>
<div class="section" id="downloading-the-alos-mosaics">
<h4>Downloading the ALOS mosaics<a class="headerlink" href="#downloading-the-alos-mosaics" title="Permalink to this headline">¶</a></h4>
<p>The first step is to select the parameters for accessing data from ALOS (JAXA). The data is delivered in either 1x1 degree tiles or 5x5 degree collections of tile into SEPAL.</p>
<p>Under <code class="code docutils literal notranslate"><span class="pre">Required</span> <span class="pre">Inputs</span></code> you need the define Latitude and Longitude coordinates. To do so, click on your point of interest on the map that is shown on the right side - this will be the upper-left coordinate of the tiles. The default values are -75 degrees for Longitude and 0 degrees for Latitude. For this exercise, we will demonstrate the steps for Tanzania (Latitude -2.54, and Longitude 31.04 - a point in-between the Moyowosi Game Reserve and the Kigosi Game Reserve, next to the border of the Getta and Kigoma regions).</p>
<div class="figure align-center">
<img alt="Selecting a point on the map." src="../_images/biota_map.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BIOTA tool was designed for woodlands and dry forests as it uses a generic equation to calibrate Gamma0 backscatter to forest AGB developed using forest plot data from Mozambique, Tanzania, and Malawi, in southern Africa. For global applicability, the tool supports the calibration of country-specific backscatter-AGB relationships through determined parameters that will be explained later.</p>
</div>
<p>Next, we define the two years of interest. For this exercise, we will leave the default values, 2016 for Year 1 and 2017 for Year 2. Year 2 is used for calculating changes.</p>
<p>The tool gives you the option to choose either 1x1 or 5x5 degree tile size. We will select 1x1 tile size for time purposes.</p>
<p>Before selecting <code class="code docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Images</span></code>, we will look into the <code class="code docutils literal notranslate"><span class="pre">Optional</span> <span class="pre">Inputs</span></code> tab.</p>
<div class="figure align-center">
<img alt="Location of the optional inputs tab." src="../_images/biota_optional_inputs_tab.png" />
</div>
<p>Different parameters can be changed here. These include the parameters that should be calibrated according to your area of interest and specific forest characteristics. Default values are specific to southern African forests.</p>
<table class="table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Role</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Lee filter</p></td>
<td><p>Applies a Lee filter to the data. This reduces inherent speckle noise in SAR imagery. Uncheck if you do not want the filter applied.</p></td>
</tr>
<tr class="row-odd"><td><p>Window size</p></td>
<td><p>Lee filter window size. Defaults to 5 x 5 pixels.</p></td>
</tr>
<tr class="row-even"><td><p>Downsample factor</p></td>
<td><p>Applies downsampling to inputs by specifying an integer factor to downsample by. Defaults to 1 - no downsampling.</p></td>
</tr>
<tr class="row-odd"><td><p>Forest threshold</p></td>
<td><p>A forest AGB threshold (in tonnes per hectare) to separate forest from non-forest (specific to your location). Defaults to 10 tC/ha.</p></td>
</tr>
<tr class="row-even"><td><p>Area threshold</p></td>
<td><p>A minimum area threshold (in hectares) to be counted as forest (e.g. a forest patch must be greater than 1 ha in size). Defaults to 0 ha.</p></td>
</tr>
<tr class="row-odd"><td><p>Change area threshold</p></td>
<td><p>A threshold for a minimum change in forest area required to be flagged as a change. Defaults to 2 ha. This is for users who aim to produce change maps.</p></td>
</tr>
<tr class="row-even"><td><p>Change magnitude threshold</p></td>
<td><p>The minimum absolute change in biomass (in tonnes per hectare) to be flagged as a change. Defaults to 15 tC/ha.This is for users who aim to produce change maps.</p></td>
</tr>
<tr class="row-odd"><td><p>Contiguity</p></td>
<td><p>The criterion of contiguity between two spatial units. The rook criterion defines neighbors by the existence of a common edge between two spatial units. The queen criterion is somewhat more encompassing and defines neighbors as spatial units sharing a common edge or a common vertex.</p></td>
</tr>
<tr class="row-even"><td><p>Polarisation</p></td>
<td><p>Which SAR polarisation to use. Defaults to HV.</p></td>
</tr>
</tbody>
</table>
<p>We will leave the parameters with default values.</p>
<div class="figure align-center">
<img alt="Optional parameters screen." src="../_images/biota_optional_inputs.png" />
</div>
<p>Now, go back to the <code class="code docutils literal notranslate"><span class="pre">Required</span> <span class="pre">Inputs</span></code> tab and click <code class="code docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Images</span></code> at the bottom. This will download all ALOS data tiles into your SEPAL account.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on your point coordinates, it may take a significant amount of time before your data finish downloading. For the point in Tanzania, it should take about 5 minutes.</p>
</div>
<p>You can see the status of the downloads at the bottom of the page.</p>
<div class="figure align-center">
<img alt="Status about the download." src="../_images/biota_download_status.png" />
</div>
<p>Once the downloads are finalized for both years, you are able to see the downloaded files under the SEPAL <code class="code docutils literal notranslate"><span class="pre">Files</span></code>. Go to <code class="code docutils literal notranslate"><span class="pre">module_results</span></code> &gt; <code class="code docutils literal notranslate"><span class="pre">smfm</span></code> &gt; <code class="code docutils literal notranslate"><span class="pre">data</span></code>.</p>
<div class="figure align-center">
<img alt="SEPAL Files with downloaded data." src="../_images/biota_files.png" />
</div>
<p>Here is a demonstration of the above steps:</p>

    <div class="d-flex justify-content-center">
        <iframe 
            src="https://www.youtube.com/embed/d759Aqi85HE"
            width="560" 
            height="315" 
            title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
        >
        </iframe>
    </div>
    </div>
<div class="section" id="processing-the-data-and-producing-outputs">
<h4>Processing the data and producing outputs<a class="headerlink" href="#processing-the-data-and-producing-outputs" title="Permalink to this headline">¶</a></h4>
<p>Now that the download finished, we can process the data to produce the desired outputs.</p>
<p>Click on the <code class="code docutils literal notranslate"><span class="pre">Process</span></code> tab on the left side.</p>
<div class="figure align-center">
<img alt="BIOTA Process window." src="../_images/biota_process.png" />
</div>
<p>For Year 1, we will choose “Forest property” - this will automatically check all outputs available (“Gamma0”, “Biomass”, “Forest Cover”). For Year 2 we will choose “Forest Change” (changes between 2016 and 2017), which will also select all available outputs (“Biomass change”, “Change type”, “Deforestation risk”). These will be explained later. Now, click on <code class="code docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Outputs</span></code> to start the processes.</p>
<div class="figure align-center">
<img alt="Select outputs and start the process by clicking on &quot;Get outputs&quot;." src="../_images/biota_process_get.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on your point coordinates, it may take a significant amount of time before your data finish downloading. For the point in Tanzania, it should take about 2 minutes.</p>
</div>
<p>Similarly to before, the tool will show the process status at the bottom. You will also note a change of color from white to yellow next to each output. White means not started, Yellow means processing and Green means finalized.</p>
<div class="figure align-center">
<img alt="Status of outputs." src="../_images/biota_output_processing.png" />
</div>
<p>Once done, you will see a message similar to the one below, and all outputs will have a green “light”.</p>
<div class="figure align-center">
<img alt="Process finalized." src="../_images/biota_output_done.png" />
</div>
<p>Here is a demonstration of the above steps:</p>

    <div class="d-flex justify-content-start">
        <iframe 
            src="https://www.youtube.com/embed/OMGESeERRGo"
            width="560" 
            height="315" 
            title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
        >
        </iframe>
    </div>
    </div>
<div class="section" id="displaying-your-outputs">
<h4>Displaying your outputs<a class="headerlink" href="#displaying-your-outputs" title="Permalink to this headline">¶</a></h4>
<p>With the outputs processed, we can now visualize the results.</p>
<p>On the same window, under <code class="code docutils literal notranslate"><span class="pre">Display</span> <span class="pre">Outputs</span></code>, you can select the process to display by clicking on the dropdown ‘Select process’ option.</p>
<p>First select Biomass. Then press <code class="code docutils literal notranslate"><span class="pre">Display</span></code>. You will see the map pop up on your screen:</p>
<div class="figure align-center">
<img alt="Biomass map." src="../_images/biota_display.png" />
</div>
<p>This is showing above-ground biomass in tonnes per hectare (tC/ha) for the 1x1 degree tile in Tanzania. To go back to the interface and select the other outputs, you can click anywhere on the screen outside of the map and do the same for the other results.</p>
<p>If you followed these exact steps, your outputs should look similar to the ones below:</p>
<div class="figure align-center">
<img alt="BIOTA outputs for Tanzania." src="../_images/biota_all.png" />
</div>
<p>A summary of each output is described in the table below:</p>
<table class="table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Output</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Gamma0</p></td>
<td><p>Gamma0 backscatter in decibels for the polarization specified</p></td>
</tr>
<tr class="row-odd"><td><p>Biomass</p></td>
<td><p>Biomass in tonnes per hectare</p></td>
</tr>
<tr class="row-even"><td><p>Forest/Woody cover</p></td>
<td><p>Binary classification of forested (1) and non-forested (0) areas</p></td>
</tr>
<tr class="row-odd"><td><p>Change type</p></td>
<td><p>Change described in 7 different types. They are specified below</p></td>
</tr>
<tr class="row-even"><td><p>Biomass change</p></td>
<td><p>Change in biomass in tonnes per hectare</p></td>
</tr>
<tr class="row-odd"><td><p>Deforestation risk</p></td>
<td><p>Risk of deforestation from Low (1) to High (3)</p></td>
</tr>
</tbody>
</table>
<p>There are 7 change types described in the BIOTA tool, each of which is defined as a number 0 to 6 and color-coded on the map. Change types are:</p>
<table class="table">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Change class</p></th>
<th class="head"><p>Pixel value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Deforestation</p></td>
<td><p>1</p></td>
<td><p>A loss of AGB from that crosses the <code class="docutils literal notranslate"><span class="pre">forest_threshold</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>Degradation</p></td>
<td><p>2</p></td>
<td><p>A loss of AGB in a location above the <code class="docutils literal notranslate"><span class="pre">forest_threshold</span></code> in both images.</p></td>
</tr>
<tr class="row-even"><td><p>Minor Loss</p></td>
<td><p>3</p></td>
<td><p>A loss of AGB that does not cross the <code class="docutils literal notranslate"><span class="pre">change_area_threshold</span></code> or <code class="docutils literal notranslate"><span class="pre">change_magnitude_threshold</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>Minor Gain</p></td>
<td><p>4</p></td>
<td><p>A gain of AGB that does not cross the <code class="docutils literal notranslate"><span class="pre">change_area_threshold</span></code> or <code class="docutils literal notranslate"><span class="pre">change_magnitude_threshold</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>Growth</p></td>
<td><p>5</p></td>
<td><p>A gain of AGB in a location above the <code class="docutils literal notranslate"><span class="pre">forest_threshold</span></code> in both images.</p></td>
</tr>
<tr class="row-odd"><td><p>Afforestation</p></td>
<td><p>6</p></td>
<td><p>A gain of AGB that crosses the <code class="docutils literal notranslate"><span class="pre">forest_threshold</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>Nonforest</p></td>
<td><p>0</p></td>
<td><p>Below <code class="docutils literal notranslate"><span class="pre">forest_threshold</span></code> in both images.</p></td>
</tr>
</tbody>
</table>
<p>You can also use the <code class="code docutils literal notranslate"><span class="pre">Write</span> <span class="pre">Raster</span></code> option to save this map into your SEPAL account. Once you click on <cite>Write Raster</cite> you should see a message in green informing that your export has been completed.</p>
<div class="figure align-center">
<img alt="Map export complete for the Change type output." src="../_images/biota_export.png" />
</div>
<p>Then, the file will be located in your SEPAL Files. You can download this map by selecting it and clicking on the Download button at the top right corner. This will download the output as a TIF file that can be used in a GIS software.</p>
<div class="figure align-center">
<img alt="Exported map in the Files." src="../_images/biota_export_file.png" />
</div>
<p>Here is a demonstration of the above steps:</p>

    <div class="d-flex justify-content-start">
        <iframe 
            src="https://www.youtube.com/embed/my8U5TaV9IU"
            width="560" 
            height="315" 
            title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
        >
        </iframe>
    </div>
    </div>
<div class="section" id="additional-resources">
<h4>Additional Resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline">¶</a></h4>
<p>On the left side, you can access:</p>
<ul class="simple">
<li><p>Source code: this takes you to the source code of the tool, which is a GitHub repository.</p></li>
<li><p>Wiki: the “README” file of the tool, you can find additional information and instructions about how to use the tool.</p></li>
<li><p>Bug report: in case you notice a bug or have issues using the tool, use this option to report the bug or issue. This will take you to an issue creation page on the GitHub repository of the tool.</p></li>
</ul>
<div class="figure align-center">
<img alt="Additional Resources." src="../_images/biota_resources.png" />
</div>
</div>
</div>
<div class="section" id="deforest-tool">
<h3>Deforest Tool<a class="headerlink" href="#deforest-tool" title="Permalink to this headline">¶</a></h3>
<p>The DEnse FOREst Time Series (deforest) tool is a method for detecting changes in forest cover in a time series of Earth observation data. As input it takes a time series of forest probability measurements, producing a map of deforestation and an ‘early warning’ map of unconfirmed changes. The method is based on the ‘Baysian time series’ approach of <a class="reference external" href="https://www.sciencedirect.com/science/article/abs/pii/S0034425717304959?via%3Dihub">Reiche et al. (2018)</a>.</p>
<p>The tool was designed as part of the Satellite Monitoring for Forest Management (SMFM) project. The SMFM project (2017 - 2020) aimed to address global challenges relating to the monitoring of tropical dry forest ecosystems, and was conducted in partnership with teams in Mozambique, Namibia and Zambia. For more informaton, see <a class="reference external" href="https://www.smfm-project.com/">https://www.smfm-project.com/</a>.</p>
<p>Full documentation is hosted at <a class="reference external" href="http://deforest.rtfd.io/">http://deforest.rtfd.io/</a>.</p>
<p>This module should take you approximately 1-2 hours.</p>
<div class="section" id="data-preparation">
<h4>Data preparation<a class="headerlink" href="#data-preparation" title="Permalink to this headline">¶</a></h4>
<p>For this exercise we will be using the sample data that is included with the tool. Additionally, instructions are given on how to create an time serries of forest probability using tools with the SEPAL platform.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Objectives</p></th>
<th class="head"><p>Prerequisites</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Learn how to use the SMFM Deforest tool</p></td>
<td><p>SEPAL account</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Completed SEPAL modules on mosaics, classification, &amp; time series</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="optional-jupyter-notebook-basics">
<h4>(Optional) Jupyter notebook basics<a class="headerlink" href="#optional-jupyter-notebook-basics" title="Permalink to this headline">¶</a></h4>
<p>If you are unfamiliar with Jupyter notebooks this section is meant to get you aquatinted enough with the system to successfully run the SMFM Deforest tool. A notebook is significantly different than most SEPAL applications, but they are a powerful tool used in data science and other disciplines.</p>
<ol class="arabic">
<li><p>Cells</p>
<blockquote>
<div><p>Every notebook is broken into <em>cells</em>. Cells can come in a few formats, but typically they will be either <strong>markdown</strong> or <strong>code</strong>. Markdown cells are the descriptive text and images that accompany the coded to help a user understand the context and what the code is doing. Conversely, code cells run code or a system operation. There are many different languages which can be used in a Jupyter notebook. For this tool we will be using Python.</p>
</div></blockquote>
</li>
</ol>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/smfm_notebook_cell.png"><img alt="Example of a Jupyter Notebook cell." src="../_images/smfm_notebook_cell.png" style="width: 450px;" /></a>
</div>
<ol class="arabic" start="2">
<li><p>Running cells</p>
<blockquote>
<div><p>To run a cell, click on the cell then locate and click the <em>Run</em> button in the upper menu. You can run a cell more quickly using the keyboard shortcut <strong>shift-enter</strong>.</p>
</div></blockquote>
</li>
</ol>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/smfm_notebook_run.png"><img alt="Example running a Jupyter Notebook cell." src="../_images/smfm_notebook_run.png" style="width: 450px;" /></a>
</div>
<ol class="arabic" start="3">
<li><p>Kernel</p>
<blockquote>
<div><p>The kernel is the computation engine that executes the code in the jupyter notebook. In this case it is a python 3 kernel. For this tutorial you do not need to know much about this, but if you notebook freezes or you need to reset for any reason you can find kernel operations on the tool bar menu.</p>
<dl class="simple">
<dt>Restarting the kernel:</dt><dd><ol class="loweralpha simple">
<li><p>Navigate to the tool bar at the top of the notebook and select <em>Kernel</em>.</p></li>
<li><p>From the dropdown menu, select <em>restart Kernel and Clear Outputs</em></p></li>
</ol>
</dd>
</dl>
</div></blockquote>
</li>
</ol>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/smfm_notebook_kernel.png"><img alt="Example restarting Jupyter Notebook kernel." src="../_images/smfm_notebook_kernel.png" style="width: 450px;" /></a>
</div>
</div>
<div class="section" id="preparing-you-data">
<h4>Preparing you data<a class="headerlink" href="#preparing-you-data" title="Permalink to this headline">¶</a></h4>
<p>For this exercise we will be using the sample data that is included with the tool. Additionally, instructions are given on how to create an time series of forest probability using tools with the SEPAL platform.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>SMFM Deforest is still in the process of being adapted for use on SEPAL. The forest probability time series will be derived from existing methods to produce a satellite time series implemented on SEPAL.</p>
</div>
<p>This tutorial will use the demo data that is packaged with the SMFM Deforest tool, but steps are presented on how to use the current SEPAL implementation with the tool. Note though, that the data preparation steps in SEPAL can take many hours to complete. If you are unfamiliar with any of the preparations steps, please consult the relevant modules.</p>
<p>If you already have a time series of percent forest coverage feel free to use that.</p>
<ol class="upperalpha">
<li><p>Download demo data</p>
<ol class="arabic simple">
<li><p>Navigate to your SEPAL <strong>Terminal</strong>.</p></li>
<li><p>Start a new instance or  join your current instance.</p></li>
<li><p>Clone the deforest Github repository to your SEPAL account using the following command.</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/smfm-project/deforest</span> <span class="pre">`</span></code></p>
</li>
<li><p>Use SEPAL workflow to generate time series of forest probability images</p>
<ol class="arabic simple">
<li><p>Create an optical mosaic for your area of interest using the Process tab Optical Mosaic process. If this is unfamiliar to you, please see the tutorials here on OpenMRV under process “Mosaic generation with SEPAL”.</p></li>
<li><p>Save the mosaic as a recipe.</p></li>
<li><p>Open a new classification and point to the optical mosaic recipe as the image to classify. Use the Process tab Classification process. If this is unfamiliar to you, please see the tutorials here on OpenMRV under process “Classification”.</p>
<ol class="arabic simple">
<li><p>Select the bands you want to include in the classification.</p></li>
<li><p>Add forest/non-forest training data.</p>
<ol class="arabic simple">
<li><p>Sample points directly in SEPAL.</p></li>
<li><p>Optionally, use Earth Engine asset.</p></li>
</ol>
</li>
<li><p>Apply the classifier.</p></li>
<li><p>Select the <strong>%forest output</strong>.</p></li>
<li><p>Save the classification as a recipe.</p></li>
</ol>
</li>
</ol>
<ol class="arabic simple">
<li><p>Open a new time-series</p>
<ol class="arabic simple">
<li><p>Select the same area of interest as your mosaic.</p></li>
<li><p>Choose a date range for the time series.</p></li>
<li><p>In the ‘SRC’ box select satellites you used in the previous steps and the classification to apply.</p></li>
<li><p>Then you can download the time series to your SEPAL workspace.</p></li>
</ol>
</li>
</ol>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It will take many hours to download the classified time series to your account depending upon how large your area of interest is.</p>
</div>
</div>
<div class="section" id="setup">
<h4>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h4>
<p>Navigate to the <strong>Apps</strong> menu by clicking on the wrench icon and typing “SMFM” into the search field. Select “SMFM Deforest”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sometimes the tool takes a few minutes to load. Wait until you see the tool’s interface. In case the tool fails to load properly, please close the tab and repeat the above steps. If this does not work, reload SEPAL.</p>
</div>
<ol class="arabic simple">
<li><p>Click and run the first cell under the <strong>Setup</strong> header. This cell runs two commands, the first installs the deforest Python module and the second runs the <strong>–help</strong> switch to display some documentation on running the tool.</p>
<ol class="arabic simple">
<li><p>If the help text is output beneath the cell, move onto the 3rd step. If there is an error, continue to step 2. The error message might say:</p></li>
</ol>
</li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python3:</span> <span class="pre">can't</span> <span class="pre">open</span> <span class="pre">file</span> <span class="pre">'/home/username/deforest/sepal/change.py':</span> <span class="pre">[Errno</span> <span class="pre">2]</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span> <span class="pre">`</span></code></p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../_images/smfm_notebook_1_setup.png"><img alt="Successful setup." src="../_images/smfm_notebook_1_setup.png" style="width: 450px;" /></a>
<p class="caption"><span class="caption-text">Successful setup.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic" start="2">
<li><p>Install the package via the SEPAL Terminal</p>
<ol class="arabic">
<li><p>Navigate to your SEPAL <strong>Terminal</strong>.</p></li>
<li><p>Type <em>1</em> to access the terminal of session #1. You can think of a session as an instance of a virtual machine that is connected to your SEPAL account.</p></li>
<li><p>Clone the deforest github repository to your SEPAL account.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/smfm-project/deforest</span>
</pre></div>
</div>
</li>
<li><p>Return to the SMFM notebook and repeat step 1.</p></li>
</ol>
</li>
</ol>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/smfm_clone_deforest.png"><img alt="Cloning a repository via the SEPAL terminal." src="../_images/smfm_clone_deforest.png" style="width: 450px;" /></a>
</div>
<ol class="arabic simple" start="3">
<li><p>Once you have successfully set up the tool, take a moment to read through the help document of the deforest tool that is output below the Jupyter notebook cell you just ran. In the next part we will explain in more detail some of the parameters.</p></li>
</ol>
</div>
<div class="section" id="process-the-time-series">
<h4>Process the time series<a class="headerlink" href="#process-the-time-series" title="Permalink to this headline">¶</a></h4>
<p>Processing the time series imagery can be done with a single line of code using the Deforest change.py command line interface.</p>
<p>1. To use the demo imagery, you do not need to change any of the inputs. However, if you are using a custom time series you will need to make some modifications. To change the command to point to a custom time series of percent forest images you will need to update the path to your time series.
Original:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!python3 ~/deforest/sepal/change.py ~/deforest/sepal/example_data/Time_series_2021-03-24_10-53-03/0/ -o ~/ -n sampleOutput -d 12-01 04-30 -t 0.999 -s 6000 -v
</pre></div>
</div>
<p>Example path to time series updated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!python3 ~/deforest/sepal/change.py  ~/downloads/PATH_TO_TIME_SERIES/0/ -o ~/ -n sampleOutputT -d 12-01 01-08 -t 0.999 -s 6000 -v
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default the time series should be downloaded to a <strong>downloads</strong> folder in your home directory and should have another folder in it named <strong>0</strong>.</p>
</div>
<ol class="arabic simple">
<li><p>Parameters</p></li>
</ol>
<table class="colwidths-given table">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Switch</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Output location</p></td>
<td><p>-o</p></td>
<td><p>output location where images will be saved on SEPAL account</p></td>
</tr>
<tr class="row-odd"><td><p>Output name</p></td>
<td><p>-n</p></td>
<td><p>Output file name prefix</p></td>
</tr>
<tr class="row-even"><td><p>Date range</p></td>
<td><p>-d</p></td>
<td><p>A date range filter. Dates need to be formatted as ‘-d MM-DD MM-DD’</p></td>
</tr>
<tr class="row-odd"><td><p>Threshold</p></td>
<td><p>-t</p></td>
<td><p>Set a threshold probability to identify deforestation (between 0 and 1). High thresholds are more strict in the identification of deforestation. Defaults to 0.99.</p></td>
</tr>
<tr class="row-even"><td><p>Scale</p></td>
<td><p>-s</p></td>
<td><p>Scale inputs by a factor of 6000. In a full-scale run this should be set to 10000, here it’s used to correct an inadequate classification.</p></td>
</tr>
<tr class="row-odd"><td><p>Verbose</p></td>
<td><p>-v</p></td>
<td><p>Prints information to the console as the tool is run.</p></td>
</tr>
</tbody>
</table>
<p>If you would like to use a time frame other than the example, update the <strong>date range</strong> switch.</p>
<ol class="arabic" start="3">
<li><p>Run the <strong>Process the time series</strong> cell.</p>
<ol class="arabic simple">
<li><p>By default the tool is set to use verbose (-v) output. With this option, as each image is processed a message will be printed to inform us of the progress.</p></li>
</ol>
<dl class="simple">
<dt>This cell runs two commands:</dt><dd><ol class="loweralpha simple">
<li><p>The first line is running the SMFM Deforest change detection algorithm (change.py).</p></li>
<li><p>After processing the images we print them out to ensure the program runs successfully.</p></li>
</ol>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The exclamation mark (<strong>!</strong>) is used to run commands using the underlying operating system. When we run <em>!ls</em> in the notebook it is the same as running <em>ls</em> in the terminal.</p>
</div>
<p>The output deforestation image will be saved to the home directory of SEPAL account(home/username) by default. If you want to save your images in a different location it can be changed by adding the new path after the <strong>-o</strong> switch.</p>
<ol class="arabic simple" start="2">
<li><p>(Optional) Download outputs to local computer</p>
<ol class="arabic simple">
<li><p>Navigate to the <em>Files</em> section of your SEPAL account.</p></li>
<li><p>Locate the output image to download and click to select it. In this case the image is named <em>sampleOutput_confirmed</em>.</p></li>
<li><p>Click the download icon.</p></li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="data-visualization">
<h4>Data visualization<a class="headerlink" href="#data-visualization" title="Permalink to this headline">¶</a></h4>
<p>Now that we have run the deforestation processing chain, we can visualize our output maps. The outputs of the SMFM tool are two images <strong>confirmed</strong> and <strong>warning</strong>. We will look at the confirmed image first.</p>
<ol class="arabic">
<li><p>Run the first <strong>Data visualization</strong> cell of the Jupyter notebook.</p>
<ol class="loweralpha simple">
<li><p>If you changed the name of your output file be sure to update the path on line 8 for the variable <em>confirmed</em>.</p></li>
</ol>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/smfm_confirmations.png"><img alt="Example of a Jupyter Notebook cell." src="../_images/smfm_confirmations.png" style="width: 450px;" /></a>
</div>
</div></blockquote>
<p>The confirmed image shows the years of change that have been detected in the time series. Stable forest is colored green, non forest is colored yellow, and the change years colored by a blue gradient.</p>
<p>It is recommended that the user discards the first 2-3 years of change, or uses a very high quality forest baseline map to mask out locations that weren’t forest at the start of the time series. This is needed since our input imagery is a forest probability time series which initially considers the landscape as forest.</p>
</li>
</ol>
<p>Next, we will check out the deforest warning output.</p>
<ol class="arabic">
<li><p>Run the second <strong>Data visualization</strong> cell</p>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/smfm_warnings.png"><img alt="Example of a Jupyter Notebook cell." src="../_images/smfm_warnings.png" style="width: 450px;" /></a>
</div>
</div></blockquote>
<p>This image shows the combined probability of non-forest existing at the end of our time series in locations that have not yet been flagged as deforested. This can be used to provide information on locations that have not yet reached the threshold for confirmed changes, but are looking likely to be possible.</p>
<p>You can view a demonstration of the above steps on <a class="reference external" href="https://youtu.be/9BswdPlncfM">YouTube</a>.</p>
</li>
</ol>
</div>
<div class="section" id="id1">
<h4>Additional Resources<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Source code: The source code of the Deforest tool and Jupyter notebook can be found in the <a class="reference external" href="https://github.com/smfm-project/deforest">GitHub repository</a>.</p></li>
<li><p>Bug report: in case you notice a bug or have issues using the tool, you can report an issue using the <a class="reference external" href="https://github.com/smfm-project/deforest/issues">Issues section</a> of the Github repository. This will take you to an issue creation page on the GitHub repository of the tool.</p></li>
</ul>
</div>
</div>
<div class="section" id="other-approaches-to-time-series-analysis">
<h3>Other approaches to time series analysis<a class="headerlink" href="#other-approaches-to-time-series-analysis" title="Permalink to this headline">¶</a></h3>
<p>In this exercise, you will learn more about time series analysis. SEPAL has the BFAST option, described first. We also provide information on TimeSync and LandTrendr, products currently only available outside of SEPAL and CEO.</p>
<p>TimeSync integration is coming to CEO in 2021.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objectives</strong>:</p>
<ul class="simple">
<li><p>Learn the basics of BFAST explorer in SEPAL</p></li>
<li><p>Learn about time series analysis options outside of SEPAL</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisit</strong>: SEPAL account</p>
</div>
<div class="section" id="bfast-explorer">
<h4>BFAST Explorer<a class="headerlink" href="#bfast-explorer" title="Permalink to this headline">¶</a></h4>
<p>Breaks For Additive Seasonal and Trend (BFAST) is a change detection algorithm for time series which detects and characterizes changes. BFAST integrates the decomposition of time series into trend, seasonal, and remainder components with methods for detecting change within time series. BFAST iteratively estimates the time and number of changes, and characterizes change by its magnitude and direction (Verbesselt et al. 2009).</p>
<p>BFAST Explorer is a Shiny app, developed using R and Python, designed for the analysis of Landsat Surface Reflectance time series pixel data. Three change detection algorithms - bfastmonitor, bfast01 and bfast - are used in order to investigate temporal changes in trend and seasonal components, via breakpoint detection. If you encounter any bugs, please send a message to <a class="reference external" href="mailto:almeida&#46;xan&#37;&#52;&#48;gmail&#46;com">almeida<span>&#46;</span>xan<span>&#64;</span>gmail<span>&#46;</span>com</a>, or create an issue on the GitHub page.</p>
<p>More information can be found online at <a class="reference external" href="http://bfast.r-forge.r-project.org/">http://bfast.r-forge.r-project.org/</a>.</p>
<p>Navigate to the <strong>Apps</strong> menu by clicking on the wrench icon and then Type “BFAST” into the search field and select BFAST Explorer.</p>
<p>Find a location on the map that you would like to run BFAST on. Click a location to drop a marker, and then click the marker to select it. Select <strong>Landsat 8 SR</strong> from the select satellite products dropdown. Click <code class="code docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Data</span></code>, It may take a moment to download all the data for the point.</p>
<div class="figure align-center">
<img alt="The BFAST Explorer interface." src="../_images/BFAST_explorer.png" />
</div>
<p>Click the <code class="code docutils literal notranslate"><span class="pre">Analysis</span></code> button at the top next to the <code class="code docutils literal notranslate"><span class="pre">Map</span></code> button.</p>
<ul class="simple">
<li><p><strong>Satellite product</strong>: Add your satellite data by selecting them from the satellite products dropdown menu.</p></li>
<li><p><strong>Data</strong>: The data to apply the BFAST algorithm to and plot. There are options for each band available as well as indices such as NDVI, EVI, and NDMI. Here select <strong>ndvi.</strong></p></li>
<li><p><strong>Change detection algorithm</strong>: Holds three options of BFAST to calculate for the data series.</p>
<ul>
<li><p><strong>Bfastmonitor</strong>: Monitoring the first break at the end of the time series.</p></li>
<li><p><strong>Bfast01</strong>: Checking for one major break in the time series.</p></li>
<li><p><strong>Bfast</strong>: Time series decomposition and multiple breakpoint detection in tend and seasonal components.</p></li>
</ul>
</li>
</ul>
<p>Each BFSAT algorithm methodology has characteristics which affect when and why you may choose one over the other. For instance, if the goal of an analysis is to monitor when the last time change occurred in a forest then “Bfastmonitor” would be an appropriate choice. Bfast01 may be a good selection when trying to identify if a large disturbance event has occurred, and the full Bfast algorithm may be a good choice if there are multiple times in the time series when change has occurred.</p>
<p>Select <strong>bfastmonitor</strong> as the algorithm.</p>
<div class="figure align-center">
<img alt="The BFAST Explorer interface." src="../_images/BFAST_explorer_interface.png" />
</div>
<p>You can explore different bands (including spectral bands e.g. b1) along with the different algorithms.</p>
<div class="figure align-center">
<img alt="../_images/BFAST_visualization.png" src="../_images/BFAST_visualization.png" />
</div>
<p>You can also download all the time series data by clicking the blue <code class="code docutils literal notranslate"><span class="pre">Data</span></code> button. All the data will be downloaded as a .CSV, ordered by the acquisition date.
You can also download the time series plot as an image, by pressing the blue <code class="code docutils literal notranslate"><span class="pre">Plot</span></code> button. A window will appear offering some raster (.JPEG, .PNG) and a vectorial (.SVG) image output formats.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The black and white flashing is normal.</p>
</div>
</div>
<div class="section" id="timesync-and-landtrendr">
<h4>TimeSync and LandTrendr<a class="headerlink" href="#timesync-and-landtrendr" title="Permalink to this headline">¶</a></h4>
<p>Here we will briefly review TimeSync and LandTrendr, two options available outside of SEPAL that may be useful to you in the future. It is outside of the scope of this manual to cover them in detail but if you’re interested in learning more we’ve provided links to additional resources.</p>
<div class="section" id="timesync">
<h5>TimeSync<a class="headerlink" href="#timesync" title="Permalink to this headline">¶</a></h5>
<p>TimeSync was created by Oregon State University, Pacific Northwest Research Station, the Forest Service Department of Agriculture, and the USFS Remote Sensing Applications Center.</p>
<p>From the TimeSync User manual version 3:</p>
<blockquote>
<div><p>“TimeSync is an application that allows researchers and managers to characterize and quantify disturbance and landscape change by facilitating plot-level interpretation of Landsat time series stacks of imagery (a plot is commonly one Landsat pixel). TimeSync was created in response to research and management needs for time series visualization tools, fueled by rapid global change affecting ecosystems, major advances in remote sensing technologies and theory, and increased availability and use of remotely sensed imagery and data products…”</p>
</div></blockquote>
<p>TimeSync is a Landsat time series visualization tool (both as a web application and for desktops) that can be used to:</p>
<ul class="simple">
<li><p>Characterize the quality of land cover map products derived from Landsat time series.</p></li>
<li><p>Derive independent plot-based estimates of change, including viewing change over time and estimating rates of change.</p></li>
<li><p>Validate change maps.</p></li>
<li><p>Explore the value of Landsat time series for understanding and visualizing change on the earth’s surface.</p></li>
</ul>
<p>TimeSync is a tool that researchers and managers can use to validate remotely sensed change data products and generate independent estimates of change and disturbance rates from remotely sensed imagery. TimeSync requires basic visual interpretation skills, such as aerial photo interpretation and Landsat satellite image interpretation.”</p>
<p>From TimeSync’s Introduction materials, here is an example output:</p>
<div class="figure align-center">
<img alt="An example from TimeSync." src="../_images/TimeSync_example.png" />
</div>
<p>For more information on TimeSync, including an online tutorial (for version 2 of TimeSync), go to: <a class="reference external" href="https://www.timesync.forestry.oregonstate.edu/tutorial.html">https://www.timesync.forestry.oregonstate.edu/tutorial.html</a>. There you can register for an account and work through an online tutorial with examples and watch a recorded TimeSync training session. You can also find the manual for version 3 of TimeSync here: <a class="reference external" href="http://timesync.forestry.oregonstate.edu/training/TimeSync_V3_UserManual_doc.pdf">http://timesync.forestry.oregonstate.edu/training/TimeSync_V3_UserManual_doc.pdf</a>, and an introductory presentation here: <a class="reference external" href="https://timesync.forestry.oregonstate.edu/training/TimeSync_V3_UserManual_presentation.pdf">https://timesync.forestry.oregonstate.edu/training/TimeSync_V3_UserManual_presentation.pdf</a>.</p>
</div>
<div class="section" id="landtrendr">
<h5>LandTrendr<a class="headerlink" href="#landtrendr" title="Permalink to this headline">¶</a></h5>
<p>LandTrendr has much the same functionality as TimeSync, but runs in Google Earth Engine. It was created by <a class="reference external" href="https://ceoas.oregonstate.edu/people/robert-kennedy">Dr. Robert Kennedy</a>’s lab with funding from the US Forest Service Landscape Change Monitoring System, the NASA Carbon Monitoring System, a Google Foundation Grant, and U.S. National Park Service Cooperative Agreement. Recent contributors include David Miller, Jamie Perkins, Tara Larrue, Sam Pecoraro, and Bahareh Sanaie (Department of Earth and Environment, Boston University). Foundational contributors include Zhiqiang Yang and Justin Braaten in the Laboratory for Applications of Remote Sensing in Ecology located at Oregon State University and the USDA Forest Service’s Pacific Northwest Research Station.</p>
<p>From Kennedy, R.E., Yang, Z., Gorelick, N., Braaten, J., Cavalcante, L., Cohen, W.B., Healey, S. (2018). Implementation of the LandTrendr Algorithm on Google Earth Engine. Remote Sensing. 10, 691.:</p>
<blockquote>
<div><p>“LandTrendr (LT) is a set of spectral-temporal segmentation algorithms that are useful for change detection in a time series of moderate resolution satellite imagery (primarily Landsat) and for generating trajectory-based spectral time series data largely absent of inter-annual signal noise. LT was originally implemented in IDL (Interactive Data Language), but with the help of engineers at Google, it has been ported to the GEE platform. The GEE framework nearly eliminates the onerous data management and image-pre-processing aspects of the IDL implementation. It is also light-years faster than the IDL implementation, where computing time is measured in minutes instead of days.”</p>
</div></blockquote>
<p>From LandTrendr’s documentation, here’s an example output in the GUI. However, LandTrendr has significant non-GUI data analysis capabilities. For a comprehensive guide to running LT in GEE visit: <a class="reference external" href="https://emapr.GitHub.io/LT-GEE/landtrendr.html">https://emapr.GitHub.io/LT-GEE/landtrendr.html</a>.</p>
<div class="figure align-center">
<img alt="The LandTrendr interface" src="../_images/LandTrendr.png" />
</div>
</div>
</div>
</div>
</div>
<div class="section" id="sample-based-estimation-of-area-and-accuracy">
<span id="module-4"></span><h2>Sample-based estimation of area and accuracy<a class="headerlink" href="#sample-based-estimation-of-area-and-accuracy" title="Permalink to this headline">¶</a></h2>
<p>Once you have either a land use/land cover (LULC) map (<a class="reference internal" href="#module-2">module 2</a>) or a change detection map (<a class="reference internal" href="#module-3">module 3</a>), the next step is to estimate the area within each LULC type or change type and the error associated with your map (this Module). All maps have errors, for example model output errors from pixel mixing or input data noise. Our objective is to create unbiased estimates of the area for each mapped category.</p>
<p>To do this, we will use sample-based estimations of area and error instead of ‘pixel counting’ approaches. Pixel counting approaches simply sum the area belonging to each different class. However, this doesn’t account for classification errors–for example, the probability that a pixel classified as wetland should be open water. Therefore, the pixel counting approach provides no quantification of sampling errors and no assurance that estimates are unbiased or that uncertainties are reduced (Stehman, 2005; GFOI, 2016).</p>
<p>Sample-based estimations of area and error create estimations of errors in pixel classification and use this to inform estimations of area. Therefore, sample-based estimations are in keeping with the IPCC General Guidelines (2006) that estimates should not be over- or under- estimates, and that uncertainty should be reduced as much as practically possible. For more information on the theory behind choosing sample-based estimations of area and error over pixel counting approaches, see:</p>
<ul class="simple">
<li><p>GFOI. 2016. Integration of remote-sensing and ground-based observations for estimation of emissions and removals of greenhouse gases in forests: Methods and Guidance from the Global Forest Observations Initiative, Edition 2.0, Food and Agriculture Organization, Rome</p></li>
<li><p>GOFC-GOLD. 2016. A sourcebook of methods and procedures for monitoring and reporting anthropogenic greenhouse gas emissions and removals associated with deforestation, gains and losses of carbon stocks in forests remaining forests, and forestation. GOFC-GOLD Report version COP22-1, (GOFC-GOLD Land Cover Project Office, Wageningen University, The Netherlands)</p></li>
<li><p>Gallego, FJ. 2004. Remote sensing and land cover area estimation. International Journal of Remote Sensing, 25(15): 3019-3047, DOI: 10.1080/01431160310001619607</p></li>
<li><p>IPCC. 2006. Guidelines for national Greenhouse Gas Inventories. Volume 4: Agriculture, Forestry and Other Land Use. <a class="reference external" href="http://www.ipcc-nggip.iges.or.jp/public/2006gl/vol4.html">http://www.ipcc-nggip.iges.or.jp/public/2006gl/vol4.html</a></p></li>
<li><p>REDD Compass: <a class="reference external" href="https://www.reddcompass.org/">https://www.reddcompass.org/</a></p></li>
</ul>
<p>There are four steps to sample-based estimation of area and accuracy. First, you will use the different classes in your LULC or change detection map to create a stratified sampling design in SEPAL using the Stratified Area Estimator (SAE) - Design tool (Exercise 4.1). Then you will revisit your response design and labeling protocols to use with data collection in CEO (Exercise 4.2). Finally, you will use data generated in CEO (Exercise 4.3) to calculate the sample-based estimates in SEPAL, using the Stratified Area Estimator- Analysis tool (Exercise 4.4). This tool quantifies the agreement between the validation reference points and the map product, providing information on how well the class locations were predicted by the Random forest classifier.</p>
<p>This process will provide two important outputs. First, you will have estimates of the area for each LULC or change type. Second, you will have a table that describes the accuracy for each LUC or change type. This is often called a confusion matrix. These may be final products for your projects. However, if you decide that your map is not accurate enough, this information can be fed back into the classification or change detection algorithms to improve your model.</p>
<p>This Module takes approximately 3 hours to complete.</p>
<div class="section" id="sample-design-and-stratification">
<span id="section-4-1"></span><h3>Sample design and stratification<a class="headerlink" href="#sample-design-and-stratification" title="Permalink to this headline">¶</a></h3>
<p>Stratified random sampling is an easy to use, easy to understand, and well supported sampling design (for more information, see Olofsson et al. 2014. Good practices for assessing accuracy and estimating area of land change, Remote Sensing of Environment 148, 42-57). With stratified random sampling, each class (e.g. land use, land cover, change type) is treated as a strata. Then, a sample is randomly taken from each sample, either in proportion to area, in proportion to expected variance, or in equal numbers across strata.</p>
<p>We will use the SEPAL SAE-Design tool. You will upload your classified map and set some basic parameters, then the SAE-Design tool will generate a set of stratified random points that are placed in each of the different land cover classes represented in your map. The number of points in each class will be scaled to the area each class covers in the map. The total sample size, the number of points used to validate the map will depend on your expected overall accuracy. Be sure to log these choices as part of your documentation (<a class="reference internal" href="#module-5">module 5</a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objectives</strong>:</p>
<ul class="simple">
<li><p>Generate a stratified random sample based on your image classification</p></li>
<li><p>Upload your stratification to SEPAL</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisites</strong>:</p>
<ul class="simple">
<li><p>Classification from <a class="reference internal" href="#module-2">module 2</a></p></li>
<li><p>advanced users can use the classification from <a class="reference internal" href="#module-3">module 3</a></p></li>
</ul>
</div>
<div class="section" id="uploading-files-to-sepal">
<span id="section-4-1-1"></span><h4>Uploading files to SEPAL<a class="headerlink" href="#uploading-files-to-sepal" title="Permalink to this headline">¶</a></h4>
<p>If your classification is not stored in SEPAL (for example, a classification in GEE or a classification created through CODED), you will need to upload it to SEPAL in order to use SEPAL’s stratified random sample tool. Several option are described in this <a class="reference external" href="../setup/FileZilla.html">page</a> of the documentation.</p>
</div>
<div class="section" id="creating-a-stratified-random-sample">
<span id="section-4-1-2"></span><h4>Creating a stratified random sample<a class="headerlink" href="#creating-a-stratified-random-sample" title="Permalink to this headline">¶</a></h4>
<p>We will use SEPAL to create a stratified random sample. To begin, you can use the test dataset available in SEPAL or you can use a raster of your classification loaded into SEPAL.</p>
<p>If you have a large area you are stratifying, please first increase the size of your instance (see <a class="reference external" href="../setup/presentation.html#terminal-tab">Introduction to SEPAL</a>).</p>
<p>A well-prepared sample can provide a robust estimate of the parameters of interest for the population (percent forest cover, for example). The goal of a sample is to provide an unbiased estimate of some population measure (e.g. proportion of area), with the smallest variance possible, given constraints including resource availability. Two things to think about for sample design are: do you have a probability based sample design? That is, does every sample location have some probability of being sampled? And second, is it geographically balanced? That is, are all regions in the study area represented. These factors are required for the standard operating procedures when reporting for REDD+.</p>
<p>These directions will provide a stratified random sample of the proper sampling size.</p>
<p>First, navigate to <a class="reference external" href="https://sepal.io/">https://sepal.io/</a> and sign in. Select the <code class="code docutils literal notranslate"><span class="pre">Apps</span></code> button (purple wrench). Type ‘stratified’ into the search bar or scroll through the different process apps to find “Stratified Area Estimator - Design”. Select <strong>Stratified Area Estimator - Design.</strong> Note that loading the tool takes a few minutes.</p>
<div class="figure align-center">
<img alt="Stratified Area Estimator-Design tool." src="../_images/stratified_area_estimator_design.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sometimes the tool fails to load properly (none of the text loads) as seen below. In this case, please close the tab and repeat the above steps.</p>
<div class="figure align-center">
<img alt="Failure of the stratified area estimator tool." src="../_images/fail_stratified_estimator_tool.png" />
</div>
</div>
<p>When the tool loads properly, it will look like the image below. Read some of the information on the <strong>Introduction</strong> page to acquaint yourself with the tool.</p>
<p>On the <strong>Introduction</strong> page, you can change the language from English to French or Spanish.
The Description, Background, and “How to use the tool” panels provide more information about the tool.
The Reference and Documents panel provides links to other information about stratified sampling, such as REDD Compass.</p>
<div class="figure align-center">
<img alt="The stratified estimator interface." src="../_images/stratified_estimator_interface.png" />
</div>
<p>The steps necessary to design the stratified area estimator are located on the left side of the screen and they need to be completed sequentially from top to bottom.
Select <code class="code docutils literal notranslate"><span class="pre">Map</span> <span class="pre">input</span></code> on the left side of the screen.</p>
<p>For this exercise, we’ll use the classification from <a class="reference internal" href="#module-2">module 2</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>However, you can substitute another classification, such as the change detection classification created in <a class="reference internal" href="#module-3">module 3</a> if you would like.</p>
</div>
<p>In the <strong>Data type</strong> section, click <code class="code docutils literal notranslate"><span class="pre">Input</span></code>.
In the <strong>Browse</strong> window that opens, navigate to the <a class="reference internal" href="#module-2">module 2</a> dataset and select it. Then click  on <code class="code docutils literal notranslate"><span class="pre">Select</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note that the <strong>Output folder</strong> section shows you where in your SEPAL workspace all the files generated from this Exercise will be saved.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Optionally, you can use a csv with your raster areas instead. We won’t discuss that here.</p>
</div>
<p>Next, click <code class="code docutils literal notranslate"><span class="pre">Strata</span> <span class="pre">areas</span></code> on the left side of the screen. In the <strong>Area calculation</strong> section, select <code class="code docutils literal notranslate"><span class="pre">OFT</span></code>. <strong>OFT</strong> stands for the Open Foris Geospatial Toolkit. R is slower but avoids some errors that arise with OFT.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you choose to use OFT, it will return values for the map that are incorrect if your map stored using certain formats (e.g. signed 8 bit). If this is the case, then please use the R option and it will work correctly. If using OFT, always compare the <strong>Display map</strong> with the <strong>Legend labeling</strong> values returned to make sure they match.</p>
</div>
<div class="figure align-center">
<img alt="Stratified estimator tool showing the display map and legend and areas filled out." src="../_images/stratified_estimator_map_legend.png" />
</div>
<p>The <strong>“Do you want to display the map”</strong> checkbox allows you to display your geotiff under “Display map”.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The colors displayed in the SAE-Design tool in this section may be different than what you see elsewhere. Additionally, if your ‘no data’ class is 0, the tool will color this as well.</p>
</div>
<p>Click the <strong>Area calculation and legend generation</strong> button. This will take a few minutes to run. After it completes, notice that it has updated the <strong>Legend labeling</strong> section of the page.</p>
<p>Next, you will need to adjust the class names in the <strong>Legend labeling</strong> section. Type in the following class names in place of the numeric codes for your Amazon:
-   0 = No Data
-   1 = Forest
-   2 = Non-Forest</p>
<p>Now click <code class="code docutils literal notranslate"><span class="pre">Submit</span> <span class="pre">Legend</span></code>. The <strong>Legend and Areas</strong> section will now be populated with the map code, map area, and edited class name.
You can now <strong>Rename</strong> and <strong>Download</strong> the area file if you would like. However it will save automatically to your Sepal workspace.
When you’re done, click on <strong>Strata selection</strong> on the left panel.</p>
<p>Now you need to specify the expected accuracies. You will do this for each class. Get more information by clicking the <strong>plus</strong> button to the right of the box that says <strong>What are the expected accuracies?</strong>.</p>
<ul class="simple">
<li><p>Specify the expected user accuracy helps the program determine which classes might need more points relative to their area.</p></li>
<li><p>Some classes are easier to identify–including common classes and classes with clear identifiers like buildings.</p></li>
<li><p>Classes that are hard to identify include rare classes and classes that look very similar to one another. Having more classes with low confidence will increase the sample size.
-   Select the value for classes with high expected user accuracy with <strong>the first slider</strong>. This is set to 0.9 by default, and we’ll leave it there.
-   Then, select the value for classes with low expected user accuracy with <strong>the second slider</strong>. This is set to 0.7 by default, and we’ll leave it there as well.</p></li>
</ul>
<p>Now we need to assign each class to the high or the low expected user accuracy group. Think about your forest and non-forest classes. Which do you think should be high confidence? Which should be low confidence? Why?
Click on the box under <strong>“high confidence”</strong> and assign your high confidence class(es). Then, click on the box under <strong>“low confidence”</strong> that appears and assign the corresponding class(es). If you make a mistake, there’s no way to remove the classes. However, just change one of the sliders slightly, move it back, and the class assignments will have been reset.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>For this exercise, please assign both Forest &amp; Non-forest to the high confidence class. If you assign either to the low confidence class, you will not be able to use the CEO-SEPAL bridge in <a class="reference internal" href="#section-4-2">section 4.2</a>.</p>
<blockquote>
<div><p>DO NOT assign your No Data class to either high or low confidence.</p>
</div></blockquote>
</div>
<div class="figure align-center">
<img alt="High and low expected user accuracy." src="../_images/high_low_expected_user_accuracy.png" />
</div>
<p>When you’re satisfied, click on <strong>Sampling Size</strong> on the left panel.</p>
<p>Now we will calculate the required sample size for each strata. You can click on the “+” button to get more information.</p>
<ul>
<li><p>First we need to set the <strong>standard error of the expected overall accuracy.</strong> It is 0.01 by default, however for this exercise we will set it to 0.05.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>This value affects the number of samples placed in each map class. The lower the value, the more points there are in the sample design. Test this by changing the error from 0.05 to 0.01, and then change it back to point 0.05. Alternatively, you can click the up/down button to the right of the number.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that you can adjust this incrementally with the up/down arrows on the right side of the parameter.</p>
</div>
</li>
<li><p>Then determine the <strong>minimum sample size per strata.</strong> By default it is 100. For the purposes of this test we will set it to 20, <strong>but in practice this should be higher.</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also check the “Do you want to modify the sampling size” box.</p>
</div>
</li>
<li><p>If you would like, you can edit the name of the file &amp; download a csv with the sample design. The file contains the table shown above with some additional calculations. However, SEPAL will automatically save this file.</p></li>
</ul>
<div class="figure align-center">
<img alt="The stratified estimator sampling size and distribution of samples screen." src="../_images/stratified_estimator_sampling.png" />
</div>
<p>When you’re ready, click on <strong>Sample allocation</strong> to the left. The final step will select the random points to sample.
Select <strong>Generate sampling points</strong> and wait until the progress bar in the bottom right finishes. Depending on your map, this may take multiple minutes. A map will pop up showing the sample points. You can pan around or zoom in/out within the sample points map. he resulting <strong>distribution of samples</strong> should look similar to the below image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These values will vary depending on your map and the standard error of expected overall accuracy you set.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Sometimes this step fails, no download button will appear, and you will need to refresh the page and restart the process.</p>
</div>
<div class="figure align-center">
<img alt="The stratified estimator tool's sample allocation screen." src="../_images/stratified_estimator_map.png" />
</div>
<p>Now fill out the four fields to the right. You can add additional data by specifying which country the map is in. Here, Leave the <strong>Choose your country name…</strong> section blank. Specify the <strong>number of operators,</strong> or people who will be doing the classification. Here, leave it set to 1. For CEO, this might be the number of users you think your project will have. The <strong>size of the interpretation box</strong> depends on your data and corresponds to CEO’s sample plot. This value should be set to the spatial resolution of the imagery you classified (Landsat= 30 meters). Here, leave it at 30 m.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When should you use CEO, and when should you use the CEO-SEPAL bridge? In general, <strong>the CEO-SEPAL bridge should only be used for fairly simple use cases.</strong> More specifically, CEO-SEPAL is a great option when you have only high-confidence categories, have a relatively small number of points, when you will collect the data yourself, and when the built in questions about your data points suffice. For other situations, you will want to create a CEO project. Creating a CEO project through the collect.earth website is a better option when you have low-confidence categories, a larger number of points in your sample, when you want to use specific validation imagery, when multiple people will collect data and you need to track who is collecting data, and when you need more complex or custom questions about your data points.</p>
</div>
<p>If you would like to create a project via CEO, click on <strong>Download .csv</strong> and follow the steps in <a class="reference internal" href="#section-4-1-3">section 4.1.3</a> below. After following the directions in this, you will proceed to <a class="reference internal" href="#section-4-2">section 4.2</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We highly recommend using this approach, and we will demonstrate it in this manual.</p>
</div>
<p>To create a project via the CEO-SEPAL bridge, click on <strong>Create CEO project</strong>. This will create a CEO project via the CEO-SEPAL bridge. This process will take a few minutes and you should see text and completion bars in the lower right as calculations happen. Copy-paste the link into your browser window when it appears.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Be sure to save this link somewhere so you can reference it later.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>You MUST be logged out of CEO for this pathway to work.</p>
</div>
<div class="figure align-center">
<img alt="Creating a CEO project through SEPAL." src="../_images/ceo_project_sepal.png" />
</div>
<p>When the project has been created, you can skip down to <a class="reference internal" href="#section-4-2">section 4.2</a>.
You can download a .shp file to examine your points in QGIS, ArcGIS, or another GIS program. You can also create a CEO project using a .shp file, however that is outside of the scope of this manual. Directions can be found in the Institutional manual found here: <a class="reference external" href="https://collect.earth/support">https://collect.earth/support</a>.</p>
</div>
<div class="section" id="creating-a-ceo-project-via-csv">
<span id="section-4-1-3"></span><h4>Creating a CEO project via CSV<a class="headerlink" href="#creating-a-ceo-project-via-csv" title="Permalink to this headline">¶</a></h4>
<p>For projects with large sample sizes, where you want to have multiple people collecting validation data, or where you want to use specific validation imagery, you will want to create a project through CEO rather than through the CEO-SEPAL bridge. Note that the TOTAL number of plots you want to sample using a .csv must be 50,000 or less. If you have more plots, break it into multiple projects.</p>
<p>Make sure you have downloaded the .csv of your stratified random sample plots (<a class="reference internal" href="#section-4-1-2">section 4.1.2</a>). Open your downloaded .csv file in Excel or the spreadsheet program of your choice. First, make sure that your data doesn’t contain a strata of ‘no data’. This can occur if your classification isn’t a perfect rectangle, as seen in this example of Nepal (the red circles are samples that the tool created in the ‘no data’ area).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have ‘no data’ rows, return to the SEPAL stratified estimator, and be sure to not include your no data class in the strata selection step.</p>
</div>
<div class="figure align-center">
<img alt="Example data from the SEPAL classification." src="../_images/example_data_sepal_classification.png" />
</div>
<p>Right now, your stratification is grouped by land cover type (<strong>map_class</strong> column). To reduce the human tendency to use the order of the plots to help identify them (i.e. knowing the first 100 plots were classified forest, so being more likely to verify them as forest instead of determining if that is correct) we suggest first randomizing the order of the rows. To do this, click the <code class="code docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">&amp;</span> <span class="pre">Filter</span></code> button in Excel.</p>
<div class="figure align-center">
<img alt="Using the Sort and Filter features in Excel." src="../_images/sort_filter_excel.png" />
</div>
<p>Next, Sort on the ‘id’ field by value, either smallest to largest or largest to smallest.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/custom_filter_excel.png"><img alt="A custom sort in Excel." src="../_images/custom_filter_excel.png" style="width: 450px;" /></a>
</div>
<p>Now we need to add the correct columns for CEO. Remember that Latitude is the Y axis and longitude is the X axis. For CEO, the first three columns must be in the following order: longitude, latitude, plotid. The spelling and order matter. If they are wrong CEO will not work correctly.</p>
<ul class="simple">
<li><p>Rename ‘id’ to PLOTID. You can also add a new PLOTID field by creating a new column labeled PLOTID, and fill it with values 1-(number of rows).</p></li>
<li><p>Rename the ‘XCoordinate’ column to ‘LONG’ or ‘LONGITUDE’.</p></li>
<li><p>Rename the ‘YCoordinate’ column to ‘LAT’ or ‘LATITUDE’.</p></li>
<li><p>Reorder the columns in Excel so that LAT, LONG, PLOTID are the first three columns, in that order.</p></li>
</ul>
<p>Save your updated .csv, making sure you save it as a .csv and not as an .xlsx file.</p>
<p>Navigate to collect.earth. Login to your CEO account. If you’re already the administrator of an institution, navigate to your institution’s landing page by typing in the institution’s name and then clicking on the Visit button.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Creating a project in CEO requires you to be the administrator of an institution. If you’re not an admin, go ahead and create a new institution. Click on create new institution from the homepage, then fill out the form &amp; click create institution.</p>
</div>
<p>When you’re on the institution’s page, click on the “Create New Project” button. This will go to the Create Project interface. We’ll now talk about what each of the sections on this page does. For more information, please see the Institutional Manual available on the collect.earth Support page <a class="reference external" href="https://collect.earth/support">https://collect.earth/support</a>.</p>
<ul>
<li><p><strong>TEMPLATE</strong>: This section is used to copy all the information—including project info, area, and sampling design—from an existing published project to a new project.</p>
<ul class="simple">
<li><p>This is useful if you have an existing project you want to duplicate for another year or location, or if you’re iterating through project design. You can use a published or closed project from your institution or another institutions’ public project.</p></li>
<li><p>The project id is found in the URL when you’re on the data collection page for the project.</p></li>
</ul>
</li>
<li><p><strong>PROJECT INFO</strong>: Under Project Info, enter the project’s <strong>Name</strong> and <strong>Description.</strong></p>
<ul class="simple">
<li><p>The <strong>Name</strong> should be short and will be displayed on the Home page as well as the project’s Data Collection page.</p></li>
<li><p>You should keep the <strong>Description</strong> short but informative.</p></li>
<li><p>The <strong>Privacy Level</strong> radio button changes who can view your project, contribute to data collection, and whether admins from your institution or others creating new projects can use your project as a template.</p></li>
</ul>
</li>
<li><p><strong>AOI</strong>: The project area of interest (AOI) determines where sample plots will be drawn from for your project. This is the first step in specifying a sampling design for your project. There are two main approaches for specifying an AOI and sampling design.</p>
<ul class="simple">
<li><p>First, using CEO’s built in system.</p></li>
<li><p>Second, creating a sample in another program and importing it into CEO. <strong>This is what we have done.</strong> You will specify the AOI in the Sample Design step instead.</p></li>
<li><p>You should choose your Basemap source, which will be the default imagery that the user sees.</p></li>
<li><p>(Optional) Check the box for any additional imagery you would like to add.</p></li>
</ul>
</li>
<li><p><strong>Sample Plot Design</strong>: Here, click the radio button next to .csv.</p>
<ul class="simple">
<li><p>Click on <strong>Upload,</strong> and upload the .csv of your stratified random sample. Note that the number of plots you want to sample must be 5000 or less.</p></li>
<li><p>Select if you would like round or square plots, and specify the size. For example, you might specify square plots of 30m width in order to match Landsat grid size.</p></li>
</ul>
</li>
<li><p><strong>Sample Point Design</strong>: Under the Sample Design header is really determining the sample point design within each sample plot.</p>
<ul class="simple">
<li><p>You can choose Random or Gridded, and how many samples per plot or the sample resolution respectively. You can also choose to have one central point.</p></li>
<li><p>Using CEO’s built in system, the maximum number of sample points per plot is 200. The maximum total number of sample points for the project across all plots is 50000.</p></li>
</ul>
</li>
<li><p><strong>Survey Design:</strong> This is where you design the questions that your data collectors/photo interpreters will answer for each of your survey plots. Each question creates a column of data. This raw data facilitates calculating key metrics and indicators and contributes to fulfilling your project goals.</p>
<ul>
<li><p><strong>Survey Cards</strong> are the basic unit of organization. Each survey card creates a page of questions on the Data Collection interface.</p></li>
<li><p>The basic workflow is: Create new top-level question (new survey card) THEN populate answers THEN create any child questions &amp; answers THEN move to next top-level question (new survey card) &amp; repeat until all questions have been asked.</p></li>
<li><p>You can ask multiple types of questions (including the button—text questions from the Simple interface). You can also add survey rules in the Survey Rules Design panel.</p></li>
<li><p>Broadly, there are four question types and three data types. They are combined into 10 different component types.</p></li>
<li><p>The four question types are:</p>
<ul class="simple">
<li><p>Button: This creates clickable buttons, allowing users to select one out of many answers for each sample point.</p></li>
<li><p>Input: Allows users to enter answers in the box provided. The answer text provided by the project creator becomes the default answer.</p></li>
<li><p>Radio button: This creates radio buttons, allowing users to select one out of many answers for each sample point.</p></li>
<li><p>Dropdown: Allows users to select from a list of answers.</p></li>
</ul>
</li>
<li><p>The three data types allowed are:</p>
<ul class="simple">
<li><p>Boolean: Use this when you have two options for a question (yes/no).</p></li>
<li><p>Text: Use this when you have multiple options which are text strings. They may include letters, numbers, or symbols.</p></li>
<li><p>Number: Use this when you have multiple options that are numbers, which do not contain letters or symbols.</p></li>
</ul>
</li>
<li><p>First, type in your question in the New question box, such as “Is this forest or non-forest?”</p></li>
<li><p>Then click add survey question.</p></li>
<li><p>A new survey card (Survey Card Number 1) will pop up with your question in it.</p></li>
<li><p>You can now add answers.</p></li>
<li><p>Create one answer for each of your land use types. Here we will use 1 and 2 to match our “Forest” and “Non-forest” in our classification. Be sure to include all your land use types.</p></li>
<li><p>Note that the Stratified Area Estimator–Analysis only accepts numeric values for the land use types. If you would like to use human-readable text values (e.g. Forest instead of 1)</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>You MUST follow the directions in <a class="reference internal" href="#section-4-3-2">section 4.3.2</a>.</p>
</div>
</li>
<li><p>You can add additional survey questions if you’d like to experiment. An example of two survey cards is shown below.</p></li>
</ul>
</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/example_survey_card.png"><img alt="An example survey card setup" src="../_images/example_survey_card.png" style="width: 450px;" /></a>
</div>
<p>When you’re done, click Create Project. If you’re successful, you’ll see the review project pane. The Project AOI will now show the location of a subset of your plots (a maximum number can be displayed).</p>
<p>Not shown are the Plot Review and Sample Design, which show a summary of the choices you made or the .csv and .shp files you uploaded. Survey Review shows all the Survey Cards you created, along with the corresponding Component Type, Rules, and Answers. At this point, your project has been created, but it has not been published so that other users can see it.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>There is also review project functionality. As an administrator, you review your unpublished project and make suggestions to the questions etc. before it is published for data collection.</p>
</div>
<p>You can either click [Publish Project] or [Configure Geo-Dash]. The option to Configure Geo-Dash will be available after you publish your project, as well. For now, let’s click on Configure Geo-Dash. A new window or tab will open and you’ll now see the blank Geo-Dash configuration page.</p>
<p>Geo-Dash is a dashboard that opens in a second window when users begin to analyze sample plots. Geo-Dash provides users with additional information to help them interpret the imagery and better classify sample points and plots. The Geo-Dash tab can be customized to show information such as NDVI time series, forest degradation tools, additional imagery, and digital elevation data. If you click on Geo-Dash Help, You’ll access information about all of the Geo-Dash widgets. This information is also in the CEO user manual. Add any widgets that you would like for your project. For example, add a NDVI widget following these steps:</p>
<ul class="simple">
<li><p>Click on Add Widget, then select the Image Collection type.</p></li>
<li><p>Select your basemap imagery.</p></li>
<li><p>Now you’ll see the data dropdown menu. Select NDVI in this menu.</p></li>
<li><p>Now you’ll see the Title</p></li>
<li><p>give your widget a title that describes the data.</p></li>
<li><p>Select the date range using the calendar widgets or by typing it in.</p></li>
<li><p>When you’re done, click Create.</p></li>
</ul>
<p>You can now move the widget by clicking and dragging from the center and resize it by clicking and dragging the lower right-hand corner. When you’re done adding widgets, close the Geo-Dash window.</p>
<p>On the project review page, click publish project. Collect earth will ask you to confirm, click OK. You can now visit your project from your institution’s page and start collecting data!</p>
<p>More detailed instructions, including descriptions of many useful options, can be found in the manuals for CEO: <a class="reference external" href="https://collect.earth/support">https://collect.earth/support</a>.</p>
</div>
</div>
<div class="section" id="data-collection-with-data-quality-management-approaches">
<span id="section-4-2"></span><h3>Data collection with data quality management approaches<a class="headerlink" href="#data-collection-with-data-quality-management-approaches" title="Permalink to this headline">¶</a></h3>
<p>Once you have created a stratified random sample, you will use CEO (or optionally the CEO-SEPAL tool) to visually interpret the land cover at the sample locations using a suitable source of reference data, often remote sensing data. These visual interpretations will then inform the area and error estimation (<a class="reference internal" href="#section-4-3">section 4.3</a>). However, to ensure accurate human interpretation of land cover, you will need to adopt data quality management approaches. Thus in this exercise, you will check your classification design (<a class="reference internal" href="#section-4-2-1">section 4.2.1</a>), plan your data collection (<a class="reference internal" href="#section-4-2-2">section 4.2.2</a>), collect your data (<a class="reference internal" href="#section-4-2-3">section 4.2.3</a>) and set up quality management (<a class="reference internal" href="#section-4-2-4">section 4.2.4</a> &amp; <a class="reference internal" href="#section-4-2-5">section 4.2.5</a>).</p>
<p>The reason for this focus on data quality is simple: area and error estimates are based on the human interpreter’s labeling of the sample; therefore, it is important that the labels are correct. Some recommend that three interpreters examine each unit independently, while other projects just have a sub-sample of the data points cross checked by another interpreter. In <a class="reference internal" href="#section-4-2-4">section 4.2.4</a> &amp; <a class="reference internal" href="#section-4-2-5">section 4.2.5</a>, you will consider this and design a quality assurance plan that meets the needs and budgets of your specific mapping projects and management needs.</p>
<p>Much of this information is based on Standard Operating Procedures developed by Till Neeff at FAO for global application. Working these exercises will help you abide by these guidelines and meet these standards of quality for the data collected.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objectives</strong>:</p>
<ul class="simple">
<li><p>Understand how to set up a successful verification project.</p></li>
<li><p>Collect land cover verification data about each of your sample points</p></li>
<li><p>Create quality management protocols for your verification project</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisites</strong>:</p>
<ul class="simple">
<li><p>Stratified random sample based on your image classification from <a class="reference internal" href="#section-4-1">section 4.1</a></p></li>
<li><p>CEO-SEPAL project initiated in <a class="reference internal" href="#section-4-1">Section 4.1</a></p></li>
</ul>
</div>
<div class="section" id="specify-a-classification-scheme">
<span id="section-4-2-1"></span><h4>Specify a classification scheme<a class="headerlink" href="#specify-a-classification-scheme" title="Permalink to this headline">¶</a></h4>
<p>“Classification scheme” is the name used to describe the land cover / land use classes adopted. It should cover all the possible classes that occur in interest. Just as when you are creating training data for your classification, you will need to have a response design with consistent labeling protocols when collecting data for your area and error estimates.</p>
<p>If you have already created a response design in <a class="reference internal" href="#module-2">module 2</a>, you should use that.</p>
<p>If you have not created a response design for the classification you are now evaluating, please refer to Exercise 2.1 to create a classification scheme. Note that if your classification was trained using training points that differ substantially from your classification scheme, you may need to collect new training data and re-run your classification.</p>
<p>As a reminder, our classification used to classify our Forest/Non-forest land cover map was as follows:</p>
<div class="graphviz"><img src="../_images/graphviz-4cbcbdcee619f77c11df2e0095e59fd8115784d8.png" alt="digraph process {
       lc [label=&quot;Land cover&quot;, shape=box];
       f [label=&quot;Forest&quot;, shape=box, style=&quot;filled&quot; color=&quot;darkgreen&quot;];
       nf [label=&quot;Non forest&quot;, shape=box, style=&quot;filled&quot;, color=&quot;grey&quot;];
       lc -&gt; f;
       lc -&gt; nf;
    }" class="graphviz" /></div>
<p>We defined Forest as an area with over 70% tree cover. We defined Non-forest as areas with less than 70% tree cover. This captured land covers including urban areas, water, and agricultural fields.</p>
</div>
<div class="section" id="planning-data-collection">
<span id="section-4-2-2"></span><h4>Planning data collection<a class="headerlink" href="#planning-data-collection" title="Permalink to this headline">¶</a></h4>
<p>Now that we have the framework for the procedure for data collection with quality in mind we can work through what it would be like setting up the process for a team. Data collection efforts require planning, particularly for large efforts with many interpreters involved. We will discuss these planning aspects here.</p>
<p>In this part, you will assume the role of a <strong>coordinator</strong> and an <strong>interpreter</strong> for a small team working to validate the land cover classification from <a class="reference internal" href="#module-2">module 2</a>. A <strong>coordinator</strong> is responsible for organizing the team and tracking compliance information. An <strong>interpreter</strong> is responsible for collecting data.</p>
<p>Identify the reference data sources.</p>
<p>Ideally, you would have plots revisited in the field. However, this is rarely attainable given limited resources. An alternative is to collect reference observations through careful examination of the sample units using high resolution satellite data, or moderate resolution if high resolution is not available. The more data you have at your disposal the better.</p>
<p>If you have no additional data, you can use remote sensing data, such as Landsat data, for collecting reference observations, as long as the process to collect the reference data is more accurate than the process used to create the map being evaluated. Careful manual examination can be regarded as being a more accurate process than automated classification.</p>
<p>Consider what additional data you might be able to include in your verification. Do you have access to satellite data at a finer resolution than Landsat? Could you incorporate additional dataset such as stump data or on the ground verifications? You might try searching databases, such as <a class="reference external" href="https://developers.google.com/earth-engine/dataset/">https://developers.google.com/earth-engine/dataset/</a>.</p>
<p>In CEO, these are the additional data sources that you have added to your CEO project. The CEO-SEPAL bridge uses only the default imagery, which is currently Mapbox Satellite.</p>
<p>Compile a list of your data sources and review it with your interpreters. Recording this information is important for documentation (see <a class="reference internal" href="#module-5">module 5</a>).</p>
<div class="figure align-center">
<img alt="A data source recording document." src="../_images/data_source_recording.png" />
</div>
<div class="section" id="determine-level-of-effort">
<h5>Determine level of effort<a class="headerlink" href="#determine-level-of-effort" title="Permalink to this headline">¶</a></h5>
<p>Estimate the necessary level of effort for the data collection using the following formula:</p>
<blockquote>
<div><p>Minutes to interpret 1 sample unit * number of sample units = required level of effort for data collection</p>
</div></blockquote>
<p>If information is available from previous inventories, use that experience to set the value on the time required for assessing sample units from previous experience using the same response design. Otherwise, carry out a test.</p>
<p>For this exercise, consider how long it took you to create your training data in <a class="reference internal" href="#module-2">module 2</a> and use the formula above to estimate how long it will take to classify all your samples.</p>
</div>
<div class="section" id="identify-data-collection-participants">
<h5>Identify data collection participants<a class="headerlink" href="#identify-data-collection-participants" title="Permalink to this headline">¶</a></h5>
<p>As coordinator, you will identify the persons who may be involved in the data collection. You should set up minimum qualifications for participating in the data collection, such as familiarity with the landscape, previous experience, etc.</p>
<ul class="simple">
<li><p>What qualifications do you think are important?</p></li>
<li><p>What qualifications are essential, and which would be nice to have?</p></li>
<li><p>How can you build capacity within your organization for data collection?</p></li>
</ul>
<p>As coordinator, you will record names and contact information of all the participants in the data collection and training.</p>
<p>Here’s a template:</p>
<table class="table">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Contact</p></th>
<th class="head"><p>Institution</p></th>
<th class="head"><p>Role for data collection</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Email address and/or phone number</p></td>
<td><p>Institution name</p></td>
<td><p>Coordinator</p></td>
</tr>
<tr class="row-odd"><td><p>Name</p></td>
<td><p>Email address and/or phone number</p></td>
<td><p>Institution name</p></td>
<td><p>Trainer</p></td>
</tr>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Email address and/or phone number</p></td>
<td><p>Institution name</p></td>
<td><p>Sample interpretation</p></td>
</tr>
<tr class="row-odd"><td><p>Name</p></td>
<td><p>Email address and/or phone number</p></td>
<td><p>Institution name</p></td>
<td><p>Sample interpretation</p></td>
</tr>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Email address and/or phone number</p></td>
<td><p>Institution name</p></td>
<td><p>etc.</p></td>
</tr>
</tbody>
</table>
<p>And a worked example:</p>
<table class="table">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Contact</p></th>
<th class="head"><p>Institution</p></th>
<th class="head"><p>Role for data collection</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Phạm Tuân</p></td>
<td><p><a class="reference external" href="mailto:example&#37;&#52;&#48;example&#46;org">example<span>&#64;</span>example<span>&#46;</span>org</a></p></td>
<td><p>Institute for Collecting Data</p></td>
<td><p>Coordinator</p></td>
</tr>
<tr class="row-odd"><td><p>Sally Ride</p></td>
<td><p><a class="reference external" href="mailto:example&#37;&#52;&#48;example&#46;org">example<span>&#64;</span>example<span>&#46;</span>org</a></p></td>
<td><p>Training Specialists Institution</p></td>
<td><p>Trainer</p></td>
</tr>
<tr class="row-even"><td><p>Rodolfo Vela</p></td>
<td><p><a class="reference external" href="mailto:example&#37;&#52;&#48;example&#46;org">example<span>&#64;</span>example<span>&#46;</span>org</a></p></td>
<td><p>Institute for Collecting Data</p></td>
<td><p>Sample interpretation</p></td>
</tr>
<tr class="row-odd"><td><p>Yuri Gagarin</p></td>
<td><p><a class="reference external" href="mailto:example&#37;&#52;&#48;example&#46;org">example<span>&#64;</span>example<span>&#46;</span>org</a></p></td>
<td><p>Institute for Collecting Data</p></td>
<td><p>Sample interpretation</p></td>
</tr>
</tbody>
</table>
<p>Based on this information, you will decide on the format and modality for the data collection and on a timeline. For example, the format of the data collection can be a mapathon set-up where a large group collects the data over a short amount of time or a smaller team that collects the data over long periods. The modality for the data collection concerns where the team collects the data, either in the same location or disparate locations e.g. in a mapathon, the interpreters could be in the same room interpreting the data. If the data collection is set up in disparate locations, modes of communication should be specified to help improve the consistency in the data interpretation. Multiple re-measurements for all samples is another option.</p>
<p>The logistics manager (if different from the coordinator) will arrange logistics, including space for data collection, sufficient time for data collection, and salary arrangements.</p>
<p>With your fictional team (above) and your timeline laid out in the scenario, decide on the format and modality for the data collection and on a timeline.</p>
<ul class="simple">
<li><p>What other modalities of data collection can you think of?</p></li>
<li><p>What are the pros and cons of these modalities?</p></li>
</ul>
</div>
<div class="section" id="organize-training-and-calibration-sessions">
<h5>Organize training and calibration sessions<a class="headerlink" href="#organize-training-and-calibration-sessions" title="Permalink to this headline">¶</a></h5>
<p>As a first step in the data collection, the coordinator and the trainer organize and prepare a training event for the interpreters who have confirmed their participation. The training should cover the following topics as a minimum:</p>
<ul class="simple">
<li><p>the response design and the interpretation key (detailing location specific examples from all the classes in the classification system with visualization from multiple data sources available),</p></li>
<li><p>The software used for the data collection and how to ensure the data management and storage,</p></li>
<li><p>The data sources available, and</p></li>
<li><p>Quality management practices.</p></li>
</ul>
<p>Knowing what you do now, consider list items above and briefly fill in details for each topic in another document. Write this as if you were planning a training event before collecting verification data for your forest/non-forest classification. What other topics do you think should be in the training?</p>
<p>The trainer should then implement the training event following these basic principles:</p>
<ul class="simple">
<li><p>Create an environment for active participation, where participants can share questions and opinions</p></li>
<li><p>encourage communication between the interpreters</p></li>
<li><p>record attendance of the interpreters, and</p></li>
<li><p>assess the capacity of the interpreters at the end of the training and record the results.</p></li>
<li><p>Thinking about the basic principles for a training (a-d above) briefly write out how you might achieve these goals.</p></li>
</ul>
<p>Following the training, the coordinator and the trainer should prepare a report summarizing:</p>
<ul class="simple">
<li><p>The training actions taken,</p></li>
<li><p>The attendance (example below), and</p></li>
<li><p>The results of the assessment of capacity.</p></li>
</ul>
<p>This information should be documented as part of the decision making process for the verification (see <a class="reference internal" href="#module-5">module 5</a>).</p>
<table class="table">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Day 1</p></th>
<th class="head"><p>Day N</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Interpreter 1</p></td>
<td><p>present</p></td>
<td><p>present</p></td>
</tr>
<tr class="row-odd"><td><p>Interpreter x</p></td>
<td><p>present</p></td>
<td><p>present</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="distribute-and-assign-sample-units-to-interpreters">
<h5>Distribute and assign sample units to interpreters<a class="headerlink" href="#distribute-and-assign-sample-units-to-interpreters" title="Permalink to this headline">¶</a></h5>
<p>As coordinator, you will decide on a fraction of sample units to be assessed multiple times by all interpreters for cross-checking. Using approximately 2.5% of plots for cross checks is a good starting point. The samples that are duplicated should have a unique identification, and/or be recorded in some way.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that we’ll discuss this aspect of quality management in Part 4, so don’t worry about that at this time.</p>
</div>
<p>The coordinator should then allocate sample units to interpreters based on some system. Allocation modalities are the modalities by which sample units are allocated to each interpreter e.g. randomly, following experience in a specific area.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>answer the following questions : What method might you prefer be used to allocate samples? Why?</p>
</div>
<p>The coordinator should use a standardized naming structure to distribute the samples to the interpreters. The coordinator should record the number of sample units, the interpreter assigned to assess those samples and the file location in a table like the one below. The naming structure can include metadata such as the date the samples are distributed, the name of the interpreter and the purpose of the data collection. Try preparing a document to distribute the sample units among interpreters like the table below:</p>
<table class="table">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Number of sample units</p></th>
<th class="head"><p>Interpreter name</p></th>
<th class="head"><p>File name</p></th>
<th class="head"><p>File archive location</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>X sample units</p></td>
<td><p>Interpreter 1</p></td>
<td><p>e.g. collection_data_date n[year/month/day] n_version_number.csv</p></td>
<td><p>Link to cloud storage or folder path to repository</p></td>
</tr>
</tbody>
</table>
<p>In CEO, multiple interpreters can work on the same project at the same time. This makes it very easy to collect data collaboratively. When you later download the data, each interpreter’s email address will be attached to the point they collected. If you use CEO-SEPAL, you cannot collect this information at the time of writing.</p>
</div>
</div>
<div class="section" id="collecting-data">
<span id="section-4-2-3"></span><h4>Collecting data<a class="headerlink" href="#collecting-data" title="Permalink to this headline">¶</a></h4>
<p>After training and sample allocation, it is time to collect data. This can occur in the CEO-SEPAL interface (for smaller projects) or via CEO for larger or multi-user projects. Here, we will demonstrate collecting data in CEO to ensure compliance with SOP and oversight requiring interpreter names be collected for the points they collect, however the directions are largely the same for the CEO-SEPAL bridge.  How to set up a CEO project is discussed in Exercise 4.1 Part 2. How to set up a CEO-SEPAL project is discussed at the end of <a class="reference internal" href="#section-4-1-1">section 4.1.1</a>.</p>
<div class="section" id="data-collection-by-interpreters">
<h5>Data collection by interpreters<a class="headerlink" href="#data-collection-by-interpreters" title="Permalink to this headline">¶</a></h5>
<p>In general, data collection should include the following steps:</p>
<ol class="arabic simple">
<li><p>When interpreting the samples, use an interpretation key as a guide for assessing different land use classes and transitions. When possible, consult other interpreters and the coordinator if there are any doubts about the image interpretation.</p></li>
<li><p>The coordinator collects the data from all interpreters at defined intervals (intervals can be defined by number of samples or by time intervals) to perform quality assurance procedures, including auxiliary data checks, cold checks and hot checks, as defined in the quality assurance section.</p></li>
<li><p>During the data collection, the coordinator organizes regular discussions and group assessment of samples with all the interpreters to ensure a mutual understanding of the interpretation techniques.</p></li>
<li><p>Take notes of challenges and limitations during the data collection as well as potential sources of bias during the data collection. If working as part of a team of collectors pass this information along to the coordinator.</p></li>
</ol>
</div>
<div class="section" id="data-collection-in-ceo">
<h5>Data collection in CEO<a class="headerlink" href="#data-collection-in-ceo" title="Permalink to this headline">¶</a></h5>
<p>To collect data in CEO, navigate to the project you created in <a class="reference internal" href="#section-4-1-2">section 4.1.2</a>. Your screen should look like this:</p>
<div class="figure align-center">
<img alt="The data collection interface in CEO" src="../_images/data_collection_CEO.png" />
</div>
<p>Click <strong>Go to first plot.</strong> This will take you to your first plot. Answer all of the questions for your first plot by clicking on the appropriate answers. If you created multiple questions, you can navigate between questions using the numbers above your question text. Click on <code class="code docutils literal notranslate"><span class="pre">Save</span></code> to save your answers and move on to the next plot.</p>
<div class="figure align-center">
<img alt="The data collection process in CEO" src="../_images/data_collection_process.png" />
</div>
<p>Continue answering questions until you reach the last plot. When you have finished answering all of the questions, navigate to your Institution’s page.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your project name should now be green, indicating that all plots have been completed. If it is yellow, click on the project name and answer the remaining questions.</p>
</div>
<div class="figure align-center">
<img alt="A partly completed project." src="../_images/ceo_sepal_manual.png" />
</div>
<p>Click on the <code class="code docutils literal notranslate"><span class="pre">S</span></code> next to the project. This will download your project’s sample data. Save it to your hard drive.</p>
</div>
<div class="section" id="data-collection-in-ceo-sepal-bridge">
<h5>Data collection in CEO-SEPAL bridge<a class="headerlink" href="#data-collection-in-ceo-sepal-bridge" title="Permalink to this headline">¶</a></h5>
<p>For this example, navigate to the web address associated with your CEO-SEPAL bridge project. It should look something like this: <a class="reference external" href="https://collect.earth/collection?projectId=18301&amp;tokenKey=b1216bbb-9395-41f8-bc02-f898c98465bf">https://collect.earth/collection?projectId=18301&amp;tokenKey=b1216bbb-9395-41f8-bc02-f898c98465bf</a>. You must be logged out of CEO for this link to work.</p>
<p>Click <code class="code docutils literal notranslate"><span class="pre">Go</span> <span class="pre">to</span> <span class="pre">first</span> <span class="pre">plot</span></code>. This will take you to your first plot. With the CEO-SEPAL bridge, there is only one question. It is “CLASS”, where you must assign the appropriate value to your point. The CEO-SEPAL bridge uses the names you typed in during the legend labeling stage of the Sample Design.</p>
<p>Click on <code class="code docutils literal notranslate"><span class="pre">Save</span></code> to save your answers and move on to the next plot.</p>
<p>Continue answering questions until you reach the last plot.</p>
</div>
<div class="section" id="data-assembly">
<h5>Data assembly<a class="headerlink" href="#data-assembly" title="Permalink to this headline">¶</a></h5>
<p>Data assembly is required ONLY when you have multiple data interpreters, each working on their own project. If you have used the CEO pathway above with multiple interpreters contributing to the same project, this step is not needed.</p>
<p>If you have multiple interpreters, after the data collection is completed the coordinator should create a consolidated database with all the collected sample data.</p>
<ul class="simple">
<li><p>The coordinator should check that all necessary metadata and sample information is archived and included in the final database.</p></li>
<li><p>A description of the column names from the database should be archived with the database.</p></li>
<li><p>A standardized naming structure is used for the compiled database and includes metadata in the folder and file name.</p></li>
</ul>
<p>Each sample in the consolidated database notes the round of data collection. The database can be amended to include additional rounds of data collection. Multiple versions are recorded and explanations between versions are included in the documentation template.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In CEO, this is handled through the Institution’s Project interface.</p>
</div>
</div>
</div>
<div class="section" id="quality-management-and-archiving-quality-assurance">
<span id="section-4-2-4"></span><h4>Quality management and archiving - Quality Assurance<a class="headerlink" href="#quality-management-and-archiving-quality-assurance" title="Permalink to this headline">¶</a></h4>
<p>Quality assurance and control are fundamental in ensuring that your validation and resulting area estimates are as accurate as can be and are unbiased. This part will cover the steps of how to perform quality assurance.</p>
<p>For change detection maps, you will want to check for and exclude impossible transitions through logical checks. Make sure that the changes make sense. E.x. having a transition from Water &lt;= 20% to Aquaculture may make sense, but a transition from Water &lt;= 20% to Developed High Intensity would not.</p>
<p>Also be sure to document all impossible transitions. These should be included in your response design tree as well.</p>
<p>Conduct ongoing hot, cold and auxiliary data checks during data collection and conduct regular review meetings among all interpreters. We’ll go through each of these now.</p>
<ul>
<li><p><strong>Auxiliary data checks</strong>: use an external data source, such as externally created maps, to compare to the sample unit classification. Discrepancies between the two dataset can be flagged for rechecking. Confirmed differences between the two dataset can be documented to showcase why sample-based area estimation may give different results than other data sources.</p>
<p>For example, the Copernicus Global Land Cover Layers: CGLS-LC100 collection 2, available via GEE, can be used as a comparison layer <a class="reference external" href="https://developers.google.com/earth-engine/dataset/catalog/COPERNICUS_Landcover_100m_Proba-V_Global">https://developers.google.com/earth-engine/dataset/catalog/COPERNICUS_Landcover_100m_Proba-V_Global</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Ask questions when comparing your map and auxiliary maps:</p>
<ul class="simple">
<li><p>Where do you notice agreement between the two maps?</p></li>
<li><p>Where do you notice disagreement between the two maps?</p></li>
<li><p>What are some reasons you could attribute to the discrepancies between them?</p></li>
</ul>
</div>
</li>
<li><p><strong>Cold checks</strong>: sample units that are randomly selected from the data produced by interpreters. The decisions made by the interpreters are reviewed by the coordinator or group of interpreters meeting together. If the error by the interpreter reflects a systematic error in their interpretation, it is discussed directly with the interpreter and the affected sample units are corrected.</p>
<p>Review the table below that was a result of a cold check you conducted on the plots analyzed by the interpreters.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Based on some of these answers:</p>
<ul class="simple">
<li><p>what can you conclude about the data?</p></li>
<li><p>What plots should likely be reviewed?</p></li>
<li><p>What other information could you gain from examining how the interpreters are performing?</p></li>
</ul>
</div>
<p><strong>Cold checks</strong> can be created in CEO by creating multiple projects with the same sample plots. Multiple interpreters can each complete one of these projects, allowing for comparison.</p>
<table class="table">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Interpreter</p></th>
<th class="head"><p>Plot 1 (Forest)</p></th>
<th class="head"><p>Plot 2 (Forest)</p></th>
<th class="head"><p>Plot 3 (Water)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sally Ride</p></td>
<td><p>Non Forest Vegetation</p></td>
<td><p>Non Forest Vegetation</p></td>
<td><p>Water</p></td>
</tr>
<tr class="row-odd"><td><p>Rodolfo Vela</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Build up</p></td>
</tr>
<tr class="row-even"><td><p>Yuri Gagarin</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Water</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><strong>Hot checks</strong>: sample units that are flagged as low confidence. These marked sample units should be further reviewed by the coordinator or group of interpreters meeting together. Once reviewed, labels that are deemed to be incorrect on these sample units should be adjusted by the interpreter.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul class="simple">
<li><p>If you’re conducting this training with others, ask your colleagues about sample units that you’re unsure about.</p></li>
<li><p>Have your colleagues show you sample units that they are unsure about.</p></li>
<li><p>Discuss these sample units and make changes to the labels based on your discussion.</p></li>
</ul>
</div>
</li>
</ul>
<p>You must create a project using CEO to add additional questions about confidence level. If you create a project via the ceo-sepal interface, you will have only one question about land use/cover class.</p>
</div>
<div class="section" id="quality-management-and-archiving-quality-control">
<span id="section-4-2-5"></span><h4>Quality management and archiving - Quality Control<a class="headerlink" href="#quality-management-and-archiving-quality-control" title="Permalink to this headline">¶</a></h4>
<p>Quality control refers to the quality of interpretation through cross-validation based on a set of samples that were assessed by two or more interpreters. See also the cold data check mentioned above. These checks can be conducted in CEO by creating multiple projects with the same sample plots. Multiple interpreters can each complete one of these projects, allowing for comparison.</p>
<p>Establish a reference interpretation for each of the cross-validation sample units.</p>
<p>Choose a reference interpretation–this should be one of the interpreter’s class assignments. This reference interpretation will be the basis for establishing the performance of individual interpreters.</p>
<p>Calculate agreement for each interpreter based on the reference interpretation. For each pair of interpreters, create a confusion matrix and include it in your project documentation.</p>
<table class="table">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>class 1 (ref)</p></th>
<th class="head"><p>class 2 (ref)</p></th>
<th class="head"><p>class k (ref)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Class 1 (interpreter)</p></td>
<td><p>Counts of sample points</p></td>
<td><p>Counts of sample points</p></td>
<td><p>Counts of sample points</p></td>
</tr>
<tr class="row-odd"><td><p>Class 2 (interpreter)</p></td>
<td><p>Counts of sample points</p></td>
<td><p>Counts of sample points</p></td>
<td><p>Counts of sample points</p></td>
</tr>
<tr class="row-even"><td><p>Class k (interpreter)</p></td>
<td><p>Counts of sample points</p></td>
<td><p>Counts of sample points</p></td>
<td><p>Counts of sample points</p></td>
</tr>
</tbody>
</table>
<p>To work an example, pretend that you and another interpreter have both collected data on a set of sample units on this Amazon land cover classification. Here are the results:</p>
<table class="table">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Point number</p></th>
<th class="head"><p>Interpreter 1</p></th>
<th class="head"><p>Reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Forest</p></td>
<td><p>Non-forest</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Non-forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Non-forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
</tr>
</tbody>
</table>
<p>Calculate the confusion matrix below:</p>
<table class="table">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>Forest (ref)</p></th>
<th class="head"><p>Non-forest (ref)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Forest (Interpreter)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Non-Forest (Interpreter)</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Based on the confusion matrices, for each interpreter, overall agreement with the reference is to be calculated as follows:</p>
<blockquote>
<div><p>Agreement between interpreter and the majority = Sum of counts in all the diagonal cells / Sum of all counts</p>
</div></blockquote>
<p>The overall agreement per interpreter can be reported as below:</p>
<table class="table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Interpreter</p></th>
<th class="head"><p>Overall agreement</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Interpreter 1</p></td>
<td><p>Sum of counts in all of the diagonal cells/ Sum of all counts</p></td>
</tr>
<tr class="row-odd"><td><p>Interpreter 2</p></td>
<td><p>Sum of counts in all of the diagonal cells/ Sum of all counts</p></td>
</tr>
<tr class="row-even"><td><p>Interpreter N</p></td>
<td><p>Sum of counts in all of the diagonal cells/ Sum of all counts</p></td>
</tr>
</tbody>
</table>
<p>Using the table below, calculate the agreement between interpreters:</p>
<table class="table">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>Class 1 (majority)</p></th>
<th class="head"><p>Class 2 (majority)</p></th>
<th class="head"><p>Class 3 (majority)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Class 1 (Sally Ride)</p></td>
<td><p>90</p></td>
<td><p>8</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>Class 2 (Sally Ride)</p></td>
<td><p>6</p></td>
<td><p>84</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>Class 3 (Sally Ride)</p></td>
<td><p>2</p></td>
<td><p>6</p></td>
<td><p>92</p></td>
</tr>
<tr class="row-odd"><td><p>Class 1 (Rodolfo Vela)</p></td>
<td><p>89</p></td>
<td><p>9</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>Class 2 (Rodolfo Vela)</p></td>
<td><p>12</p></td>
<td><p>88</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Class 3 (Rodolfo Vela)</p></td>
<td><p>3</p></td>
<td><p>0</p></td>
<td><p>97</p></td>
</tr>
<tr class="row-even"><td><p>Class 1 (Yuri Gagarin)</p></td>
<td><p>94</p></td>
<td><p>6</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Class 2 (Yuri Gagarin)</p></td>
<td><p>7</p></td>
<td><p>86</p></td>
<td><p>7</p></td>
</tr>
<tr class="row-even"><td><p>Class 3 (Yuri Gagarin)</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>95</p></td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Interpreter</p></th>
<th class="head"><p>Overall agreement</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sally Ride</p></td>
<td><p>Sum of counts in all of the diagonal cells/ Sum of all counts</p></td>
</tr>
<tr class="row-odd"><td><p>Rodolfo Vela</p></td>
<td><p>Sum of counts in all of the diagonal cells/ Sum of all counts</p></td>
</tr>
<tr class="row-even"><td><p>Yuri Gagarin</p></td>
<td><p>Sum of counts in all of the diagonal cells/ Sum of all counts</p></td>
</tr>
</tbody>
</table>
<p>Per-class agreement among interpreters should be analyzed and reported as follows:</p>
<dl>
<dt>..csv-table</dt><dd><dl class="field-list simple">
<dt class="field-odd">header</dt>
<dd class="field-odd"><p>, All interpreters agreeing, One interpreter disagreeing, Two interpreters disagreeing, etc.</p>
</dd>
</dl>
<p>Class 1 (reference), Percent, Percent, Percent, Percent
Class 2 (reference), Percent, Percent, Percent, Percent
Class 3 (reference), Percent, Percent, Percent, Percent
Total, Percent, Percent, Percent, Percent</p>
</dd>
</dl>
<p>For this example, consider the following case:</p>
<table class="table">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Point number</p></th>
<th class="head"><p>Interpreter 1</p></th>
<th class="head"><p>Interpreter 2</p></th>
<th class="head"><p>Interpreter 3</p></th>
<th class="head"><p>Reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Non-forest</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Non-forest</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Non-forest</p></td>
<td><p>Forest</p></td>
<td><p>Non-forest</p></td>
<td><p>Forest</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
<td><p>Forest</p></td>
</tr>
</tbody>
</table>
<p>Now calculate the per-class agreement. Note that percent should be calculated by #/10 points for this example.</p>
<table class="table">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>All interpreters agreeing</p></th>
<th class="head"><p>One interpreter disagreeing</p></th>
<th class="head"><p>Two interpreters disagreeing</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Forest (reference)</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
</tr>
<tr class="row-odd"><td><p>Non-forest (reference)</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
</tr>
<tr class="row-even"><td><p>Total</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
<td><p>Percent</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="area-and-uncertainty-estimation">
<span id="section-4-3"></span><h3>Area and uncertainty estimation<a class="headerlink" href="#area-and-uncertainty-estimation" title="Permalink to this headline">¶</a></h3>
<p>The final step of calculating the sample-based estimates of error and area is taking the map areas (generated in <a class="reference internal" href="#section-4-1">section 4.1</a>), and your verification data points from our data collection (<a class="reference internal" href="#section-4-2">section 4.2</a>), conducted according to the response design rules (<a class="reference internal" href="#section-4-1">section 4.1</a>) and using statistics to output the final estimates of area and uncertainty.</p>
<p>In <a class="reference internal" href="#section-4-3-1">section 4.3.1</a>, we provide an optional description of error matrices, also called confusion matrices. This provides the underlying theory for using the SEPAL “Stratified estimator–Analysis” tool to conduct the area and uncertainty estimation. This tool quantifies the agreement between the validation reference points and the map product, providing information on how well the class locations were predicted.
Please note that you will need to upload your collected data from CEO to Sepal using the directions found in <a class="reference internal" href="#section-4-1-1">section 4.1.1</a>. If you used the CEO-SEPAL bridge, you must log out of CEO for the “Import CEO Project” link to work.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>objectives</strong>:</p>
<ul class="simple">
<li><p>create area estimate for your classification</p></li>
<li><p>create uncertainty/error estimate for your classification</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Prerequisites</strong>:</p>
<ul class="simple">
<li><p>Completed verification data, or reference data (<a class="reference internal" href="#section-4-2">section 4.2</a>)</p></li>
<li><p>Map areas generated by your sampling design (<a class="reference internal" href="#section-4-1">section 4.1</a>)</p></li>
</ul>
</div>
<div class="section" id="understanding-the-error-matrix">
<span id="section-4-3-1"></span><h4>Understanding the error matrix<a class="headerlink" href="#understanding-the-error-matrix" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step is fully optional</p>
</div>
<p>A common tool to quantify agreement is the error matrix (sometimes called a confusion matrix). The error matrix organizes the acquired sample data in a way that summarizes key results and aids the quantification of accuracy and area. This is a simple cross-tabulation that compares the (algorithm assigned) map category labels to the (human assigned) reference category labels (your validation classification). The count for each pairwise combination are included in the blue and yellow cells in the following example.</p>
<div class="figure align-center">
<img alt="A confusion matrix example." src="../_images/confusion_matrix_example.png" />
</div>
<ul class="simple">
<li><p>The main diagonal of the error matrix (blue cells) includes the count of the number of correct classifications.</p></li>
<li><p>The off-diagonal elements (yellow cells) show map classification errors.</p></li>
<li><p>The user’s accuracy can be quantified by dividing the number of correctly classified plots by the sum of the plots classified as the mapped class. For the forest class in the example above, this is 17 correctly identified points divided by 19 total forest plots. User’s accuracies for each class are shown in the orange cells. User’s accuracy is the complement of errors of commission (sites that are classified as forest in the map, but are not actually forest).</p></li>
<li><p>The producer’s accuracy can be quantified by dividing the number of correctly classified plots by the sum of the plots classified as the mapped class in the validation reference sample. For the forest class in the example above, this is 17 correctly identified points divided by 20 samples that were classified as forest from the reference data. Producer’s accuracies for each class are shown in the pink cells. Producer’s accuracy is the complement of errors of omission (sites that are not classified as forest in the map that are actually forest).</p></li>
</ul>
<p>For your own data, calculate an error matrix following the above guidelines:</p>
<div class="figure align-center">
<img alt="An example error matrix." src="../_images/example_error_matrix.png" />
</div>
<p>Here’s a completed example for a project using 4 classes:</p>
<div class="figure align-center">
<img alt="Example error matrix for a 4 class project." src="../_images/example_error_matrix_4class.png" />
</div>
<p>In this example, the user’s accuracy for Forest is 94.7%; so the error of commission is 5.3%. The user’s accuracy for water is 90%, which means the error of commission is 10%. What this means is that according to the reference data, the map creator mapped 5.3% of Forest land cover in the wrong class and 10% of water in the wrong class. The producer’s accuracy for Forest is 75%, meaning the error of omission is 25%. The producer’s accuracy for water is 90%, so the error of omission is 10%. This means that 25% of the forest reference samples were mapped in the wrong land cover class, while only 10% of water was mapped in the wrong class. Calculate the errors of omission and commission for Other and Cloud land cover classes.</p>
<p>Once the error matrix is created, the area estimation becomes straightforward. Essentially, we use the frequency of these errors of omission and commission for each map class to calculate updated map areas based on our knowledge of how likely each class is to be classified as something else. We can also calculate the uncertainties for the total area of each class.</p>
<p>At the heart of the analysis is the implementation of an unbiased area estimator. Different estimators can be implemented to assess accuracy. In the next part, you will use a stratified estimation since you have a sample stratified by the discrete map classes.</p>
</div>
<div class="section" id="preparing-your-ceo-collected-data-for-analysis-in-sepal">
<span id="section-4-3-2"></span><h4>Preparing your CEO collected data for analysis in SEPAL<a class="headerlink" href="#preparing-your-ceo-collected-data-for-analysis-in-sepal" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step is fully optional</p>
</div>
<p>Open the .csv file you downloaded from Collect Earth Online in <a class="reference internal" href="#section-4-2-3">section 4.2.3</a>. It will probably have a name like “ceo-project-name-sample-data-yyyy-mm-dd.csv”. Inspect the column data.</p>
<p>You should have:</p>
<ul class="simple">
<li><p>A column named “PL_MAP_CLASS” that consists of numeric values. These are the classes assigned by the classification.</p></li>
<li><p>A column with your question about the correct map class as the column header. In this example, it is “IS THIS FOREST OR NON-FOREST”.</p></li>
</ul>
<p>These are the classes you assigned manually in CEO based on map imagery. This will either be numeric (1 or 2) or text (Forest and Non-forest) depending on how you set up your Collect Earth Online project.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your column for the correct map class is numeric, you can directly save your .csv file and upload it to SEPAL.</p>
</div>
<p>If your column for the correct map class is text, you will need to either:</p>
<ul>
<li><p>Check that your text column matches exactly the Legend Labels you added during sample design (Exercise 4.1).</p></li>
<li><p>Check that capitalization is the same, e.g. Non-forest and Non-forest not Non-forest and non-forest.</p></li>
<li><p>OR Create another column with the associated numeric value. In this very case:</p>
<ul>
<li><p>First, create a new column and name it COLLECTED_CLASS.</p></li>
<li><p>In the formula cell, type: =IF([text column letter]2=”Forest”,1,2). For this example, the text column letter is U.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will use an if statement to assign the number 1 to sample plots you assigned the value “Forest” to, and the number 2 to other plots (here, plots labeled Non-forest). If you have more than two classes, you will need to use nested IF statements.</p>
</div>
</li>
<li><p>Press enter. You should now see either a 1 or a 2 populate the column. Double check that it is the correct value.</p></li>
<li><p>Fill the entire column.</p></li>
</ul>
</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/example_dataset.png"><img alt="An example dataset" src="../_images/example_dataset.png" style="width: 400px;" /></a>
</div>
<p>Finally Save your .csv file and upload it to SEPAL.</p>
</div>
<div class="section" id="using-the-stratified-estimator-in-sepal">
<span id="section-4-3-3"></span><h4>Using the stratified estimator in SEPAL<a class="headerlink" href="#using-the-stratified-estimator-in-sepal" title="Permalink to this headline">¶</a></h4>
<p>The aim of this stratified sampling design tool is to analyze results from a stratified sampling design that can be used for area estimates. The idea is to combine a map (used as a stratification of the landscape of interest) with a visual map interpretation of samples to produce an area estimation.</p>
<p>The concept is derived from map accuracy assessment principles: characterized frequency of errors (omission and commission) for each map class may be used to compute area estimates and also to estimate the uncertainties (confidence intervals) for the areas for each class.</p>
<p>First, open the Stratified Area Estimator-Analysis Tool. In the Apps SEPAL window select Stratified Area Estimator - Analysis. This tool is very similar to the Design tool that you used to create your stratified sample.</p>
<p>You will land on the <strong>Introduction</strong> page which allows you to choose your language and provides background information on the tool. Note that Reference and Documents are in the same place as the Design tool. The pages that contain the necessary steps for the workflow are on the left side of the screen and need to be completed sequentially.</p>
<div class="figure align-center">
<img alt="The stratified estimator analysis tool." src="../_images/stratified_estimator_analysis_tool.png" />
</div>
<p>Select the <strong>Inputs</strong> page on the left side of the screen. You will see two data requirements under the <strong>Select input files</strong> section.</p>
<ul class="simple">
<li><p><strong>Reference Data</strong>:  this refers to the table that you classified and exported in the previous section. It will contain a column that identifies the map output class for each point as well as a column for the value from the image interpreter (validation classification).</p>
<ul>
<li><p>For projects completed in CEO: Select the <strong>Reference data</strong> button and navigate to the .csv file you downloaded from CEO and then uploaded to SEPAL in <a class="reference internal" href="#section-4-3-2">section 4.3.2</a>.</p></li>
<li><p>For projects completed in CEO-SEPAL bridge:
-   Check that you are logged out of the Collect Earth Online website.
-   Paste the URL from your CEO-SEPAL bridge project into the field marked <strong>CEO url</strong>. You can also click the <strong>Paste CEO url from clipboard</strong> button.
-   Click <code class="code docutils literal notranslate"><span class="pre">Import</span> <span class="pre">CEO</span> <span class="pre">project</span></code>. This will populate the input file for the Reference data as well as the column names.</p></li>
</ul>
</li>
<li><p><strong>Area data</strong>:  this is a CSV that was automatically created during the Stratified Area Estimator–Design workflow. It contains area values for each mapped land cover class.</p>
<ul>
<li><p>Click the <strong>Area data</strong> button.</p></li>
<li><p>Open the <strong>sae_design_AmazonClassification</strong> folder, or the folder labeled <code class="code docutils literal notranslate"><span class="pre">sae_design_your-name-here</span></code> if you did not call your classification <strong>AmazonClassification</strong>. As a reminder, if you exported your classification to the SEPAL workspace, the file will be in your SEPAL downloads folder. (downloads &gt; classification folder &gt; sae_design_AmazonClassification). Within this folder, select <strong>area_rast.csv</strong> (see image below).</p></li>
</ul>
</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/add_classification.png"><img alt="Adding the classification" src="../_images/add_classification.png" style="width: 450px;" /></a>
</div>
<p>Next, you will need to adjust some parameters so that the tool recognizes the column names for your reference data and area data that contain the necessary information for your accuracy assessment. You should now see a populated <strong>Required input</strong> panel on the right side of the screen.</p>
<p>Choose the column with the reference data information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For projects completed in CEO: This will either be your question name or the new column name you created in Part 2 above. Here it is COLLECTED_CLASS following the directions in <a class="reference internal" href="#section-4-3-2">section 4.3.2</a>.</p></li>
<li><p>For projects completed in CEO-SEPAL: ref_code</p></li>
</ul>
</div>
<p>Choose the column with the map data information</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For projects completed in CEO: PL_MAP_CLASS</p></li>
<li><p>For projects completed in CEO-SEPAL: map_code</p></li>
</ul>
</div>
<p>Choose the map area column from the area file—map_area
Choose the class column from the area file—map_code or map_edited_class. The map_edited_class has the names you entered manually during the design phase, while the map_code has the numeric class codes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For projects completed in CEO: Use map_code if you have a column in your reference data. If you use map_edited_class you must make sure that capitalization.</p></li>
<li><p>For projects completed in CEO-SEPAL, use map_code.</p></li>
</ul>
</div>
<p>You can add a <strong>Display data</strong> column to enable validation on the fly. You can choose any column from your CEO or CEO-SEPAL project. We recommend either your map class (e.g. PL_MAP_CLASS) or your reference data class (e.g. question name column). This example uses a CEO project.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/required_input_fields.png"><img alt="The required input fields." src="../_images/required_input_fields.png" style="width: 450px;" /></a>
</div>
<p>Once you have set these input parameters, select <code class="code docutils literal notranslate"><span class="pre">Check</span></code> on the left side of the window. This page will simply plot your samples on a world map. Fix the locations of your plots by specifying the correct columns to use as the X and Y coordinates in the map. Click the drop down menus and select the appropriate coordinate columns for X and Y coordinates. X coordinate should be LON; Y coordinate should be LAT.</p>
<p>Next, click the <code class="code docutils literal notranslate"><span class="pre">Results</span></code> page on the left side of the screen.</p>
<p>The <strong>Results</strong> page will display a few different accuracy statistics, including a <strong>Confusion Matrix, Area Estimates,</strong> and a <strong>Graph</strong> of area estimates with confidence intervals. The Confusion Matrix enables you to assess the agreement of the map and validation data sets.</p>
<p>The rows represent your assignments while the columns represent the map classifier’s. The diagonal represents the number of samples that are in agreement, while the off diagonal cells represent points that were not mapped correctly (or potentially not interpreted correctly).</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/confusion_matrix_output_sepal.png"><img alt="The confusion matrix output by SEPAL." src="../_images/confusion_matrix_output_sepal.png" style="width: 450px;" /></a>
</div>
<p>Typically you would have to create the confusion table yourself and calculate the accuracies, however, the SAE-Analysis tool does this for you.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>If you completed section <a class="reference internal" href="#section-4-3-1">section 4.3.1</a>, how does the SAE-Analysis tool’s calculations compare with your own?</p></li>
<li><p>You can download confusion matrix as tabular data (.csv) using the button.</p></li>
</ul>
</div>
<p>Under <strong>Area estimates</strong>, the table shows you the area estimates, and producer’s and user’s accuracies, all of which were calculated from the error matrix and the class areas (sample weights) from the map product you are assessing.</p>
<p>Estimations are broken up into simple and stratified estimates, each of which has its own confidence interval. In this exercise we collected validation data using a stratified sample, so the values we need to use are the stratified random values. Note that all area estimates are in map units. You can change your desired <strong>confidence interval</strong> using the slider at the top of the panel. You can Download area estimates as tabular data (.csv) using the button.</p>
<div class="figure align-center">
<img alt="The area estimates screen in SEPAL." src="../_images/area_estimate.png" />
</div>
<p>The <strong>Graph</strong> plots area estimates based on: map pixel count, stratified random sample, simple random sample, unbiased stratified random and direct estimate stratified random.</p>
<p>In this exercise we collected validation data using a stratified sample, so the values we need to use are the stratified random values. Need to define unbiased stratified random and direct estimate stratified random.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the Map pixel count value differs from these stratified random sample estimates. This shows how using a map pixel count is a poor estimation of actual area.</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/area_estimate_graph.png"><img alt="A graph of the area estimates based on different sample design." src="../_images/area_estimate_graph.png" style="width: 450px;" /></a>
</div>
</div>
</div>
</div>
<div class="section" id="documentation-and-archiving">
<span id="module-5"></span><h2>Documentation and archiving<a class="headerlink" href="#documentation-and-archiving" title="Permalink to this headline">¶</a></h2>
<p>Documentation of your area estimate and archiving this information for future reference are critical in order to replicate your estimation process. Examples where you would want to repeat your analysis include different areas (states, provinces, ecological regions) or time periods (months, years).</p>
<p>We have built in documentation steps into other Modules of this Manual, however here we bring this information together. We discuss key documentation steps, including logging decision points (<a class="reference internal" href="#section-5-1">section 5.1</a>), Reporting (<a class="reference internal" href="#section-5-2">section 5.2</a>), Commenting in code (<a class="reference internal" href="#section-5-3">section 5.3</a>), and Version control (<a class="reference internal" href="#section-5-4">section 5.4</a>), as well as archiving steps (<a class="reference internal" href="#section-5-5">section 5.5</a>).</p>
<p>This module should take approximately 1 hour to read. The time taken to complete this module for your specific situation will vary depending on the size and scope of your project.</p>
<div class="section" id="logging-decision-points">
<span id="section-5-1"></span><h3>Logging decision points<a class="headerlink" href="#logging-decision-points" title="Permalink to this headline">¶</a></h3>
<p>Logging decision points is a critical part of documenting your area estimation process and being able to recreate your estimation process.</p>
<p>A decision point is anywhere where you make a decision about your project that can change the outcome. For example, “We decided that pixels with over 75% tree cover should be classified as Forest cover” is a decision point.</p>
<p>In the previous Modules, we have suggested that you document these types of decision points as you go along. This includes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#module-2">module 2</a>:</p>
<ul>
<li><p>Logging your land use decision tree (<a class="reference internal" href="#section-2-1">section 2.1</a>).</p></li>
<li><p>Logging your land use classification definitions (<a class="reference internal" href="#section-2-1">section 2.1</a>).</p></li>
<li><p>Settings used for classification, along with any refinements (<a class="reference internal" href="#section-2-4">section 2.4</a>).</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-3">module 3</a>:</p>
<ul>
<li><p>Logging two date change detection decisions, including what classes can change and imagery and processes used in the classification (<a class="reference internal" href="#section-3-1">section 3.1</a>)</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-4">module 4</a>:</p>
<ul>
<li><p>Stratification choices (<a class="reference internal" href="#section-4-1">section 4.1</a>).</p></li>
<li><p>Data collection procedures (<a class="reference internal" href="#section-4-2">section 4.2</a>).</p></li>
</ul>
</li>
</ul>
<p>You may also choose to follow your organization’s Standard Operating Procedures. For example: <a class="reference external" href="https://drive.google.com/file/d/1u4sXx6Y8qPKvbIYJFide5EI6L_ygpS5p/view?usp=sharing">https://drive.google.com/file/d/1u4sXx6Y8qPKvbIYJFide5EI6L_ygpS5p/view?usp=sharing</a>.</p>
</div>
<div class="section" id="reporting">
<span id="section-5-2"></span><h3>Reporting<a class="headerlink" href="#reporting" title="Permalink to this headline">¶</a></h3>
<p>Writing a report summarizing your findings is a critical part of your area estimation. If you are conducting an area estimation for internal use, this report will provide you with a blueprint for future estimations. If you are conducting an area estimation for another organization, this report will convey your results and the quality of your analysis.</p>
<p>Here we provide a rough outline of what you should include in your reporting.</p>
<p>In your report, you should include:</p>
<ul class="simple">
<li><p>An introduction, describing why the project was completed and any goals of the project.</p></li>
<li><p>Your project’s methods, that is how your project was completed. it should include:</p>
<ul>
<li><p>All tools used in your analysis.</p></li>
<li><p>All decision points (<a class="reference internal" href="#section-5-1">section 5.1</a>)</p></li>
<li><p>Any other information needed to recreate your project.</p></li>
</ul>
</li>
<li><p>Your project results:</p>
<ul>
<li><p>Your area estimation (<a class="reference internal" href="#section-4-3">section 4.3</a>).</p></li>
<li><p>The error associated with your classification (<a class="reference internal" href="#section-4-3">section 4.3</a>).</p></li>
<li><p>A comparison of any self checks (one interpreter) and cross checks (between interpreters) with the main sets of plots.</p></li>
</ul>
</li>
<li><p>Any actions or next steps arising from your analysis.</p></li>
</ul>
<p>Writing your report will take time and attention. Documenting your steps along the way, as discussed in Modules 1-4 and Exercise 5.1 will help you write your report more efficiently.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p><strong>Always follow your organization’s reporting guidelines</strong>. For example, if your estimation is developed to support a National Forest Monitoring System, you will need to comply with UN reporting standards.</p>
</div>
<p>As another example, FAO’s Standard Operating Procedure requires reports include at least the following information about the data collection process:</p>
<ul class="simple">
<li><p>A brief narrative on the modalities for data collection</p></li>
<li><p>The interpreters, their contact information, institutions and roles</p></li>
<li><p>Overview of sample unit allocation to interpreters and any subsequent revisions made to the allocation</p></li>
<li><p>A summary of the training conducted that details the topics covered</p></li>
<li><p>A list of attendees for the training and their attendance record</p></li>
<li><p>Challenges and limitations during the data collection</p></li>
<li><p>Potential sources of bias during the data collection</p></li>
<li><p>Impossible transitions excluded from data collection</p></li>
<li><p>The results of the assessment of interpretation quality</p></li>
<li><p>External appraisal of interpretation quality contact information and narrative report from the appraiser</p></li>
</ul>
</div>
<div class="section" id="commenting-in-scripts">
<span id="section-5-3"></span><h3>Commenting in Scripts<a class="headerlink" href="#commenting-in-scripts" title="Permalink to this headline">¶</a></h3>
<p>While none of the steps involved in this manual require writing code, more complex classification projects may use programming environments such as Google Earth Engine. This Exercise discusses best practices for commenting your code if you use tools such as Google Earth Engine.</p>
<p>Leaving comments in your code can be a helpful way to describe information of what a particular function does, leave warnings or considerations to other programmers (including your future self!), provide key information on licensing, or save information on what you still want to complete while coding. In this section we will briefly demonstrate both good and bad commenting techniques.</p>
<p>When commenting your code you should take into account your target audience. Is your code going to be used for a workshop? Will it be read by other scientists or programmers? Or will you lose access to it after submitting it to a publication or project partner? Answering these questions will help you determine what approach to take when commenting your code.</p>
<p>Many of these tips are derived from the suggestions laid out in Robert C. Martins’ book <em>Clean Code</em>, which would be a good reference if you would like to learn more about coding cleanly and commenting:</p>
<ul class="simple">
<li><p><strong>Keep comments short</strong>. Keeping your comments short is helpful to both the writer of the comment and the reader. Having multiple long comments in your code can lead to readers skipping over them and thus making them inefficient. Long comments can start to clutter your code.</p></li>
<li><p>It is best to use comments <strong>sparingly</strong> and when possible <strong>rename variables</strong> or use functions to reflect what you would like to have commented. Comments can quickly become outdated and are less of a priority to update. Comments are a representation of what your code does, but can sometimes be misleading.</p></li>
<li><p>Using comments to add some informative content or explain the intent behind your code, but <strong>don’t be redundant</strong>. Informative comments are little snippets of information that aid in reading through your code. A comment explaining your intent can be useful where the processing you have done is slightly complicated to read through.</p></li>
<li><p><strong>Don’t leave in commented out code</strong>. Leaving in commented out code quickly becomes confusing. Is the commented out code something new that is to be implemented? Is it something that was broken and the other code fixed? Should it be uncommented to provide a different result? It is best to use a form of version control so you can safely delete these lines and go back to them if you need to later.</p></li>
<li><p>Try to <strong>not be redundant</strong> with comments. Comments that simply reiterate what the code is doing often are not helpful and will add to clutter. Use comments to clarify what the code is doing. This is nice for when you are using code in a workshop, or perhaps in a final version which is released with a publication that will not be changed later.</p></li>
<li><p>Do be careful as just like with other comments, errors in them are just as bad as in your code!</p></li>
</ul>
<p>Here are three examples of comment types:</p>
<p>Comments that clarify:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">////////////////////////////////////////////////////////</span>
<span class="c1">// User defined variables                            ///</span>
<span class="c1">////////////////////////////////////////////////////////</span>

<span class="c1">// Main variables for defining region of interest,</span>
<span class="c1">// start and end period, and sensors to include</span>

<span class="c1">// Available sensors are : Landsat, Sentinel2, Sentinel1,</span>
<span class="kd">var</span> <span class="nx">sensor</span> <span class="o">=</span> <span class="s1">&#39;Landsat&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Comments that are informative:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// returns most recent image with time series of images as property</span>
<span class="nx">Return</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">Image</span><span class="p">(</span><span class="nx">latestImagery</span><span class="p">)</span>
</pre></div>
</div>
<p>Comments that describe intent:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// This is the best way I found to add images to the target image as a property</span>
<span class="kd">var</span> <span class="nx">processMetaData</span> <span class="o">=</span> <span class="nx">imageCollection</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="nx">f</span> <span class="p">(</span><span class="nx">img</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">imageDate</span> <span class="o">=</span> <span class="nx">img</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;system:time_start&#39;</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nx">previousImages</span> <span class="o">=</span> <span class="nx">otherImageCollection</span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">imageDate</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="s1">&#39;month&#39;</span><span class="p">)</span> <span class="p">,</span> <span class="nx">imageDate</span><span class="p">).</span><span class="nx">filterBounds</span><span class="p">(</span><span class="nx">img</span><span class="p">.</span><span class="nx">geometry</span><span class="p">().</span><span class="nx">bounds</span><span class="p">())</span>
    <span class="k">return</span> <span class="nx">img</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="nx">previousImages</span><span class="p">.</span><span class="nx">toList</span><span class="p">())</span>
<span class="p">});</span>
</pre></div>
</div>
<p>And here is an example where comments (A) can be replaced by variables (B).</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">/////////////////////////////////////////</span>
<span class="c1">//      example A: using comments      //</span>
<span class="c1">/////////////////////////////////////////</span>

<span class="c1">// Did the user pass in a year range that is within the valid range for</span>
<span class="c1">// the selected satellite?</span>

<span class="k">if</span><span class="p">(</span><span class="nx">dateInputBox</span><span class="p">.</span><span class="nx">getValue</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="nx">sensorDateRangeDict</span><span class="p">[</span><span class="nx">sensorInputBox</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()]){</span>
    <span class="c1">// run analysis for date range</span>
    <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="nx">myAnalysis</span><span class="p">(</span><span class="nx">dateInputBox</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(),</span><span class="nx">sensorInputBox</span><span class="p">.</span><span class="nx">getValue</span><span class="p">())</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">///////////////////////////////////////////////</span>
<span class="c1">//      example B: using variable names      //</span>
<span class="c1">///////////////////////////////////////////////</span>

<span class="kd">var</span> <span class="nx">selectedDateRange</span> <span class="o">=</span> <span class="nx">dateInputBox</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span>
<span class="kd">var</span> <span class="nx">selectedSensor</span> <span class="o">=</span> <span class="nx">sensorInputBox</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span>
<span class="kd">var</span> <span class="nx">selectedSensorDateRange</span> <span class="o">=</span> <span class="nx">sensorDateRangeDict</span><span class="p">[</span><span class="nx">selectedSensor</span><span class="p">]</span>

<span class="k">if</span><span class="p">(</span> <span class="nx">selectedDateRange</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">selectedSensorDateRange</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="nx">myAnalysis</span><span class="p">(</span><span class="nx">selectedDateRange</span><span class="p">,</span> <span class="nx">selectedSensor</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example above you can see that you write roughly the same number of lines of code with and without comments. However, by adding descriptive variable names, the code itself becomes simpler to understand.</p>
<p>Finally, note that reading the actual code will always be truer than reading the comments. In the first example it poses the question: “Did the user pass in a year range that is within the valid range for the selected satellite?“ But what if you choose to include aerial imagery or UAV data sources at some point? Chances are you won’t feel compelled to go back and update your comment.</p>
</div>
<div class="section" id="transparent-coding-github-and-saving-gee-scripts">
<span id="section-5-4"></span><h3>Transparent coding: GitHub and saving GEE scripts<a class="headerlink" href="#transparent-coding-github-and-saving-gee-scripts" title="Permalink to this headline">¶</a></h3>
<p>In addition to commenting your code so that future users can understand what is being done, saving your code is another important part of project documentation. As in <a class="reference internal" href="#section-5-3">section 5.3</a>, this exercise is only relevant if you have implemented code in your area estimation, such as through Python or Google Earth Engine.</p>
<p>In this exercise we will touch upon how to be transparent with your code and save your code. Any time you are writing a script or some code, it is probably a good idea to have a version control system in place so you can track your changes, and have a backup in case a mistake happens to your code. We discuss this in two contexts: Git for local code, and Google Earth Engine’s approach to version control.</p>
<div class="section" id="version-control-and-git">
<h4>Version Control and Git<a class="headerlink" href="#version-control-and-git" title="Permalink to this headline">¶</a></h4>
<p>Version control is “a system that records changes to a file or set of files over time so that you can recall specific versions later” (Git 2020; Online at: <a class="reference external" href="https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control">https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control</a>). Version control can be applied to many different file types, but is most commonly used with text based code, such as Python and R scripts.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following explanation is adapted from the Software Carpentry Git lesson.</p>
</div>
<p>We’ll start by exploring how version control can be used to keep track of what one person did and when.</p>
<p>We’ve all been in this situation before: it seems ridiculous to have multiple nearly-identical versions of the same document. Some word processors let us deal with this a little better, such as Microsoft Word’s Track Changes, Google Docs’ version history, or LibreOffice’s Recording and Displaying Changes.</p>
<p>Version control systems start with a base version of the document and then record changes you make each step of the way. You can think of it as a recording of your progress: you can rewind to start at the base document and play back each change you made, eventually arriving at your more recent version.</p>
<div class="figure align-default">
<img alt="Figure showing how version control systems work" src="../_images/version_control_system.png" />
</div>
<p>Once you think of changes as separate from the document itself, you can then think about “playing back” different sets of changes on the base document, ultimately resulting in different versions of that document. For example, two users can make independent sets of changes on the same document.</p>
<div class="figure align-default">
<img alt="Version control with multiple contributors" src="../_images/version_control_multiple_contributors.png" />
</div>
<p>A version control system is a tool that keeps track of these changes for us, effectively creating different versions of our files. It allows us to decide which changes will be made to the next version (each record of these changes is called a <a class="reference external" href="http://swcarpentry.GitHub.io/git-novice/reference.html#commit">commit</a>, and keeps useful metadata about them. The complete history of commits for a particular project and their metadata make up a <a class="reference external" href="http://swcarpentry.GitHub.io/git-novice/reference.html#repository">repository</a>. Repositories can be kept in sync across different computers, facilitating collaboration among different people.”</p>
<p>Of version control systems, Git (and implementation GitHub that includes a GUI Desktop version) is perhaps the most widely used. Here we provide a very basic overview of Git and links to additional resources.</p>
<p>Git is a popular free and open source software for a distributed version control system and is the basis of GitHub. With a GitHub account, you can create repositories to hold your code and track the changes you make to it as you develop it. GitHub stores all your code, which means that even if something happens to your computer, your code will be saved.</p>
<p>This is also a great way to share or collaborate on code. You can easily send a link to your repository to whomever you want, and you could have other scientists working on one portion of the code on their home computer while you do as well.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>If you would like to learn more about git or version control, you can work through the Software Carpentry workshop at your own pace here: <a class="reference external" href="http://swcarpentry.GitHub.io/git-novice/">http://swcarpentry.GitHub.io/git-novice/</a>.</p>
</div>
<p>You can work through how to set up a git repository system for yourself or your organization (unpaid but must run locally or on your own servers).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Information on Git can be found here: <a class="reference external" href="https://git-scm.com/">https://git-scm.com/</a>.</p></li>
<li><p>Information on GitHub, including how to sign up, can be found here: <a class="reference external" href="https://github.com/">https://github.com/</a> (GitHub has free and paid service tiers).</p></li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>With <a class="reference external" href="https://zenodo.org/">https://zenodo.org/</a> and GitHub together, you can create DOI numbers for versions of your code for publication.</p>
</div>
</div>
<div class="section" id="google-earth-engine-version-control">
<h4>Google Earth Engine version control<a class="headerlink" href="#google-earth-engine-version-control" title="Permalink to this headline">¶</a></h4>
<p>Google Earth Engine has implemented version control and version history for all scripts and repositories written on the platform. To access the version control, click the history icon next to a script in order to compare or revert it to an older version.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/gee_scripts.png"><img alt="The GEE scripts tab." src="../_images/gee_scripts.png" style="width: 450px;" /></a>
</div>
<p>Detailed information can be found under “Development Environments: Earth Engine Code Editor” here: <a class="reference external" href="https://developers.google.com/earth-engine/guides/playground">https://developers.google.com/earth-engine/guides/playground</a></p>
<div class="figure align-center">
<img alt="Earth engine code editor" src="../_images/earth_engine_code_editor.png" />
</div>
</div>
</div>
<div class="section" id="data-archiving-and-creating-metadata">
<span id="section-5-5"></span><h3>Data archiving and creating metadata<a class="headerlink" href="#data-archiving-and-creating-metadata" title="Permalink to this headline">¶</a></h3>
<p>Finally, we will discuss the information needed for proper data archiving, which overlaps significantly with creating metadata for your area estimation. Metadata is a set of data that provides information about other data, such as your classification and area estimation data.</p>
<div class="section" id="data-archiving">
<h4>Data archiving<a class="headerlink" href="#data-archiving" title="Permalink to this headline">¶</a></h4>
<p>For data archiving, the following information needs to be compiled:</p>
<ul class="simple">
<li><p>A database of the sample data collected by the interpreters including:</p>
<ul>
<li><p>The geographical coordinates in define coordinate or projection system.</p></li>
<li><p>The unique identification code for each sample unit.</p></li>
<li><p>The interpretation of all sample units including the previous interpretation(s) of the sample unit in the case this was revised or corrected.</p></li>
</ul>
</li>
<li><p>The interpretation of sample units conducted by the coordinator.</p></li>
<li><p>Metadata regarding the interpreter that collected the sample data, when the data was collected, which data sources were used.</p></li>
</ul>
<p>Think about the work you did in completing Modules 1-4. What other data do you think should be archived? What would be helpful to your colleagues or yourself in the future looking to replicate your work?</p>
<p>You should store the data collection report, your data tables, any metadata, etc. in a standard format. When naming files you should follow a naming convention such as Data collection_data_date[year/month/day]_version number (FAO SOP). When writing your documentation report, you should include links to your data storage locations.</p>
</div>
<div class="section" id="creating-metadata">
<h4>Creating metadata<a class="headerlink" href="#creating-metadata" title="Permalink to this headline">¶</a></h4>
<p>This worksheet is designed to assist you in becoming more efficient and informed about documenting and archiving information relating to the planning, preparation, and management of remote sensing dataset and analysis, such as analyses conducted for forest inventory monitoring (e.g. REDD+ activities).</p>
<p>Documentation and archiving remote sensing analysis methods ensures there is transparency and makes it easier to replicate or improve methods as programs increase in complexity and robustness. For more information on the good practice recommendations for documentation, archiving and reporting please refer to the 2006 IPCC Guidelines Vol. 1 Chp. 6 Section 11.</p>
<p>Below we have provided you with headings and some questions for each step in the metadata creation process, that is, where you should provide information about your workflow in order to ensure transparency about your data and processing steps and comply with best practices. The information you provide below should be sufficient and clear enough so that someone else can understand how the analysis was conducted and would be able to replicate it.</p>
<p>When completing this exercise, think about the work you have completed in the 4 first modules. When you conduct your own classification and area estimation processes in the future, take the time to customize and add additional sections to this document. This exercise is designed to get you started in this practice and moving down the right path.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Preparing and Downloading Cloud-free Composite Using Google Earth</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data used</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Time frame for composite</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Software used</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Pre-processing methods</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Methods for cloud removal</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Assess RS results</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Assumptions (Note: Need to archive outputs before proceeding with analysis)</p></td>
<td></td>
</tr>
</tbody>
</table>
<br/><table class="colwidths-given table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Creating Band Ratios, Indices and Image Transformation for use in Classification and Change Detection Analysis</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Software used</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Description of indices</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Assess RS results</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Assumptions (Note: Need to archive outputs before proceeding with analysis)</p></td>
<td></td>
</tr>
</tbody>
</table>
<br/><table class="colwidths-given table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Image Classification Scheme</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Document Clear definitions for classes or categories (i.e., land use categories defined by the IPCC as: Forest Land, Cropland, Grassland, Wetlands, Settlements, and Other Land)</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Have you identified any categories as “Key Categories”? How is the analysis different?  Please refer to Volume 1, Chapter 4 of the 2006 IPCC Guidelines on what defines a “Key Category”.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Assess RS results</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Assumptions (Note: Need to archive outputs before proceeding with analysis)</p></td>
<td></td>
</tr>
</tbody>
</table>
<br/><table class="colwidths-given table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Collect Reference Data</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>What type of reference data are you using?</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>What is your sampling scheme and what is the logic for its design?</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Assess RS results</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Assumptions (Note: Need to archive outputs before proceeding with analysis)</p></td>
<td></td>
</tr>
</tbody>
</table>
<br/><table class="colwidths-given table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Perform Land Cover Classification or Land Cover Change Analysis</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Software</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Analysis technique</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Assess RS results</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Assumptions (Note: Need to archive outputs before proceeding with analysis)</p></td>
<td></td>
</tr>
</tbody>
</table>
<br/><table class="colwidths-given table">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Perform Accuracy Assessment</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sampling approach</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Analysis technique</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Assess results</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Assumptions (Note: Need to archive outputs before proceeding with analysis)</p></td>
<td></td>
</tr>
</tbody>
</table>
<br/></div>
</div>
</div>
<div class="section" id="conclusion">
<h2>conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>Congratulations! You have completed the SEPAL-CEO Area Estimation cookbook!</strong></p>
</div>
<p>Now you know:</p>
<ul class="simple">
<li><p>How to perform an accuracy assessment and generate area estimates in SEPAL</p></li>
<li><p>How to conduct a two-date change detection classification in SEPAL</p></li>
<li><p>How to create a stratified random sampling design for your map and a project (CEO or CEO-SEPAL) to collect reference data</p></li>
<li><p>How to create a Landsat mosaic using the many customizable parameters in SEPAL</p></li>
<li><p>How to collect training data in SEPAL’s classification interface</p></li>
<li><p>How to produce map classifications in SEPAL</p></li>
<li><p>How to assess important quality assurance metrics for your project</p></li>
<li><p>How to log key decision points for your project!</p></li>
<li><p>How to comment code</p></li>
<li><p>How to use version control options for your project!</p></li>
<li><p>How to report your area estimation project</p></li>
</ul>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2020-2021, the SEPAL development team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.3.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>